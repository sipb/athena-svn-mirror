2002-04-18  Christopher James Lahey  <clahey@ximian.com>

	* .cvsignore: Added iconv-detect.h.

	* Makefile.am (EXTRA_DIST): Removed iconv-detect.h.

	* configure.in: Added "-I$(srcdir)" to CFLAGS here before
	compiling iconv-detect.c.

	* gal/util/Makefile.am: Added "-I$(top_builddir)" to INCLUDES
	here.

	* iconv-detect.h: Removed this autogenerated file from cvs.

2002-04-18  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.9.2.

2002-04-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (emit_event): If there is a grabbed_item,
	send all events to it.

2002-04-18  Ettore Perazzoli  <ettore@ximian.com>

	* Makefile.am (EXTRA_DIST): Add iconv-detect.c and iconv-detect.h.

	* iconv-detect.c: New.
	* iconv-detect.h: New.

2002-04-18  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Add imlib cflags/libs to EXTRA_GNOME_CFLAGS and
	EXTRA_GNOME_LIBS to work around a bug in the gnome-libs
	cflags/libs.

	* gal/util/e-xml-utils.c: #include <parser.h> and <xmlmemory.h>
	instead of <gnome-xml/parser.h> and <gnome-xml/xmlmemory.h>.

	* gal/util/e-xml-utils.h: Don't #include libxml headers from
	gnome-xml [i.e. #include <tree.h>, not <gnome-xml/tree.h>.
	* gal/util/e-unicode.h: Likewise.
	* gal/e-table/e-table-click-to-add.h: Likewise.
	* gal/e-table/e-table-column-specification.c: Likewise.
	* gal/e-table/e-table-column-specification.h: Likewise.
	* gal/e-table/e-table-field-chooser-item.h: Likewise.
	* gal/e-table/e-table-header-item.h: Likewise.
	* gal/e-table/e-table-memory.c: Likewise.
	* gal/e-table/e-table-memory.c: Likewise.
	* gal/e-table/e-table-scrolled.c: Likewise.
	* gal/e-table/e-table-scrolled.c: Likewise.
	* gal/e-table/e-table-sort-info.h: Likewise.
	* gal/e-table/e-table-specification.c: Likewise.
	* gal/e-table/e-table-specification.c: Likewise.
	* gal/e-table/e-table-state.c: Likewise.
	* gal/e-table/e-table-state.c: Likewise.
	* gal/e-table/e-table-state.h: Likewise.
	* gal/e-table/e-table.h: Likewise.
	* gal/e-table/e-tree-memory.c: Likewise.
	* gal/e-table/e-tree-memory.c: Likewise.
	* gal/e-table/e-tree-model.c: Likewise.
	* gal/e-table/e-tree-model.c: Likewise.
	* gal/e-table/e-tree-scrolled.c: Likewise.
	* gal/e-table/e-tree-scrolled.c: Likewise.
	* gal/e-table/e-tree-sorted.c: Likewise.
	* gal/e-table/e-tree-sorted.c: Likewise.
	* gal/e-table/e-tree-table-adapter.c: Likewise.
	* gal/e-table/e-tree-table-adapter.c: Likewise.
	* gal/e-table/e-tree.h: Likewise.
	* gal/e-text/e-entry.c: Likewise.
	* gal/e-text/e-entry.h: Likewise.
	* gal/menus/gal-define-views-model.c: Likewise.
	* gal/menus/gal-define-views-model.c: Likewise.
	* gal/menus/gal-define-views-model.c: Likewise.
	* gal/menus/gal-view-collection.c: Likewise.
	* gal/menus/gal-view.h: Likewise.
	* gal/widgets/e-categories-master-list-array.c: Likewise.
	* gal/widgets/e-categories-master-list-array.c: Likewise.
	* gal/widgets/e-categories-master-list-array.c: Likewise.
	* gal/widgets/e-unicode.c: Likewise.

	* gal/unicode/Makefile.am: Add $(EXTRA_GNOME_CFLAGS).

	* configure.in: Use ICONV_CFLAGS and ICONV_LIBS for compiling the
	iconv-detect test so we make sure we are using the same version of
	iconv that the actual library is going to use.

2002-04-16  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: Use iconv-detect.c to generate a iconv-detect.h
	file containing information about the preferred charset formats to
	use with the system iconv.

	* iconv-detect.c: New program to detect the preferred charset
	formats for use with the system iconv.

	* gal/util/e-iconv.c (e_iconv_charset_name): Update to use macros
	defined in iconv-detect which is created at configure time.

2002-04-09  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-text/e-entry.c (e_entry_show_popup): Don't show the popup
	if the entry->canvas doesn't have focus.

2002-03-20  Christopher James Lahey  <clahey@ximian.com>

	* configure.in (GAL_REVISION): Bumped GAL_REVISION and bumped
	version number to 0.19.1.1.

2002-03-18  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.19.1.

2001-12-18  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Bumped version number to 0.19.0.1.  Bumped
	GAL_REVISION.

2001-12-18  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Bumped version number to 0.19.

2001-12-17  Christopher James Lahey  <clahey@ximian.com>

From a patch by Dan Nguyen <dnn@austin.ibm.com>

	* configure.in: Added configure check for %l and %k in strftime.

	* gal/util/e-util.c, gal/util/e-util.h (e_strftime): New function.
	Handles %l and %k even on platforms that don't support them by
	translating to %I and %H.

2001-12-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model-simple.c
	(e_selection_model_simple_set_row_count): Set esma->selected_row
	and esma->selected_range_end to -1 here.

	* gal/widgets/e-selection-model-array.c
	(e_selection_model_array_confirm_row_count): Set selected_row and
	selected_range_end to -1 here.
	(esma_select_single_row): Check that selected_row is within the
	range of possible rows.  This should never happen, but this check
	will help if it does.

2001-11-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am: Added e-canvas-background.lo.

	* gal/widgets/Makefile.am: Added e-canvas-background.c and
	e-canvas-background.h.

	* gal/widgets/e-canvas-background.c,
	gal/widgets/e-canvas-background.h: New class, provides infinite
	background color or arbitrary rectangle of background color.

2001-12-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/unicode/gunidecomp.c (_g_utf8_normalize_wc): Handle the case
	of invalid utf8 here by simply dropping any invalid characters.

2001-12-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_unrealize): Turn off idle
	handling in the unrealize function instead of the destroy
	function.

2001-12-10  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (text_width_with_objects): Don't crash if
	the text string is NULL.
	(text_draw_with_objects): Don't crash if the text string is NULL.
	(Fixes #16359)

2001-12-04  Christopher James Lahey  <clahey@ximian.com>

	* configure.in (GAL_CURRENT): Bumped version number to 0.18.99.0
	and CURRENT to 19.

2001-11-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Handle
	selection_row_changed signal.

	* gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-array.h: Properly send
	selection_row_changed signals if changing from a single row
	selected to a single other row selected or if moving the
	selection_end by a single row.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added selection_row_changed
	signal.
	(e_selection_model_select_as_key_press): Fixed the case statement
	here to make MULTIPLE and EXTENDED the same as BROWSE instead of
	as SINGLE.

2001-11-30  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.18.2 and GAL_REVISION
	to 2.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-gui-utils.c
	(e_container_change_tab_order_callback): Don't do anything if
	focus_child is NULL.  This makes tab when cycling around tab order
	not skip to the beginning of this tab order group.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

	* configure.in (GAL_CURRENT): Bumped version number to 0.18.1.

	* gal/widgets/e-selection-model-array.c
	(e_selection_model_array_delete_rows): Make sure the cursor row is
	selected after deleting here.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

From a patch by Yukihiro Nakai <ynakai@redhat.com>.

	* gal/widgets/e-canvas.c (e_canvas_realize): Handle
	GDK_IM_PREEDIT_POSITION here.

2001-11-14  Christopher James Lahey  <clahey@ximian.com>

From a patch by Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-categories-master-list-combo.c
	(ecmlc_ecml_changed): Collate based on the utf8 strings instead of
	the locale strings.  Fixes Ximian bug #14895.

2001-11-12  Zbigniew Chyla  <cyba@gnome.pl>

	gal/unicode/gutf8.c (g_ucs4_to_utf8):
	s/g_error/utf8_error_msg/ (don't abort on invalid UTF-8).

2001-11-12  Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-categories.c (e_categories_init): Removed much of
	the UI initialization; moved to e_categories_construct.
	(e_categories_construct): Now contains the UI initialization.
	Checks to make sure the relevant glade file is found.
	(e_categories_new): If our construct call failed to properly load
	the gui, return NULL. (Fixes #14780)

2001-11-06  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/util/e-unicode-i18n.h:
	Fixed stupid bug (U_ macro should always take one argument).

	* gal/e-table/e-table-group-container.c (compute_text): s/_/U_

2001-11-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.18.0.1.  Bumped
	revision to 1.

2001-11-08  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (full_cb): Only popup entries that have
	focus.  Fixes the lingering completion popup bug.

2001-11-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.18.

2001-11-03  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.17.99.0.  Bumped
	the soname to 18.

	* gal/widgets/e-categories.c (e_categories_destroy): Got rid of a
	GtkWarning here that was due to Gtk+ casting a NULL pointer.
	Fixes Ximian bug #14327.

2001-10-31    <NotZed@Ximian.com>

	* configure.in: Bumped version number to 0.17.

2001-10-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.16.99.0 and
	GAL_CURRENT to 17.

2001-10-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.16.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.15.99.10.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c: Added column_width argument.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_reflow): Calc height here if we need
	it to check the y position of the cursor.

2001-10-30  Larry Ewing  <lewing@ximian.com>

	* gal/unicode/gunicode.h: update for get_char_validated.

	* gal/unicode/gutf8.c (g_utf8_get_char_validated): add this for
	gtkhtml to get rid of extra cut & paste.

2001-10-30  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number here to 0.15.99.9.

2001-10-30    <NotZed@Ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Add e-unicode-i18n.lo.  Blah,
	thanks for a totally untested patch, and next time read the big
	three WARNINGS in the Makefile before you break the build.

2001-10-29  Joe Shaw  <joe@ximian.com>

	* configure.in: Bump version up to 0.15.99.8

	* gal/util/Makefile.am: Build e-unicode-i18n.c and install
	e-unicode-i18n.h.

2001-10-29  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (e_entry_make_completion_window_transient):
	Added.  Makes our popup window a transient of the toplevel.
	(e_entry_enable_completion_full): Try to make our popup a
	transient.
	(e_entry_realize): Also try to make our popup a transient here, in
	case the entry wasn't packed before we enabled completion.  This
	is all an attempt to fix bug #13791.

	* gal/e-text/e-entry.c (e_entry_destroy): destroy our
	completion_view_popup... we've been leaking them all of this time.
	This should fix the mysterious bug #13900.

	* gal/e-text/e-completion-match.c (e_completion_match_set_text):
	Silently drop match strings that contain invalid utf-8... not a
	good thing to do, but better than any of the currently available
	alternatives.

2001-10-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_stop_editing): Set text->revert =
	NULL here.
	(e_text_cancel_editing): Only revert if text->revert is non-null.

2001-10-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number here to 0.15.99.7.

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_stop_editing):
	Exported this function.
	(e_text_cancel_editing): New function.  Allows you to revert
	edits.

2001-10-28  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c
	(e_text_event_processor_emacs_like_event): Return 1 from the
	button_release event.  Fixes Ximian bug #13701.

2001-10-27  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (connect_set_adjustment): Commented out
	connecting to the scroll adjustments here since it's not necessary
	for how we use e-reflow.  Fixes Ximian bug #13306.

2001-10-27  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.99.6 for
	emulate_label_resize.

	* gal/e-text/e-entry.c: Added "emulate_label_resize" argument to
	make EEntry act like a label for width resizing purposes.

2001-10-26  Damon Chaplin  <damon@ximian.com>

	* configure.in: bumped gnome-print requirement from 0.21 to 0.25,
	to try to avoid bug #13466. (I have 0.25 and it is OK.)

2001-10-26  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump up to 0.15.99.5.

	* gal/util/e-util.c
	(e_marshal_INT__POINTER_POINTER_POINTER_POINTER_POINTER): pass
	`args[4]' as the fourth argument instead of `args[3]' again.
	(e_marshal_INT__POINTER_POINTER_POINTER_BOOL): New.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-test.c, gal/util/e-i18n.h,
	gal/widgets/e-hsv-utils.c, gal/widgets/e-hsv-utils.h: Changed the
	license announcement at the top of these files.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-vscrollbar.h: Fix a typo.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-hpaned.c, gal/e-paned/e-hpaned.h,
	gal/e-paned/e-paned.c, gal/e-paned/e-paned.h,
	gal/e-paned/e-vpaned.c, gal/e-paned/e-vpaned.h,
	gal/e-text/e-completion-match.c, gal/e-text/e-completion-match.h,
	gal/e-text/e-completion-test.c, gal/e-text/e-completion-view.c,
	gal/e-text/e-completion-view.h, gal/e-text/e-completion.c,
	gal/e-text/e-completion.h, gal/e-text/e-entry-test.c,
	gal/e-text/e-entry.c, gal/e-text/e-entry.h,
	gal/e-text/e-table-text-model.c, gal/e-text/e-table-text-model.h,
	gal/e-text/e-text-model-repos.c, gal/e-text/e-text-model-repos.h,
	gal/e-text/e-text-model-test.c, gal/e-text/e-text-model-uri.c,
	gal/e-text/e-text-model-uri.h, gal/e-text/e-text-model.c,
	gal/e-text/e-text-model.h, gal/e-text/e-text.c,
	gal/e-text/e-text.h, gal/util/e-bit-array.c,
	gal/util/e-bit-array.h, gal/util/e-cache.c, gal/util/e-cache.h,
	gal/util/e-iconv.c, gal/util/e-iconv.h, gal/util/e-sorter-array.c,
	gal/util/e-sorter-array.h, gal/util/e-sorter.c,
	gal/util/e-sorter.h, gal/util/e-text-event-processor-emacs-like.c,
	gal/util/e-text-event-processor-emacs-like.h,
	gal/util/e-text-event-processor-types.h,
	gal/util/e-text-event-processor.c,
	gal/util/e-text-event-processor.h, gal/util/e-util.c,
	gal/util/e-util.h, gal/util/e-xml-utils.c, gal/util/e-xml-utils.h,
	gal/widgets/color-group.c, gal/widgets/color-group.h,
	gal/widgets/color-palette.c, gal/widgets/color-palette.h,
	gal/widgets/e-canvas-utils.c, gal/widgets/e-canvas-utils.h,
	gal/widgets/e-canvas-vbox.c, gal/widgets/e-canvas-vbox.h,
	gal/widgets/e-canvas.c, gal/widgets/e-canvas.h,
	gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-array.h,
	gal/widgets/e-categories-master-list-combo.c,
	gal/widgets/e-categories-master-list-combo.h,
	gal/widgets/e-categories-master-list-dialog-model.c,
	gal/widgets/e-categories-master-list-dialog-model.h,
	gal/widgets/e-categories-master-list-dialog.c,
	gal/widgets/e-categories-master-list-dialog.h,
	gal/widgets/e-categories-master-list.c,
	gal/widgets/e-categories-master-list.h,
	gal/widgets/e-categories.c, gal/widgets/e-categories.h,
	gal/widgets/e-colors.c, gal/widgets/e-colors.h,
	gal/widgets/e-cursors.c, gal/widgets/e-cursors.h,
	gal/widgets/e-font.c, gal/widgets/e-font.h,
	gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h,
	gal/widgets/e-hscrollbar.c, gal/widgets/e-hscrollbar.h,
	gal/widgets/e-popup-menu.c, gal/widgets/e-popup-menu.h,
	gal/widgets/e-printable.c, gal/widgets/e-printable.h,
	gal/widgets/e-reflow-model.c, gal/widgets/e-reflow-model.h,
	gal/widgets/e-reflow-sorted.c, gal/widgets/e-reflow-sorted.h,
	gal/widgets/e-reflow.c, gal/widgets/e-reflow.h,
	gal/widgets/e-scroll-frame.c, gal/widgets/e-scroll-frame.h,
	gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-array.h,
	gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h,
	gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h,
	gal/widgets/e-unicode.c, gal/widgets/e-unicode.h,
	gal/widgets/e-vscrollbar.c, gal/widgets/e-vscrollbar.h,
	gal/widgets/gtk-combo-box.c, gal/widgets/gtk-combo-box.h,
	gal/widgets/gtk-combo-stack.c, gal/widgets/gtk-combo-stack.h,
	gal/widgets/gtk-combo-text.c, gal/widgets/gtk-combo-text.h,
	gal/widgets/test-color.c, gal/widgets/test-e-font.c,
	gal/widgets/test-e-font.h, gal/widgets/test-font-loading.c,
	gal/widgets/widget-color-combo.c,
	gal/widgets/widget-color-combo.h,
	gal/widgets/widget-pixmap-combo.c,
	gal/widgets/widget-pixmap-combo.h,
	src/e-table/e-table-sorted-variable.c, tests/test-define-views.c,
	tests/test-shortcut-bar.c, tests/test-table-1.c,
	tests/test-tree-1.c, tests/test-tree-2.c, tests/test-tree-3.c,
	tests/test-unicode.c: Changed the license announcement at the top
	of these files.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Added
	cursor_changed handling to set the has_cursor argument of the
	contained objects.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* docs/etablexml.txt: Document allow-grouping attribute.

	* tests/test-table-1.c (SPEC): Updated this to test the
	allow_grouping=\"false\" attribute.

2001-10-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-iconv.c (e_iconv), gal/widgets/e-font.c
	(e_font_to_native), gal/widgets/e-unicode.c
	(e_utf8_from_iconv_string_sized, e_utf8_to_iconv_string_sized,
	e_utf8_from_gtk_string_sized, e_utf8_to_gtk_string_sized): Fixed
	warnings here.

2001-10-25    <NotZed@Ximian.com>

	* configure.in: Bumped version to 0.15.99.4 for e-iconv changes.

	* gal/widgets/e-unicode.c (e_utf8_from_iconv_string_sized): "
	(e_utf8_to_iconv_string_sized): "
	(e_utf8_from_gtk_string_sized): "
	(e_utf8_to_gtk_string_sized): "

	* gal/widgets/e-font.c (e_font_to_native): s/iconv/e_iconv/

	* gal/util/e-iconv.c (e_iconv): Implement a wrapper for iconv() to
	make sure we link with and execute the right iconv to match the
	right iconv_open.  (BLAH!)

2001-10-24  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/Makefile.am (INCLUDES): Added $(ICONV_CFLAGS).

	* gal/unicode/Makefile.am (INCLUDES): Added $(ICONV_CFLAGS).

	* gal/util/Makefile.am (INCLUDES): Added $(ICONV_CFLAGS).

2001-10-23  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_draw): Use the widget's style's
	text_gc for drawing text if either draw_background or draw_button
	is on.  Fixes Ximian bug #2215.

2001-10-23  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version to 0.15.99.3 for EText's
	"draw_button" argument.

	* gal/e-text/e-entry.c: Forward the "draw_button" argument to the
	contained EText.

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_draw): Added
	new "draw_button" argument.  If this is turned on and the first
	widget that's a parent of the containing canvas with GTK_NO_WINDOW
	turned off above the current one is a button, EText draws a button
	underneath itself to match the containing button.

2001-10-22  Damon Chaplin  <damon@ximian.com>

	* configure.in: bumped version to 0.15.99.2.

2001-10-22  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c
	(control_keys): Make C-w not do anything here.
	(e_text_event_processor_emacs_like_event): Make C-A-* not do
	anything here.

2001-10-22  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_get_selection):
	Accept UTF8_STRING, UTF-8, and STRING targets when getting the
	selection.  Fixes Ximian bug #12086.

2001-10-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_get_invisible): Offer UTF8_STRING,
	UTF-8, COMPOUND_TEXT, STRING, and TEXT targets when we offer the
	selection.

2001-10-21  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_selection_event_real): Use
	right_click_down here instead of maybe_do_something.

2001-10-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.h: Changed some of these gbooleans to be
	guint : 1s.

	* gal/widgets/e-canvas.c (e_canvas_item_grab_focus): Send the in
	event here to the new focused item instead of the old one.

2001-10-18  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.99.1.

	* gal/util/e-util.c, gal/util/e-util.h (e_write_file_mkstemp): New
	function to create a unique file.
	(e_write_file): Check the return value of close here.

2001-10-18  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (e_entry_enable_completion_full): Connect
	keys before we show the widget.

2001-10-17  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.99.0 and
	sonumber to 0.16.

2001-10-17  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.15.

2001-10-16    <NotZed@Ximian.com>

	* gal/util/e-iconv.c (flush_entry): Want to check nn not in for
	end of list condition.

2001-10-13  Larry Ewing  <lewing@ximian.com>

	* gal/util/e-iconv.c (e_iconv_open): work around broken behavior
	in some iconv implementions that require the length arguments to
	be valid pointers event if both buffers are NULL.

2001-10-14  Not Zed  <NotZed@Ximian.com>

	* gal/util/e-iconv.c: Added special case for iso-10646-1 ->
	ucs-2be encoding since its not always available.

2001-10-13  Carlos Perelló Marín <carlos@gnome-db.org>

	* configure.in (ALL_LINGUAS): Added pt

2001-10-12  Larry Ewing  <lewing@ximian.com>

	* gal/util/e-iconv.c (e_iconv_charset_name): fix the test for
	"cp".
	(flush_entry): free the conv string and make sure we remove all
	the the items not all but the last one.

2001-10-12  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/util/e-iconv.c (e_iconv_init): Fix for Debian systems which
	apparently can use a ';' as a codeset terminator? Cleaned up the
	code in the process, the parser is a little nicer now.

2001-10-12  Larry Ewing  <lewing@ximian.com>

	* gal/util/e-iconv.c (e_iconv_charset_name): tweak the conversion
	routine slightly for microsoft charsets.
	(e_iconv_charset_name): fix microsoft fix.

2001-10-12    <NotZed@Ximian.com>

	* gal/util/e-iconv.c: Fix case of some entries to work with
	solaris, incl adding UTF-8.
	(e_iconv_init): Dont down-case the name, only the key.
	(e_iconv_charset_name): Use capitals for ISO and CP for Solaris's
	iconv to work.
	(e_iconv_open): If we can't convert, say we're not busy, so it
	gets re-used next open, spit out a warning.

2001-10-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-iconv.c (e_iconv_open): Changed the crash fix to just
	return -1.

2001-10-12  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-iconv.c (e_iconv_open): Fixed a crash here for NULL
	ofrom.

2001-10-11    <NotZed@Ximian.com>

	* configure.in: bumped revision to .1

	* gal/widgets/test-font-loading.c (print_gdk_font_name): Close
	iconv when done.

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized): Close
	iconv when dont with it.
	(e_utf8_from_charset_string_sized): Changed for e_iconv api
	changes.
	(e_utf8_to_charset_string_sized): "
	(e_utf8_from_gtk_string_sized): Close iconv when done with it.
	(e_utf8_from_locale_string_sized): "
	(e_utf8_to_locale_string_sized): "

	* gal/widgets/e-font.c (e_locale_encoding): Removed.
	(e_iconv_from_charset): Removed.
	(e_iconv_to_charset): Removed.
	(e_iconv_from_locale): Removed.
	(e_iconv_to_locale): Removed.
	(e_iconv_from_gdk_font): Changd to use new e-iconv apis.
	(e_iconv_to_gdk_font): "
	(e_font_unref): Close iconv's when done with them.
	(translate_encoding): Removed.
	(get_locale_charset): Removed.
	(e_gdk_font_encoding): Fix for api changes.

	* gal/util/e-iconv.c: New stuff to commonify/fix up some problems
	with the iconv cache/conversion stuff inside e-font.

2001-10-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-dialog-model.c
	(ecmldm_destroy): Don't g_free priv->ecml here since it's a
	GtkObject.

	* gal/widgets/e-font.c (e_font_to_native): Changed this to use
	g_utf8_next_char.
	(e_font_utf8_char_width): Made this use g_utf8_skip instead.

2001-10-11  Christopher James Lahey  <clahey@ximian.com>

	Based on patches from Fredrik Nilsson <jymdman@home.se>.

	* gal/util/e-util.c (e_format_number): Made this work properly for
	numbers with a full set of 0s for one of the grouping elements.

2001-10-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-table-text-model.c (e_table_text_model_insert,
	e_table_text_model_insert_length, e_table_text_model_delete),
	gal/e-text/e-text-model.c (e_text_model_real_insert,
	e_text_model_real_insert_length): Use e_strdup_append_strings here
	instead of g_strdup_printf because printf("%.*s") is locale
	dependent on some systems.

	* gal/util/e-util.c (e_strdup_append_strings): New function to
	append a bunch of strings with optional lengths.

2001-10-10  Christopher James Lahey  <clahey@ximian.com>

	Based on patches from Dan Nguyen <dnn@austin.ibm.com>.

	* gal/Makefile.am (libgal_la_LDFLAGS): Added $(GTK_LIBS).

	* gal/e-text/e-text.c (e_text_event): Changed this from a C++
	comment to a C comment.

2001-10-10  Rodrigo Moya <rodrigo@ximian.com>

	* Makefile.am: match backslashes

2001-10-10  Christopher James Lahey  <clahey@ximian.com>

	Based on patches from Yukihiro Nakai <ynakai@redhat.com>.

	* gal/widgets/e-font.c (e_font_utf8_char_width, e_font_to_native):
	Fixed the test for 4 byte characters here.

2001-10-10  Christopher James Lahey  <clahey@ximian.com>

	* configure.in (GAL_CURRENT): Bumped sonumber to 15.

2001-10-09  JP Rosevear  <jpr@ximian.com>

	* configure.in: bump version to 0.14.99.0

2001-10-09  Rodrigo Moya <rodrigo@ximian.com>

	* configure.in: added libart to EXTRA_GNOME_CFLAGS/LIBS, needed by
	GnomeCanvas, but which is now installed in a different prefix

2001-10-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.14.

2001-10-06  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_from_gtk_event_key): remove the
	test condition and always work from the locale not the font.
	This has been tested and verified with owen.

2001-10-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_flexible_strtod): New
	function that parses a string as a double either in the C locale
	or the current locale.
	(e_ascii_dtostr): New function that saves a double as a string as
	it would be saved in the C locale.

	* gal/util/e-xml-utils.c
	(e_xml_get_double_prop_by_name_with_default): Use
	e_flexible_strtod here.
	(e_xml_set_double_prop_by_name): Use e_ascii_dtostr here.  Fixes
	Ximian bug #11440.

2001-10-05  Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-categories-master-list-combo.c
	(ecmlc_ecml_changed): Sort the list of categories.
	(Bug 8088)

2001-10-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.13.99.1.

2001-10-06  Michael Meeks  <michael@ximian.com>

	* *.c s/->childs/->xmlChildrenNode/g;

2001-10-05  Michael Meeks  <michael@ximian.com>

	* gal/util/e-util.h: add E_OBJECT_CLASS_ADD_SIGNALS and
	E_OBJECT_CLASS_TYPE to ease migration to Gnome 2.0 from
	a single source base.

	* All C files:
	s/object_class->type,/E_OBJECT_CLASS_TYPE (object_class),/g;
	s/gtk_object_class_add_signals([^\(]*)\(([^,]*),([^,]*),([^\)]*)/
	E_OBJECT_CLASS_ADD_SIGNALS\1(\2,\3,\4/;

2001-10-03  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/gtk-combo-text.h : fix typo.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (set_empty): Transcode empty message from
	utf8 to gtk charset.  Fixes Ximian bug #2468.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-text-event-processor-emacs-like.c
	(e_text_event_processor_emacs_like_event): Don't handle
	control-enter if allow_newlines is off. Fixes Ximian bug #3742.

2001-10-02  Jody Goldberg <jgoldberg@home.com>

	* tests/Makefile.am : remove duplicated
	  test_shortcut_bar_LDFLAGS & test_shortcut_bar_LDADD
	  that were giving automake-1.5 gas.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-model.c (MAX_LENGTH): Added a max length of
	2047 to the standard ETextModel.  Fixes Ximian bug #3021.

2001-10-02  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the sonumber to 14.

	* gal/widgets/e-canvas-utils.c, gal/widgets/e-canvas-utils.h
	(e_canvas_item_area_shown): New function returns TRUE iff
	e_canvas_item_show_area would be a noop.

2001-10-01  JP Rosevear  <jpr@ximian.com>

	* configure.in: bump to 0.13.99.0

2001-10-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Updated version number to 0.13.

2001-09-26  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c
	(e_completion_view_key_press_handler): Allow ctrl-p and ctrl-n to
	be used to move up and down in the completion list. (Bug #10500)

	* gal/e-text/e-completion-match.c (e_completion_match_set_text):
	Properly validate the utf8. 

2001-09-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (_insert): Made it so
	that if allow_newlines is FALSE, pasting into ETexts doesn't
	insert carriage returns.  Fixes Ximian bug #5761 and Ximian bug
	#9067.

2001-09-25  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.12.99.2.

2001-09-24    <NotZed@Ximian.com>

	* gal/widgets/e-font.c (translate_encoding): If we dont have the
	encoding in our lookup table, add a copy, and return the copy, not
	the incoming string.

2001-09-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.12.99.0.

	From a patch by Damian Ivereigh <damian@cisco.com>:

	* gal/util/e-util.c, gal/util/e-util.h (e_strftime_fix_am_pm): New
	function, takes the same arguments as strftime, but does some
	fixup if the given string is in 12 hour mode but the locale
	doesn't have AM/PM descriptors.

2001-09-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.12.0.1.

2001-09-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.12.

2001-09-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (reflow_columns): Fixed a typo here where
	we were setting the running height based on the height of object
	number 2 instead of the current object.  Fixes Ximian bug #8807.

2001-09-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h
	(e_selection_model_right_click_down,
	e_selection_model_right_click_up): New functions to deal with the
	special cases of what happens when you right click on a tree or
	table in single selection mode.

2001-09-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-sorter-array.c (e_sorter_array_append): Fixed a typo
	here.  esa->rows += count, not esa->rows = count.

2001-09-18  Christopher James Lahey  <clahey@ximian.com>

	* LICENSE, README, gal.spec.in: Changed the license to LGPL.

2001-09-17  Larry Ewing  <lewing@ximian.com>

	* gal/e-text/e-text.c (e_text_supply_selection): remove redundant
	NULL checks since g_free handles NULLs.
	(e_text_destroy): free the selection.  It does appear to be a
	guarantee that we get a selection-clear event before we are
	destroyed.

2001-09-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.99.4.

	* gal/e-text/e-completion-view.c (e_completion_view_construct),
	tests/test-table-1.c (create_table): Changed the parameters to
	e_table_simple_new here to adjust to changes in the interface.

	* gal/widgets/e-categories-master-list-array.c (ecmla_default):
	Fixed a memory leak here.

	* gal/widgets/e-categories.c (e_categories_get_save_id): Added
	get_save_id here so that selection would be maintained across
	changes.

2001-09-15  Jon Trowbridge  <trow@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_reflow): Check that
	unsorted >= 0 before using it as an array index.  (Bug #9115)

2001-09-13  Dan Winship  <danw@ximian.com>

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Unref the model after creating the ETable, since the table will
	hold a ref on it until we destroy it when we're destroyed.

	* gal/e-text/e-entry.c (e_entry_destroy): Unref the popup window
	rather than destroying it.

2001-09-13  Lauris Kaplinski  <lauris@ximian.com>

	* gal/widgets/e-font.c (e_font_from_gdk_name): Applied Roger's patch
	that pretends to correct some chinese problems (with minor fixes)
	(e_font_from_gdk_font): Ditto
	(translate_encoding): Ditto
	(get_locale_charset): Ditto

2001-09-12  Radek Doulik  <rodo@ximian.com>

	* gal/widgets/e-font.c (e_font_from_gdk_name): use fontset for all
	fonts whose encoding begins with 'jis'

2001-09-12  Lauris Kaplinski  <lauris@ximian.com>

	* gal/widgets/e-font.c (get_locale_charset): break locale string at ';'
	fixes bug #5396
	(translate_encoding): Terminate temp buffer, if encoding string is
	invalid (very long), would fix #5396, if the previous snippet wouldn't
	already done that ;-)

2001-09-09  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (e_text_text_model_changed): If our text shrinks,
	make sure that the selection doesn't spill off over the end of the
	reduced buffer.  (Related to bug #8535)

2001-09-08  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized): Re-remove
	evil utf8_to_gtk debug printf that Chris seems to have
	accidentally re-added.

2001-09-07  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.99.3 for
	ETableWithout.

	* gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h
	(e_selection_model_maybe_do_something): Return a value based on
	whether we did something.

2001-09-04  Ettore Perazzoli  <ettore@ximian.com>

	* gal/unicode/Makefile.am (INCLUDES): Add `-I$(top_srcdir)' here.

2001-09-02  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/widgets/e-unicode.c (e_utf8_from_locale_string_sized):
	Use e_iconv_from_locale, not e_iconv_to_locale.

2001-09-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.11.99.2 for new
	e_utf8 functions.

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h
	(e_utf8_is_ascii): Added this function.  Reformatted.

2001-09-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.11.99.1 for new
	e_utf8 functions.

	* gal/unicode/gunicollate.c (g_utf8_collate, g_utf8_collate_key):
	Changed this from e_utf8_from_locale_string to
	e_utf8_to_locale_string.

	* gal/widgets/e-font.c, gal/widgets/e-font.h
	(e_iconv_from_charset, e_iconv_to_charset): Added these functions
	to the exported interface (renamed them as well from
	e_iconv_from_encoding and e_iconv_to_encoding.)

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h
	(e_utf8_from_iconv_string, e_utf8_from_iconv_string_sized,
	e_utf8_to_iconv_string, e_utf8_to_iconv_string_sized,
	e_utf8_from_charset_string, e_utf8_from_charset_string_sized,
	e_utf8_to_charset_string, e_utf8_to_charset_string_sized): Added
	these functions.
	(e_utf8_from_locale_string, e_utf8_to_locale_string): Changed
	these to use the new e_utf8_from_iconv_string and
	e_utf8_to_iconv_string.

2001-08-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in (ALL_LINGUAS): zh_TW.Big5 -> zh_TW

2001-08-29  Chris Toshok  <toshok@ximian.com>

	* configure.in: use GTK_CONFIG instead of gtk-config.

2001-08-29  Peter Williams  <peterw@ximian.com>

	* gal/unicode/gunicollate.c: Change include order to compile
	correctly.

2001-08-29  Zbigniew Chyla  <cyba@gnome.pl>

	Correction to my previous patch - it didn't compile without
	__STDC_ISO_10646__ defined.

	* gunicollate.c
	(g_utf8_collate): Use e_utf8_from_locale_string instead of g_convert,
	cast g_get_charset argument to char**.
	(g_utf8_collate_key): Ditto.

2001-08-29  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version numbers since we changed the
	binary interface a little while back.

Tue Aug 28 18:29:28 2001  George Lebl <jirka@5z.com>

	Patch to fix few 64bit issues

	* gal/e-table/e-table-header-item.c (ethi_draw) (ethi_start_drag)
	  gal/widgets/e-categories.c (e_categories_value_at)
	  (e_categories_value_to_string):
	  Use GINT_TO_POINTER and GPOINTER_TO_INT to cast between pointers
	  and ints to fix 64bit issues connected with that.

	* gal/e-table/e-table-sorting-utils.c
	  (e_table_sorting_utils_tree_check_position)
	  gal/util/e-sorter-array.c (e_sorter_array_append):
	  Use size_t for size not ints to fix crashes

	* gal/e-text/e-completion-match.c, gal/e-text/e-completion.c:
	  Include <string.h>

2001-08-28  Zbigniew Chyla  <cyba@gnome.pl>

	Cut&pasted more code from glib2 for g_utf8_collate

	* configure.in: Bumped version to 0.11.3.

	* gal/Makefile.am (libgal_la_LIBADD):
	Added unicode/gunicollate.lo.

	* gal/unicode/Makefile.am
	(libunicode_la_SOURCES): Added gunicollate.c.
	(noinst_HEADERS): Added gunicomp.h.

	* gal/unicode/gunicode.h
	(enum GNormalizeMode): New.
	(g_ucs4_to_utf8, g_utf8_normalize, g_utf8_collate, g_utf8_collate_key):
	New functions.

	* gal/unicode/gunidecomp.c
	(find_decomposition, combine, _g_utf8_normalize_wc, g_utf8_normalize):
	New functions.

	* gal/unicode/gunidecomp.h:
	Copied from current version of glib2 with canon_offset and
	compat_offset fields added

	* gal/unicode/gutf8.c:
	(g_ucs4_to_utf8): New function.

	* gal/unicode/gunicollate.c, gal/unicode/gunicomp.h:
	New files.

2001-08-23  Yanko Kaneti  <yaneti@declera.com>

	* gal/widgets/Makefile.am (test_e_font_LDADD, test_font_loading_LDADD):
	* gal/e-text/Makefile.am (e_completion_test_LDADD): add ICONV_LIBS 
	to the test programs build flags

2001-08-23  Zbigniew Chyla  <cyba@gnome.pl>

	Fixes some Evolution bugs.

	* gal/widgets/e-categories-master-list-combo.c (ecmlc_ecml_changed):
	Convert categories to GTK+ locale before passing them to
	gtk_combo_set_popdown_strings.

2001-08-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.2.  Bumped so
	REVISION to 2.

2001-08-22  Zbigniew Chyla  <cyba@gnome.pl>

	This patch fixes a lot of i18n problems in Evolution.

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized):
	Call gtk_widget_ensure_style before refering to widget's style.

2001-08-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.1.  Bumped so
	REVISION to 1.

2001-08-21  Chris Toshok  <toshok@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_button): cut and paste fixed
	version of gnome_canvas_button here.
	(pick_current_item): needed by e_canvas_button, also from
	gnome-canvas.c.
	(gnome_canvas_item_invoke_point): same.
	(e_canvas_class_init): hook button_press_event and
	button_release_event to e_canvas_button.

2001-08-21  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.11.

2001-08-20  Jon Trowbridge  <trow@ximian.com>

	* configure.in: Increment version number to 0.10.99.5 for changes
	to ETableWithout api.

2001-08-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.10.99.4.  Fixed some
	comments.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-without.lo.

2001-08-16  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-match.h: Added "hit_count" to
	ECompletionMatch.  Used by search refinement/unrefinement.

	* gal/e-text/e-completion.c (e_completion_refine_search): Added.
	Handle automatic search refinements.
	(e_completion_unrefine_search): Added.  Handle automatic search
	"unrefinements", or reversions.
	(e_completion_begin_search): Check if the refinement or
	unrefinement operations can be used to handle the search.  Emit
	"request_search" at the end of the call.
	(e_completion_class_init): Added a new signal "request_search".
	"begin_search" is now purely informational, telling views that a
	series of matches and an "end_search" are forthcoming.

	* configure.in: Increment version of 0.10.99.3.

2001-08-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c (e_selection_model_key_press):
	Handle GDK_KP_Up and GDK_KP_Down here.

2001-08-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-dialog.glade: Gave this
	dialog a minimum size.  Fixes Ximian bug #5377.

2001-08-10  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-popup-menu.c (e_popup_menu_create):
	last_item_separator shouldn't get reset if the item is hidden.

2001-08-10  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-canvas-vbox.h: new proto and virtual method

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_real_add_item_start):
	adds the the item to the beginning
	(e_canvas_vbox_add_item_start): call the virtual method

2001-08-09  jacob berkman  <jacob@ximian.com>

	* configure.in: bumped up to 0.10.99.3

	* gal/e-text/e-completion-view.c (e_completion_view_init): init
	matches array
	(e_completion_view_destroy): free matches array
	(e_completion_view_disconnect): disconnect from the clear and
	lost_match signals
	(e_completion_view_clear_choices): fixup for ptr array
	(e_completion_view_set_cursor_row): ditto
	(e_completion_view_select): ditto
	(e_completion_view_key_press_handler): ditto
	(clear_completion_cb): handle the clear signal
	(lost_completion_cb): remove a row from the model
	(table_row_count): fixup for ptr array
	(table_value_at): ditto
	(e_completion_view_construct): connect to clear and lost
	completion signals
	(e_completion_view_set_width): ptr array fixup again

	* gal/e-text/e-completion.c (e_completion_class_init): add new
	clean / lost completion signals
	(e_completion_init): initialize the matches array
	(e_completion_destroy): free the matches array
	(e_completion_add_match): fixup for matches being a GPtrArray
	(e_completion_clear_matches): ditto
	(e_completion_clear): new function to clear the list of matches
	(e_completion_foreach_match): fixup for ptrarray
	(e_completion_restart): ditto
	(e_completion_found_match): if we are at the limit return first,
	rather than adding and then unreffing.  there very well could be
	some weird crashes this caused but it is kind of unlikely.
	(e_completion_lost_match): new function to forget about a match
	(e_completion_end_search): add a comment on why this is broken

	* gal/e-text/e-entry.c (e_entry_text_keypress): only start a
	delayed completion if our completion timeout is >= 0.  this
	provides a way for the completion starting / stopping to be
	controlled by something other than the EEntry (ie, file-sel)

2001-08-09  Jon Trowbridge  <trow@ximian.com>

	* configure.in: Bumped version up to 0.10.99.2.

	* gal/e-text/e-entry.c (e_entry_class_init): Added
	"completion_popup" signal.
	(e_entry_show_popup): Emit "completion_popup" signal if the popup
	has appeared or disappeared.
	(e_entry_enable_completion_full): Listen for "cancel_completion"
	signals from our model, and disable our completion if get one.
	(e_entry_completion_popup_is_visible): Added.  Returns TRUE if the
	completion popup is on the screen.

	* gal/e-text/e-text-model.c (e_text_model_class_init): Added
	"cancel_completion" signal.
	(e_text_model_cancel_completion): Added.  Emits
	"cancel_completion" signal.

2001-08-09  Federico Mena Quintero  <federico@ximian.com>

	* gal/e-text/e-entry.c (e_entry_destroy): Quintuple sigh.  See below.

	* gal/util/e-bit-array.c (eba_destroy): Sextuple sigh.

2001-08-08  Federico Mena Quintero  <federico@ximian.com>

	* gal/widgets/e-selection-model-array.c (esma_destroy): Chain to
	the destroy handler in the parent class!

	* gal/widgets/e-selection-model.c (esm_destroy): Likewise.  Sigh.

	* gal/widgets/e-categories.c (e_categories_destroy): Likewise.
	And make it static.  Double sigh.

	* gal/widgets/e-categories-master-list-array.c (ecmla_destroy):
	Likewise.  Triple sigh.

	* gal/widgets/e-categories-master-list-dialog-model.c
	(ecmldm_destroy): Likewise.  Quadruple sigh.

2001-08-07  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.10.99.1.

	* tests/test-shortcut-bar.c (icon_callback): Remove.
	(add_test_groups): Just add the icon from the `icon_pixbuf[]'
	right here, using the new @image arg in
	`e_shortcut_model_add_item()'.

2001-08-07  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_from_gtk_event_key): allow
	toggling between converting from the gdkfont's charset or from the
	locale charset for testing.

2001-08-05  Ettore Perazzoli  <ettore@ximian.com>

	* e-paned.h: Remove members `down', `down_position', `down_time',
	`saved_size' from `struct EPaned'.

	* gal/e-paned/e-vpaned.c (BAR_WIDTH): Removed #define.
	(CLOSED_THRESHOLD): Likewise.
	(NOMINAL_SIZE): Likewise.
	(CLICK_STOP): Likewise.
	(CLICK_TIMEOUT): Likewise.
	(e_vpaned_toggle_position): Removed.
	(e_vpaned_button_press): Remove the stupid
	click-to-toggle-minimization thing.
	(e_vpaned_button_release): Likewise.
	(e_vpaned_expand): Removed.
	(e_vpaned_collapse): Removed.
	(e_vpaned_toggle_position): Removed.

	* gal/e-paned/e-hpaned.c (BAR_WIDTH): Removed #define.
	(CLOSED_THRESHOLD): Likewise.
	(NOMINAL_SIZE): Likewise.
	(CLICK_STOP): Likewise.
	(CLICK_TIMEOUT): Likewise.
	(e_hpaned_toggle_position): Removed.
	(e_hpaned_button_press): Remove the stupid
	click-to-toggle-minimization thing.
	(e_hpaned_button_release): Likewise.
	(e_hpaned_expand): Removed.
	(e_hpaned_collapse): Removed.
	(e_hpaned_toggle_position): Removed.

2001-08-02  Radek Doulik  <rodo@ximian.com>

	* gal/e-text/e-completion-match.c (e_completion_match_set_text):
	avoid freed memory reading, when you call it like
	e_completion_match_set_text (match,
	e_completion_match_get_match_text (match), tmp);

2001-08-02  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-dialog.c (dialog_clicked):
	Make this dialog close when the close button is hit.  Fixes Ximian
	bug #5157.

	* gal/widgets/e-categories-master-list-dialog.glade: Fixed a typo
	here.  Replaced dialog-emcl with dialog-ecmld as it should be.

2001-08-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/Makefile.am (INCLUDES): Added
	-DGAL_IMAGESDIR=\"$(imagesdir)\" here.

	* gal/widgets/e-categories-master-list-array.c: Changed how this
	handles colors and icons.  It puts them in the list instead of
	using a hash table.

	* gal/widgets/e-categories-master-list.h: Added some comments to
	this file.

2001-08-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/unicode/gutf8.c (g_utf8_find_prev_char): Made
	g_utf8_find_prev_char able to return the first character of a
	string.

2001-08-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the sonumbers.

2001-07-31  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump version to 0.10.99.0.

2001-07-31  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.10.

2001-07-30  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS), configure.in: Added art subdirectory.

2001-07-25  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (e_text_set_arg): Properly ref the font we
	pass in as an ARG_FONT_E.
	(_do_tooltip): Removed some crack.  We no longer have to manually
	ref the font. The ref-counting now happens inside the set_arg
	function, as it should.
	(e_text_destroy): Set text->font to NULL after unrefing it.

2001-07-24  Wang Jian  <lark@linux.net.cn>

	* configure.in: zh_TW.Big5 added in ALL_LINGUAS

2001-07-20  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c (e_completion_view_set_width): Removed
	some debugging spew I committed by mistake.

	* gal/e-text/e-entry.c (e_entry_enable_completion_full): Change
	window policy to allow the completion window to shrink when the
	number of options decreases.

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Removed some obsolete code.

2001-07-17  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized): Remove the
	debugging message here.

2001-07-16  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (connect_model): Reset the view when we
	set the model here.  Fixes Ximian #4105.

2001-07-16  Rodrigo Moya <rodrigo@ximian.com>

	* gal/widgets/e-categories-master-list-array.c: add "Birthday" to the
	list of builtin categories

2001-07-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_event): Start editing immediately on
	a button_press that grabs the focus.  e_canvas_item_grab_focus
	doesn't seem to get us the focus event until the event loop.
	Fixes Ximian bug #1766.

2001-07-14  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added nn to ALL_LINGUAS.

2001-07-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.9.99.0.  Bumped so
	number to 9.

2001-07-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.9.

2001-07-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c, gal/widgets/e-selection-model.h
	(e_selection_model_select_as_key_press): Created this function for
	key presses that move in some way other than just to the next or
	previous row.
	(e_selection_model_key_press): Use
	e_selection_model_select_as_key_press for handling home and end
	here.

2001-07-09  Federico Mena Quintero  <federico@ximian.com>

	* gal/e-text/e-text.c (_get_position): For E_TEP_END_OF_BUFFER,
	use the length in bytes, not the length in characters --- this
	function is supposed to return byte offsets.

2001-07-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-hpaned.c, gal/e-paned/e-vpaned.c
	(e_hpaned_button_press, e_hpaned_button_release,
	e_vpaned_button_press, e_vpaned_button_release): Check for
	event->button == 1 here when doing the auto shrink.  This fixes
	bug #4189.  Also fixed parity in e_vpaned_button_press which makes
	this work for vertical paneds.

2001-07-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_destroy):
	Destroy the tooltip if we're the owner when we're destroyed.
	Also, keep a reference to the text object in case we get a signal
	on the window after the text object is destroyed.

	* gal/widgets/e-canvas.c (e_canvas_destroy): Hide the tooltip if
	there is one when the canvas is destroyed.

2001-07-05  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_command): Don't scroll to the cursor
	on grab, ungrab, noop, and copy commands.

2001-07-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number of gal to 0.8.99.8.

2001-07-05  Richard Hult  <rhult@codefactory.se>

	* gal/util/e-util.c (e_format_number): Allocate one byte for the
	terminating zero as well.

2001-07-04  Rodrigo Moya <rodrigo@ximian.com>

	* gal/widgets/e-categories-master-list-array.c:
	* gal/widgets/e-categories-master-list.c: added 2 new parameters
	to the 'append' virtual method, so that we can specify colors and
	icons per category, and added 2 new virtual methods,
	nth_icon and nth_color to get the pixmap file and color
	representation of a given category

2001-07-03  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (e_text_point): If lines is NULL here split
	into lines and just return that the point is outside this text
	object.

2001-07-02  Jeffrey Stedfast  <fejj@ximian.com>

	* configure.in: 0.8.99.7.

	* gal/Makefile.am: Don't link against e-charset-picker.lo

	* gal/widgets/Makefile.am: Don't build e-charset-picker.c or it's
	test program.

	* gal/widgets/e-charset-picker.[c,h]: Removed.

	* gal/widgets/test-charset-picker.c: Removed.

2001-06-29  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-match.c (e_completion_match_unref): Do
	nothing if passed NULL.
	(e_completion_match_compare): Move the sort_major comparison out
	to make it the primary sort key (followed by score and then
	sort_minor).
	(e_completion_match_compare_alpha): Move the sort_major comparison
	out to make it the primary sort key.


2001-06-29  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.8.99.6.

	* gal/util/e-util.c (e_free_string_slist): New.
	(e_free_object_list): New.

2001-06-27  Peter Williams  <peterw@ximian.com>

	* configure.in: Bump version number due to incompatible changes
	in ETree.

2001-06-26  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: 0.8.99.4.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-categories-master-list-combo.lo.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-categories-master-list-combo.c.
	(libwidgetsinclude_HEADERS): Added
	e-categories-master-list-combo.h.

	* gal/widgets/e-categories-master-list-array.c
	(ecmla_nth): Made this function return const char *.

	* gal/widgets/e-categories-master-list-combo.c,
	gal/widgets/e-categories-master-list-combo.h: New widget to be a
	combo box filled with a list of the categories in the master
	category list.

	* gal/widgets/e-categories-master-list.c,
	gal/widgets/e-categories-master-list.h
	(e_categories_master_list_nth): Made this function return const
	char *.

2001-06-26  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: 0.8.99.3.

	* gal/util/e-util.c
	(e_marshal_INT__POINTER_POINTER_POINTER_POINTER): New.  Sigh.
	GTK+ marshalling sucks.  GTK+ marshalling sucks.  GTK+ marshalling
	sucks.  GTK+ marshalling sucks.  GTK+ marshalling sucks.  GTK+
	marshalling sucks.  GTK+ marshalling sucks.  GTK+ marshalling
	sucks.  GTK+ marshalling sucks.  GTK+ marshalling sucks.  GTK+
	marshalling sucks.  GTK+ marshalling sucks.

2001-06-26  Fatih Demir <kabalak@gtranslator.org>

	* configure.in: Added ta to the languages list.

2001-06-21  Radek Doulik  <rodo@ximian.com>

	* configure.in (ALL_LINGUAS): added cs

2001-06-09  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Removed unused frame variable.

2001-06-08  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-view.c: Turned off alternating row
	colors in our ETable specification.

	* gal/e-text/e-completion-match.c (e_completion_match_compare_alpha): 
	Fix the sort routine to properly use the major & minor keys for
	sorting grouped elements with the same match text.  I had this all
	wrong. 

2001-06-07  jacob berkman  <jacob@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_allocate): we can ignore the
	border, as e-text takes care of that for us
	(canvas_size_request): correctly handle when borders should be
	drawn

	* gal/e-text/e-completion-view.c (e_completion_view_paint): fix a
	small bug in the drawing-2-pixel-border change to my patch

2001-06-06  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c:
	* gal/e-text/e-completion-view.c: Applied patch from Jacob Berkman
	to un-offset the completion popup and add a border around it.  I
	tweaked it slightly to make the border two pixels thick instead of
	one.  (Which I like, but might annoy everyone else.  We'll see.)
	
2001-06-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.8.99.2.

2001-06-05  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-entry.c: Small changes throughout to use
	ECompletionMatch.

	* gal/e-text/e-completion-view.c: Small changes throughout
	to use ECompletionMatch.

	* gal/e-text/e-completion.c: Small changes throughout to use
	ECompletionMatch.

	* gal/e-text/e-completion-match.h:
	* gal/e-text/e-completion-match.c: Added.  A struct to contain
	completion matches.  This lets us more easily pass around
	information between the various bits of completion machinery.

2001-06-03  Jon Trowbridge  <trow@ximian.com>

	* gal/unicode/gunicode.h: Added function prototypes for
	our new g_utf8_strfoo functions.

	* gal/unicode/gutf8.c (g_utf8_strcasecmp): Added.  A UTF-8 version
	of g_strcasecmp.
	(g_utf8_strncasecmp): Added.  A UTF-8 version of g_strncasecmp.
	(g_utf8_strdown): Added.  A UTF-8 version of g_strdown.
	(g_utf8_strup): Added.  A UTF-8 version of g_strup.
	(g_utf8_strtitle): Added.  This would be a UTF-8 version of
	g_strtitle, if g_strtitle existed.

2001-05-31  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-charset-picker.c (e_charset_picker_new): Swap
	arguments to "activate" so the right widget gets the right other
	widget set as object data on it.

2001-05-31  jacob berkman  <jacob@ximian.com>

	* gal/e-text/e-entry.c (e_entry_init): set allow_newlines on the
	etext item to false, since we are like an entry

2001-05-30  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-charset-picker.c (e_charset_picker_new, etc): Redo
	so this returns a GtkMenu rather than a GtkOptionMenu.

	* configure.in: bump to 0.8.99.1

2001-05-29  Jason Leach  <jleach@ximian.com>

	* docs/etablexml.txt: Added a documentation note to the ETable
	specification about alternating-row-colors being a valid
	attribute (code I wrote weeks ago).

2001-05-25  Duncan Mak  <duncan@ximian.com>

	* gal/e-paned/e-hpaned.c (e_hpaned_xor_line): Ported Ramiro's
	double line trick back to GAL. Did some tinkering around with
	Chris and made it draw each of the two lines twice, with
	cris-cross dashes.

	* gal/e-paned/e-vpaned.c (e_vpaned_xor_line): The same.

2001-05-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-paned/e-hpaned.c, gal/e-paned/e-vpaned.c: Fixed some
	indenting.

2001-05-25  Duncan Mak  <duncan@ximian.com>

	* gal/e-paned/e-paned.h (struct _EPaned): Added new data members
	to handle click-to-snap stuff. Ported from Ramiro's
	nautilus-horizontal-splitter.[ch] for eel and nautilus.

	* gal/e-paned/e-hpaned.c (e_hpaned_button_press): make it handle
	click-to-snap, ported from eel.
	(e_hpaned_button_release): ditto.
	(e_hpaned_toggle_position): new function to do click-to-snap, runs
	internal functions e_hpaned_expand and e_hpaned_collapse. Also from
	eel.

	* gal/e-paned/e-vpaned.c (e_vpaned_button_press): same as what i
	did to EHPaned.
	(e_vpaned_button_release): ditto.
	(e_vpaned_toggle_position): ditto.

2001-05-25  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/widgets/e-font.c: #include <stdlib.h>
	* gal/widgets/e-popup-menu.c: #include <string.h>. Kill warnings.
	
2001-05-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.8.99.0.  Bumped
	GAL_CURRENT to 8 and GAL_REVISION back to 0.

2001-05-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.8.0.1.  Bumped
	GAL_REVISION to 1.

2001-05-19  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.8.

2001-05-19  Christopher James Lahey  <clahey@ximian.com>

	* README: Added a line about contributed code license and such
	here.

2001-05-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (model_changed): Killed a warning here.
	(model_changed, items_inserted): Check if we're empty.

2001-05-18  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-charset-picker.c: New routines to create an option
	menu of character sets.

	* gal/widgets/test-charset-picker.c: and a test program

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES,
	(libwidgetsinclude_HEADERS): add e-charset-picker stuff

	* gal/Makefile.am (libgal_la_LIBADD): and here too. Love that
	wacky build system.

	* configure.in: bump to 0.7.99.6

2001-05-14  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text.c (calc_line_widths): Validate utf8 to avoid
	lock-ups.
	(_get_position): Validate utf8 to avoid lock-ups.

2001-05-14  Almer S. Tigelaar  <almer@gnome.org>

	* configure.in : Bumped version number to 0.7.99.5.
	
	* gal/gal/widgets/color-group.[ch] : Remove change signal and
	add new custom_color_add signal.
	(color_group_add_color): emit custom_color_add signal,
	remove custom flag.
	(color_group_class_init): Cope for new and removed signal.
	(color_group_init): Cope for removed notion of current color and
	new history mechanism.
	(color_group_most_recent_color): Remove.
	(color_group_oldest_color): Remove.
	(color_group_next_color): Remove.
	(color_group_previous_color): Remove.
	(color_group_set_history_size): Revise for new history mechanism.
	(color_group_fetch): Idem.
	(color_group_destroy): Idem.

	* gal/gal/widgets/color-palette.[ch]: Add by_user flag to
	change signal.
	(emit_change): Add by_user flag, remove tell_group signal and 
	simplify call to color_group_add_color.
	(color_clicked): Adjust for by_user flag.
	(cb_nocolor_clicked): Idem.
	(cust_color_set): Idem.
	(cb_group_color_change): Remove.
	(cb_group_custom_color_add): New, adjust the palette if a new
	custom color was added to the grup.
	(color_in_palette): Check if a color is in the standard palette.
	(color_palette_new_with_vals): Init default set.
	(color_palette_construct): Remove passing of set, take from palette.
	(color_palette_set_current_color): New, programatically set current
	color and remember it. Add color to custom colors if it's not in
	the palette.
	(color_palette_get_current_color): Return remembered current color.
	(marshal_NONE__POINTER_BOOL): Add extra _BOOL.
	(color_palette_finalize): Free current color.
	(color_palette_new_with_vals): Init current color.
	(color_palette_set_group): Don't connect change signal to colorgroup
	it no longer exists. Instead connect the custom_color_add signal to
	cb_group_custom_color_add.
	
	* gal/gal/widgets/widget-color-combo.[ch]: Add by_user flag to
	change signal.
        (emit_change): Add by_user flag.
	(cb_color_change): Adjust for by_user flag.
	(preview_clicked): Idem and free color using gdk_color_free.
	(color_combo_set_color): Use color_palette_set_current_color.
	(marshal_NONE__POINTER_BOOL): Define new marshaller.
	(color_combo_class_init): Use new marshaller to cope for added
	by_user boolean signal flag.
	(color_combo_set_color_internal): Change the color without
	triggering any other signals.
	(color_combo_get_color): Get current color.
	(color_combo_set_color): Set the color on the palette.
	(color_combo_construct): Idem.

2001-05-09  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.7.99.4.

2001-05-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped version number to 0.7.99.3.

2001-05-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added util/e-sorter-array.lo
	and widgets/e-reflow-model.lo.  Removed
	widgets/e-reflow-sorted.lo.

	* gal/util/Makefile.am (libutil_la_SOURCES): Added
	e-sorter-array.c.
	(libgalinclude_HEADERS): Added e-sorter-array.h.

	* gal/util/e-sorter-array.c, gal/util/e-sorter-array.h: A sorter
	for use with a single compare function to do sorting.

	* gal/util/e-util.c, gal/util/e-util.h
	(e_marshal_INT__OBJECT_POINTER): Added this marshaller.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	e-reflow-model.c.  Removed e-reflow-sorted.c.
	(libwidgetsinclude_HEADERS): Added e-reflow-sorted.h.  Removed
	e-reflow-model.h.

	* gal/widgets/e-reflow-model.c, gal/widgets/e-reflow-model.h:
	Model for EReflow.  Has a number of items and generates canvas
	items on the fly.

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Major rewrite.
	This now uses a model to generate its canvas items instead of
	having canvas items added to it.  It doesn't create the canvas
	items now until they will be shown on screen.

2001-05-07  Federico Mena Quintero  <federico@ximian.com>

	* gal/e-text/e-text.c (e_text_reflow): Request an update if just
	our line widths needed recalculation.  This fixes the bug where
	the text item would not repaint itself if the canvas lost the
	focus.

2001-05-07  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-unicode.c (e_utf8_to_gtk_string_sized):
	write what was converted to console, this function does not work
	always.
	(e_utf8_gtk_editable_get_chars),
	(e_utf8_gtk_menu_item_new_with_label): removed some unneeded checks.
	(e_xml_get_translated_utf8_string_prop_by_name): if i.e. "title"
	was found, do not convert it to utf8 -- it already is. do this
	only on "_title".

2001-05-04  Jon Trowbridge  <trow@gnu.org>

	* configure.in: Added a "pessimistic default" to the iconv check
	for cross-compiling.  (I hate seeing that warning about AC_TRY_RUN
	every time I run autoconf...)

	* gal/unicode/gutf8.c: Added macros for conditionally checking
	that function inputs are valid utf-8.
	(g_utf8_find_prev_char): Added utf8_check.
	(g_utf8_strlen): Added utf8_check.
	(g_utf8_offset_to_pointer): Added utf8_check.
	(g_utf8_pointer_to_offset): Added utf8_check.
	(g_utf8_strncpy): Added utf8_check.
	(g_utf8_strchr): Added utf8_check.
	(unicode_strrchr): Added utf8_check.

2001-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c: Made fewer calls to functions like
	split_into_lines to save time when possible.

2001-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow-sorted.c, gal/widgets/e-reflow-sorted.h:
	Made sorting happen in an idle loop when there are lots of adds.

2001-04-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-categories-master-list-dialog-model.lo and
	widgets/e-categories-master-list-dialog.lo here.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	widgets/e-categories-master-list-dialog-model.c and
	widgets/e-categories-master-list-dialog.c here.
	(libwidgetsinclude_HEADERS): Added
	widgets/e-categories-master-list-dialog-model.h and
	widgets/e-categories-master-list-dialog.h here.
	(glade_DATA): Added e-categories-master-list-dialog.glade here.

	* gal/widgets/e-categories-master-list-dialog-model.c,
	gal/widgets/e-categories-master-list-dialog-model.h: New class
	defining an ETableModel for use in
	e-categories-master-list-dialog.c.

	* gal/widgets/e-categories-master-list-dialog.c,
	gal/widgets/e-categories-master-list-dialog.glade,
	gal/widgets/e-categories-master-list-dialog.h: New dialog for
	editing the master category list.

	* gal/widgets/e-categories.c: Added code to hook up the edit
	master category list button here to launch an
	e-categories-master-list-dialog.

	* gal/widgets/gal-categories.glade: Added a button here to edit
	the master category list.

2001-04-26  Dan Winship  <danw@ximian.com>

	* configure.in: Remove check for libunicode and remove
	UNICODE_CFLAGS and UNICODE_LIBS from galConf.sh

2001-04-24  Dan Winship  <danw@ximian.com>

	* configure.in: Bump to 0.7.99.2 (e_{table,tree}_get_cell_geometry)

2001-04-23  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-unicode.c: Added #include <stdlib.h>.

2001-04-23  Dan Winship  <danw@ximian.com>

	* configure.in: bump to 0.7.99.1, add gal/unicode/Makefile. gal no
	longer internally depends on libunicode, although it will continue
	to configure against it until gtkhtml/evolution are ported too.

	* gal/Makefile.am (nonui_subdirs): add unicode
	(libgal_la_LDFLAGS): remove $(UNICODE_LIBS)
	(libgal_la_LIBADD): add unicode/*.lo

	* gal/unicode/*: unicode handling code copied nearly verbatim from
	glib 2.0, plus gal build glue.

	* gal/e-text/Makefile.am (INCLUDES): Remove UNICODE_CFLAGS
	(e_text_test_LDADD, e_entry_test_LDADD, e_text_model_test_LDADD,
	e_completion_test_LDADD): remove -lunicode, add libunicode.la

	* gal/e-text/e-text.c: Remove <unicode.h>, use gunicode functions.

	* gal/widgets/Makefile.am (libwidgets_la_LDFLAGS): remove
	UNICODE_LIBS
	(INCLUDES): remove UNICODE_CFLAGS
	(test_e_font_LDADD, test_font_loading_LDADD): add libunicode.la

	* gal/widgets/e-unicode.h: #include <gal/unicode/gunicode.h>.
	Remove some cruft.

	* gal/widgets/e-unicode.c: remove <unicode.h>, use gunicode
	functions. Add e_unicode_get_utf8 to replace some uses of
	unicode_get_utf8, which isn't quite the same as any gunicode
	function.

	* gal/widgets/e-font.c: remove <unicode.h>, use gunicode functions

	* tests/Makefile.am (INCLUDES): Remove UNICODE_CFLAGS
	(LDADD): Remove UNICODE_LIBS

2001-04-20  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-completion-test.c: Limit total matches, for better
	performance on slow machines.  It is supposed to be a test, so
	correctness of the completion operations isn't really a
	priority...

	* gal/e-text/e-completion-view.c (e_completion_view_construct):
	Set GTK_CAN_FOCUS flag.

	* gal/e-text/e-entry.c (e_entry_show_popup): Evil! Evil! Unclean!
	Unclean!  Manually check if the pointer is in the area where the
	popup is going to appear, and if it is, warp the pointer out of
	the way.  After days of fucking around, this horrible hack is the
	only way that I've been able to figure out to keep the focus from
	being taken away from the entry and ending up somewhere strange
	when the popup pops up.  (The main problem is with the case of
	focus-follows-cursor --- click-to-focus works fine.  Sawfish
	idiocincracies may also be causing problems, but I don't want to
	unjustly accuse the WM of anything, as tempting and appealing as
	that can be.)
	(key_press_cb): Proxy for forwarding the popup's key press events
	to the entry.
	(key_release_cb): Proxy for forwarding the popup's key release
	events to the entry.
	These proxies should be enough to take care of my focus problems.
	Unfortunately, they aren't, and the pointer-warping-focus-horror
	is required for reasons that I don't fully understand.

	* gal/e-text/e-text.c (_get_xy_from_position): Made
	_get_xy_from_position return a boolean.  It returns TRUE if the
	computation was successful
	(and if valid data is now in *xp and *yp), FALSE otherwise.  Make
	sure that text->lines is not NULL, and return FALSE if it is.
	(_get_position): Test that _get_xy_from_position returns TRUE
	before using the values in x and y.
	(_get_position): Test that _get_xy_from_position returns TRUE
	before using the values in x and y.
	Garbage values being returned in passed-in pointers created a race
	condition where you could hang an EText if you deleted the entire
	contents of the buffer really quickly.

2001-04-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/.cvsignore: Typo.  s/text-color/test-color/

2001-04-19  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-array.h
	(e_categories_master_list_array_from_string,
	e_categories_master_list_array_to_string): Added these functions.

2001-04-16  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/color-palette.c (color_palette_set_group) : Implement.
	(color_palette_finalize) : use it here.
	(color_palette_new_with_vals) : and here.

2001-04-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed some comments here.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	widgets/e-categories-master-list-array.lo and
	widgets/e-categories-master-list.lo.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added
	widgets/e-categories-master-list-array.c and
	widgets/e-categories-master-list.c.
	(libwidgetsinclude_HEADERS): Added
	widgets/e-categories-master-list-array.h and
	widgets/e-categories-master-list.h.

	* gal/widgets/e-categories-master-list-array.c,
	gal/widgets/e-categories-master-list-array.h,
	gal/widgets/e-categories-master-list.c,
	gal/widgets/e-categories-master-list.h: Added
	ECategoriesMasterList and a simple local implementation of it.

	* gal/widgets/e-categories.c, gal/widgets/e-categories.h:
	Privatized this.  Switched to using ECategoriesMasterList.
	(table_right_click): Added a right click menu to add and remove
	things to and from the global category list.

	* gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h: Fixed some
	comments and formatting.

	* gal/widgets/e-popup-menu.h (E_POPUP_SEPARATOR,
	E_POPUP_TERMINATOR): Added these #defines.

2001-04-15  Jody Goldberg <jgoldberg@home.com>

	* configure.in: Upped the version number to 0.7.99.0.

	* gal/widgets/Makefile.am : add test-color.

	* gal/widgets/test-color.c (main) : update.

	* gal/widgets/color-group.c (color_group_new_named) : add a context
	  pointer to manage multiple instances of the same conceptual group
	  in different instances.  eg the foregroup colour groups for windows
	  editing different documents should be different.
	(create_unique_name) : Adjust signature.
	(color_group_from_name) : ditto, Use the cg as the key, not just name.
	(color_group_destroy) : ditto.
	(color_group_new_named) : ditto.
	(cg_hash) : new function.
	(cg_cmp) : new function.
	(initialize_group_names) : used here.

	* gal/widgets/color-palette.c (color_palette_new) : Take a
	  ColorGroup directly rather than a ColorGroup name.
	(color_palette_new_with_vals) : ditto.

	* gal/widgets/widget-color-combo.c (color_table_setup) : Take a
	  ColorGroup directly rather than a ColorGroup name.
	(color_combo_construct) : Ditto.
	(color_combo_new) : Ditto.

2001-04-16  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.7.

2001-04-16  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (tooltip_event): Propagate the event after
	sending it to the base EText.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c: Made setting the rgba color work even if
	you're using the non-aa canvas (except for the a.)

2001-04-15  Federico Mena Quintero  <federico@ximian.com>

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_real_add_item): Do
	not ref both the box and the item; just connect to the item's
	"destroy" signal.
	(e_canvas_vbox_remove_item): Do not unref the box.
	(e_canvas_vbox_destroy): Disconnect from the items.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h: Added strikeout
	argument.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c (tooltip_event): Use e_canvas_hide_tooltip
	and e_canvas_popup_tooltip.  Set bold on the tooltip.

	* gal/widgets/e-canvas.c, gal/widgets/e-canvas.h: Added
	e_canvas_popup_tooltip and e_canvas_hide_tooltip.

2001-04-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h: Added "bold" argument.

2001-04-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am: Added widget/e-hsv-utils.lo.

	* gal/widgets/Makefile.am: Added e-hsv-utils.c and e-hsv-utils.h.

	* gal/widgets/e-hsv-utils.c, gal/widgets/e-hsv-utils.h: Moved from
	gal/e-table/e-table-hsv-utils.c and
	gal/e-table/e-table-hsv-utils.h.  Handle modifying hue saturation
	and value of colors.

2001-04-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c
	(e_selection_model_do_something): Always emit the cursor changed
	signal.  Even if it's changed to the same row/column.

2001-04-13  Mikael Hallendal  <micke@codefactory.se>

	* gal/Makefile.am (libgal_la_LIBADD): 
	  Added e-table/e-cell-spin-button.lo
	  Added e-table/e-cell-float.lo

	* gal/util/e-util.[ch] 
	(e_format_number_float): 
  	  Added function to format floats. Uses e_format_number for the 
	  integer part.
	(e_marshal_NONE__POINTER_INT_INT_INT): Added used by 
	  gal/e-table/e-cell-spin-button.c

2001-04-12  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.6.99.0.  Upped the
	so number to 6.

	* docs/etablexml.txt: Made some updates here.

	* tests/test-tree-1.c, tests/test-tree-3.c: Added NULL, NULL to
	the call to e_tree_memory_callbacks_new.

2001-04-10  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped version number to 0.6.

2001-04-10  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h
	(e_xml_get_translated_utf8_string_prop_by_name): New function to
	translate a string and then convert it to utf8.  Acts just like
	e_xml_get_translated_string and then calls
	e_utf_from_locale_string on it.

	* gal/util/e-xml-utils.c: Changed e_xml_get_translated_string to
	take a string with no underscore at the beginning and search for
	both that prop and the same prop with the underscore prepended.
	If it finds it without the underscore, it returns it.  If it finds
	it with the underscore, it translates.

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Reformatted
	these a bit.

2001-04-10  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-unicode.c (e_utf8_*_*_string): if (!string) return NULL;
	to avoid crashes in strlen(NULL). TODO: need g_strlen which does that.

2001-04-10  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-paned/e-paned.c (e_paned_style_set): Only do things with
	the widget windows if you are actually realized.

2001-04-07  Dan Winship  <danw@ximian.com>

	* tests/test-tree-3.c (INITIAL_SPEC): add a missing \

	* gal/e-text/e-text.c (_get_position_from_xy): Add a "break;" to
	an otherwise-empty default case to make it ANSI.

2001-04-06  Larry Ewing  <lewing@ximian.com>

	* gal/e-paned/e-paned.c (e_paned_style_set): handle style changes
	properly.
	(e_paned_class_init): use e_paned_style_set.

2001-04-05  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-popup-menu.c: Copied gnome_app_helper_gettext function
	here, and use it for translating menu names (they are passed from app as
	well as from gal in arrays with N_(), and domains differ).

2001-04-04  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added
	e_selection_model_cursor_activated.

2001-04-04  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-model-uri.c, gal/e-text/e-text.c,
	gal/e-text/e-text.h, gal/e-text/e-text-event-processor.c,
	gal/util/e-xml-utils.c, gal/widgets/e-cursors.c,
	gal/widgets/e-cursors.h: Fixed headers.  Moved the .h associated
	with each .c to the top of the list of included files.

	* gal/util/e-util.h: Removed the bonobo-xobject.h header here.

	* gal/util/e-xml-utils.c: Replaced strcasecmp with g_strcasecmp.

	* gal/widgets/e-canvas-vbox.c: Make this work even if the item is
	destroyed after the vbox.

	* gal/widgets/e-categories.c (do_parse_categories): Made this
	translate using e_utf8_from_locale string as it should.

2001-04-04  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/e-text/e-entry.c: Fix headers.
	* gal/e-text/e-table-text-model.[ch]: Ditto.
	* gal/e-text/e-table-text-model-uri.c: Ditto.
	* gal/e-text/e-text-model-uri.[ch]: Ditto.
	* gal/e-text/e-text-model.[ch]: Ditto.
	* gal/e-text/e-text.[ch]: Ditto.
	* gal/util/e-text-event-processor-emacs-like.[ch]: Ditto.
	* gal/util/e-text-event-processor.[ch]: Same.
	* gal/util/e-util.h: Ditto.
	* gal/util/e-xml-utils.[ch]: Same here.
	* gal/widgets/color-group.[ch]: Ditto.
	* gal/widgets/color-palette.[ch]: Ditto.
	* gal/widgets/e-canvas-utils.h: Ditto.
	* gal/widgets/e-canvas-vbox.[ch]: Ditto.
	* gal/widgets/e-canvas.[ch]: Ditto.
	* gal/widgets/e-categories.h: Ditto.
	* gal/widgets/e-colors.[ch]: Ditto.
	* gal/widgets/e-cursors.c: Ditto.
	* gal/widgets/e-gui-utils.c: Ditto
	* gal/widgets/e-popup-menu.[ch]: Same.
	* gal/widgets/e-reflow-sorted.c: Same.
	* gal/widgets/e-reflow.[ch]: Same.
	* gal/widgets/e-selection-model.c: Same
	* gal/widgets/e-unicode.[ch]: Same.
	* gal/widgets/gtk-combo-stack.[ch]: Same.
	* gal/widgets/widget-color-combo.[ch]: Same.
	* gal/widgets/widget-pixmap-combo.[ch]: Same.

2001-04-02  Rusty Conover  <rconover@zootweb.com>

	* gal/util/e-util.c (e_format_number): Fixed this function to
	properly format numbers that have leading zeros in sub groups.
	Case in point 3042423 should now come out as 3,042,423 not
	3,42,423.

2001-04-02  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/gal-categories.glade.h: removed.
	* gal/widgets/gal-categories.glade: do not save strings.
	* gal/widgets/Makefile.am: update.

2001-04-01  Gediminas Paulauskas <menesis@delfi.lt>

	* gal/widgets/e-categories.c: replaced glade_xml_new with
	glade_xml_new_with_domain. wrapped every category name in N_() and
	call _() where appriopriate, fixes #2029.
	* gal/widgets/e-popup-menu.c: call gettext on every menu item. Works
	only on popup menus of gal, not evolution (different domain).

2001-04-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-tree-selection-model.lo.

2001-03-31  Christopher James Lahey  <clahey@ximian.com>

	* tests/.cvsignore: .cvsignore fix.

2001-03-31  Christopher James Lahey  <clahey@ximian.com>

	* tests/Makefile.am: Added test-table-1.

	* tests/test-table-1.c: A test and example of ETable usage.

	* tests/test-tree-1.c, tests/test-tree-2.c: Added \ before line
	break in string.

2001-03-31  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-bit-array.c, gal/util/e-bit-array.h: Added
	e_bit_array_cross_and and e_bit_array_cross_or.

2001-03-31  Jon Trowbridge  <trow@ximian.com>

	* gal/util/e-util.c (g_str_compare): Handle NULL args
	semi-gracefully.

2001-03-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): Removed
	g_print here.

2001-03-30  Christopher James Lahey  <clahey@ximian.com>

	* tests/test-tree-1.c (create_tree): Test ETreeScrolled here
	instead of just ETree.

2001-03-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): This really
	should be > instead of >= since we want the scrollbar to not show
	up when the contents just fit within the window.

2001-03-29  Radek Doulik  <rodo@ximian.com>

	* configure.in: raised version to 0.5.99.13

	* gal/widgets/widget-color-combo.c (color_combo_set_color):
	exported set_color function

2001-03-26  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added util/e-bit-array.lo.

	* gal/util/Makefile.am: Added e-bit-array.c and e-bit-array.h.

	* gal/util/e-bit-array.c, gal/util/e-bit-array.h: New class
	containing the implementation of the bit array used in
	e-selection-model-array.

	* gal/widgets/e-selection-model-array.c,
	e-selection-model-array.h: Refactored the bit array implementation
	into a separate class.

	* gal/widgets/e-selection-model-simple.c: Changed how it clears
	the bit array of the ESelectionModelArray parent class.

	* gal/widgets/e-selection-model.h: Added code to make the
	declaration of EForeachFunc only get included once.

2001-03-25  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-selection-model-array.lo.

	* gal/widgets/Makefile.am: Added e-selection-model-array.c and
	e-selection-model-array.h.

	* gal/widgets/e-selection-model-array.c,
	gal/widgets/e-selection-model-array.h: New class that implements
	the details of ESelectionModel.  ESelectionModel has been
	refactored to just be a this virtual class.  ESelectionModelArray
	is the original implementation of ESelectionModel.  This is what
	most people will want to use or derive from.

	* gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h: Made the parent class of
	this be ESelectionModelArray instead of ESelectionModel.  Changed
	some function names to match this change.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Refactored most of the
	implementation of this class into ESelectionModelArray.  Now just
	a thin virtual class.

2001-03-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.5.99.12.

2001-03-22  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.5.99.11.

2001-03-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-memory-callbacks.lo and e-table/e-table-memory.lo.

	* configure.in: Bumped the version number to 0.5.99.10.

2001-03-20  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Bumped the version number to 0.5.99.9.

2001-03-20  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c (e_marshal_INT__INT_POINTER_INT_POINTER,
	e_marshal_BOOL__INT_POINTER_INT_POINTER_INT_INT_INT): Fixed the
	GTK_RETLOC calls for these marshallers.

2001-03-19  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.8.

	* Merged branch:

2001-03-18  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added another semi-private
	function (e_selection_model_change_cursor.)

2001-03-18  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added a couple of semi-private
	functions (e_selection_model_change_one_row and
	e_selection_model_confirm_row_count.)

2001-03-18  Christopher James Lahey  <clahey@ximian.com>

	* tests/test-tree-1.c, tests/test-tree-3.c: Added arguments for
	e_tree_memory_callbacks_new of get_save_id and has_save_id to
	NULL.

2001-03-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c (e_sort): Switched to just using qsort
	directly here.

2001-03-17  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_bsearch, e_sort): Added e_sort and
	e_bsearch.  They both take a closure.  e_sort guarantees a stable
	sort.  e_bsearch returns the range of matching elements including
	the position where an object would be if there are no matching
	elements.

2001-03-16  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-tree-sorted.lo.

2001-03-14  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h: Replaced the methods
	insert_row and delete_row with insert_rows and delete_rows.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Replaced the methods insert_row
	and delete_row with insert_rows and delete_rows.

2001-03-08  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am: Added e-table/e-table-utils.lo,
	e-table/e-tree-memory-callbacks.lo, e-table/e-tree-memory.lo,
	e-table/e-tree-scrolled.lo, e-table/e-tree-table-adapter.lo, and
	e-table/e-tree.lo.  Removed e-table/e-tree-simple.lo.

	* gal/util/e-util.c, gal/util/e-util.h: Added a whole bunch of
	e_marshal functions for ETree.

	* tests/test-tree-1.c, tests/test-tree-3.c: Reworked these to use
	the new tree stuff.

End of branch

2001-03-18  Miguel de Icaza  <miguel@ximian.com>

	* tests/test-tree-1.c (create_tree): Set the size of the thing to
	a decent value that lets us test stuff. 

2001-03-16  Miguel de Icaza  <miguel@ximian.com>

	* gal/e-text/e-entry.h: Expose the canvas/item that used to be
	public and that were privatized.

2001-03-18  Marius Andreiana  <mandreiana@yahoo.com>

	* configure.in: Added ro (Romanian) to ALL_LINGUAS

2001-03-16  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/widgets/widget-pixmap-combo.h: Comment out text after #endif.
	* gal/e-text/e-completion.c: Add #include <string.h> for strcmp().
	
2001-03-15  Matthew Wilson  <msw@redhat.com>

	* gal.spec.in (%files devel): the -devel package must own the
	/usr/include/gal directory and all its contents

2001-03-15  Dan Winship  <danw@ximian.com>

	* configure.in: Bump to 0.5.99.7

	* gal/widgets/e-canvas.c (e_canvas_item_grab_focus): Make this
	take an extra argument saying whether or not to grab the
	widget-level focus.

	* gal/e-text/e-text.c (e_text_event): Update arguments to
	e_canvas_item_grab_focus.

2001-03-14  Kjartan Maraas  <kmaraas@gnome.org>

	* gal/widgets/widget-color-combo.h: Comment out text after #endif.
	* gal/widgets/color-group.h: Comment out text after #endif.
	* gal/widgets/color-palette.h: Same here.
	
2001-03-13  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-reflow.c (e_reflow_point): Made this function do
	something a little closer to what it is supposed to do.

2001-03-13  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-unicode.c (e_unichar_to_utf8): Rename this from
	g_unichar_to_utf8 so that it doesn't conflict with the function of
	that name exported by gnome-print (and so that it's consistent
	with all of the other functions in the file).

2001-03-12  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-text-model.c (e_text_model_real_insert_length):
	Renamed "temp" as "new_text", to avoid confusion.
	(e_text_model_real_delete): Renamed "temp" as "new_text", to avoid
	confusion.

2001-03-11  Timur Bakeyev  <timur@gnu.org>

	* gal/util/e-xml-utils.c: Added condition and fallback to LC_CTYPE
	if system doesn't define LC_MESSAGES. Usage of LC_CTYPE to determine
	language is hackish and questionable, then... Still, gives nice re-
	sults if there is no other ways to get that value.
	
2001-03-07  Ettore Perazzoli  <ettore@ximian.com>

	* configure.in: Bump version number to 0.5.99.6 due to the new
	`e_table_get_cell_at()' call.

2001-03-06  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-entry.c (e_entry_text_keypress): Added.  This is
	part of a change of sematics that makes things much nicer for the
	user --- auto-activate the completion popup only on keypresses
	than also change the entry.
	(e_entry_proxy_changed): Record that the underlying EText has
	changed, and set up a timeout to clear the changed_since_keypress
	flag in a very short amount of time.
	(e_entry_init): Connect to the EText's "keypress" signal".
	(e_entry_destroy): If our completion_delay_tag timeout is still
	floating around out there when we are winding things down, remove
	it.

	* gal/e-text/e-text.c (e_text_class_init): Added keypress signal.
	(e_text_text_model_reposition): Removed some old cruft.
	(e_text_event): Emit our keypress signal after handling events of
	type GDK_KEY_PRESS.

2001-03-05  Jon Trowbridge  <trow@gnu.org>

	* configure.in: Set version number to 0.5.99.5

	* gal/e-text/e-entry.c (e_entry_class_init): Add a "popup" signal.
	If you have trepidations about this, see the technical argument
	below.
	(e_entry_init): Connect to the EText's popup signal.
	(e_entry_proxy_popup): Proxy emitter for popup signals from the
	EText.

	* gal/e-text/e-text.c (e_text_class_init): Added a "popup" signal.
	(e_text_event): Emit the "popup" signal on right-clicks.  Now you
	could ask yourself: "should there be a signal named 'popup' in
	EText that gets emitted on right-clicks?"  And this is a
	reasonable question, since... well, this has a funny feeling to
	it.  But the whole point of GNOME, or at least one of the original
	points of GNOME, was to impose policy in a reasonable way when it
	made sense in order to simplify the user's experience.  Convention
	dictates that popup menus are tied to right-clicks --- so rather
	than setting up some elaborate forwarding of button-press signals,
	why not just impose a little policy and set up a signal that is
	closely tied to a familiar set of semantics?  Maybe it isn't the
	best thing to do from a aesthetics-of-the-API point of view, but I
	doubt anyone could condemn it as being anything more than mostly
	harmless.

2001-03-05  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.4.

	* gal/e-text/e-text.c (e_text_draw): Fixed a crash here.

2001-03-01  Jon Trowbridge  <trow@ximian.com>

	* configure.in: Boost version number to 0.5.99.3.

	* gal/e-text/e-entry.c (e_entry_show_popup): Grab pointer when the
	popup is visible, and then hide the popup if any button press
	events occur outside of the popup.  This lets up avoid most of the
	worst "floating popup" cases that would occur if windows are
	moved, desktops changed, etc. with the mouse.  (Doing things like
	changing desktop w/ keybindings can still cause a "floating
	popup", but that is also true of Gtk's own combo box.)  Change
	popup positioning to slightly offset it from the entry, rather
	than just plopping it down directly below.
	(button_press_cb): Determine if a button press occured outside of
	the popup when the pointer was grabbed, and unbrowse accordingly.

	* gal/e-text/e-completion-view.c
	(e_completion_view_key_press_handler): Improve keystroke handling.
	Allow Tabs to pass through (after hiding the pop-up) in order to
	allow focus change requests to work properly.
	(e_completion_view_construct): Disable horizontal scrollbars.

	* gal/e-text/e-completion-test.c (main): Reworked to use signals
	instead of explicit callbacks.

	* gal/e-text/e-completion.h:
	* gal/e-text/e-completion.c: Fix the awkward mix of signals and
	explicitly-specified callbacks by taking out the explicit
	callbacks.  This approach is more gtk-ish, after all.

	
2001-03-01  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.2.

2001-03-01  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-selection-model-simple.lo.

	* gal/widgets/Makefile.am (libwidgets_la_SOURCES): Added e-selection-model-simple.c.
	(libwidgetsinclude_HEADERS): Added e-selection-model-simple.h.

	* gal/widgets/e-reflow-sorted.c, gal/widgets/e-reflow-sorted.h:
	Added a gint *position argument to e_reflow_sorted_remove_item and
	e_reflow_sorted_get_item and two gint * arguments to
	e_reflow_sorted_replace_item and e_reflow_sorted_reorder_item to
	return the positions in the array of the items removed, gotten, or
	moved.

	* gal/widgets/e-reflow.c, gal/widgets/e-reflow.h: Added a gint
	*position argument to e_reflow_sorted_add_item to return the
	positions in the array of the item added.

	* gal/widgets/e-selection-model-simple.c,
	gal/widgets/e-selection-model-simple.h: New class implementing a
	simple selection model that you add rows to and remove rows from.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: Added e_selection_model_move_row.

2001-03-01  Vladimir Vukicevic  <vladimir@ximian.com>

	* gal/Makefile.am: added e-cell-pixbuf.lo

2001-02-27  Miguel de Icaza  <miguel@ximian.com>

	* gal/widgets/e-gui-utils.c (e_popup_menu): Make this more robust:
	do not assume that the GdkEvent will be either a GdkEventButton of
	some sort or a GdkEventKey: deal gracefully with other possible
	conditions. 

2001-02-27  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-completion-view.c: Changed
	e_table_selection_model_clear to e_selection_model_clear.

	* tests/test-tree-3.c: Changed E_TABLE_CURSOR_LINE to
	E_CURSOR_LINE.

2001-02-27  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am: Added e-sorter.lo and e-selection-model.lo.

	* gal/util/Makefile.am: Added e-sorter.c and e-sorter.h.

	* gal/util/e-sorter.c, gal/util/e-sorter.h: New class.  This is a
	new simple virtual class for use with ESelectionModel.  It
	implements the same set of methods as ETableSorter but the default
	behavior is as if the sorting was a no-op.

	* gal/widgets/Makefile.am: Added e-selection-model.c and
	e-selection-model.h.

	* gal/widgets/e-selection-model.c,
	gal/widgets/e-selection-model.h: New class.  Implements all of the
	semantics of ETableSelectionModel except for the connection to the
	ETableModel.

2001-02-25  Damon Chaplin  <damon@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): added e-cell-popup.lo and
	e-cell-combo.lo

2001-02-24  Michael Meeks  <michael@ximian.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): use >=
	instead of > on hsb / vsb visibilty calculation, to determine
	whether we should queue a re-size. Possibly should use >= for
	resize, but > for visilibity ?

2001-02-23  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-sorting-utils.lo.

2001-02-21  Michael Meeks  <michael@ximian.com>

	* gal/util/e-util.h (E_MAKE_X_TYPE): implement.

2001-02-19  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed the version number to 0.5.99.1.

	* gal/Makefile.am (libgal_la_LIBADD): Change the directories for
	e-table-text-model.lo, e-text-event-processor.lo, and
	e-text-event-processor-emacs-like.lo.  Reordered the e-text
	directory to be after the e-table directory in build order.

	* gal/e-text/Makefile.am: Removed
	e-text-event-processor-emacs-like.c,
	e-text-event-processor-emacs-like.h,
	e-text-event-processor-types.h, e-text-event-processor.c, and
	e-text-event-processor.h.  Added e-table-text-model.c and
	e-table-text-model.h.

	* gal/e-text/e-table-text-model.c: Changed the signature of these
	mehtods to match the changed signature in ETextModel.

	* gal/e-text/e-text-event-processor-emacs-like.c,
	gal/e-text/e-text-event-processor-emacs-like.h,
	gal/e-text/e-text-event-processor-types.h,
	gal/e-text/e-text-event-processor.c,
	gal/e-text/e-text-event-processor.h: Moved these to gal/util/.

	* gal/e-text/e-text.c, gal/e-text/e-text.h: Changed the includes
	to match the moved files.

	* gal/util/Makefile.am: Added e-text-event-processor-emacs-like.c,
	e-text-event-processor-emacs-like.h,
	e-text-event-processor-types.h, e-text-event-processor.c, and
	e-text-event-processor.h.

	* gal/util/e-text-event-processor-emacs-like.h,
	gal/util/e-text-event-processor.h: Changed the includes to match
	the moved files.

2001-02-19  Jon Trowbridge  <trow@ximian.com>

	* gal/e-text/e-entry.c (e_entry_enable_completion_full): Added.
	Allows you to attach an ECompletion to an EEntry, and have that
	ECompletion be used for (obviously enough) completions.

	* gal/e-text/e-completion-view.h, gal/e-text/e-completion-view.c:
	Added.  ECompletionView is a widget for displaying the results of
	a completion request in a format that is appropriate for a
	drop-down window.

	* gal/e-text/e-completion.h, gal/e-text/e-completion.c: Added.
	ECompletion is a "pure virtual base class" for completion-type
	operations.  It is implemented so that completions can be either
	synchronous or asynchronous.

	* gal/e-text/e-text.c: Lots of changes to accomodate the
	ETextModel changes.  First of all, we render embedded text objects
	as being underlined.  We also cause the model to emit the
	appropriate object activation signal when an embedded object is
	double-clicked.  Also, all of the code that moves the cursor in
	response to user input has been removed.  Instead, the EText now
	listens for "reposition" events from the underlying model, and
	bases all cursor motions on those.
	(get_bounds_item_relative): Fixed bug in the handling of
	differently-anchored text.  Being differently-anchored is not a
	crime or a perversion --- it is an alternative lifestyle that we
	have to respect.

	* gal/e-text/e-text-model-uri.h, gal/e-text/e-text-model-uri.c: A
	sample ETextModel that converts URIs into embedded objects that
	get opened in the browser when you double-click them.

	* gal/e-text/e-text-model-repos.h,
	gal/e-text/e-text-model-repos.c: Added.  A group of simple
	structures & functions for handling various cursor movement rules.
	These are the sorts of things that are passed as arguments to
	ETextModel "reposition" event handlers.

	* gal/e-text/e-text-model.h, gal/e-text/e-text-model.c: Privitized
	the ETextModel struct and "methodized" all of the operations, so
	that derived classes can do arbitrarily respond to get/set
	requests in arbitrarily strange ways.  Also added the concept of
	declaring regions of the text as "embedded text objects".
	Finally, caused operations that change the text to emit a
	"reposition" signal that passes information that can be used by a
	view (like an EText) to move the cursor or selection in an
	intelligent way in response to those changes.  This means that you
	can now open two ETexts that look at the same ETextModel, and have
	the cursor in one do the right thing when you edit the other.  (As
	opposed to producing a lot of potential segfaults, as it was
	before.)


2001-02-18  Rusty Conover  <rconover@zootweb.com>

	* gal/util/e-util.c (e_format_number): Fix it so that numbers
	containing inner zeros will be formatted correctly.  For instance
	the number 5005 when formatted was coming out as 5,5.  It now
	comes out at 5,005.

2001-02-17  Christopher James Lahey  <clahey@ximian.com>

	From a patch submitted by Murray Cumming <Murray.Cumming@mybau.com>

	* gal/util/e-util.h, gal/util/e-xml-utils.h,
	gal/widgets/e-canvas-utils.h, gal/widgets/e-colors.h,
	gal/widgets/e-cursors.h, gal/widgets/e-gui-utils.h,
	gal/widgets/e-popup-menu.h, gal/widgets/e-printable.h,
	gal/widgets/gtk-combo-stack.h: Added GNOME_DECLS.

2001-02-15  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.5.99.0.  Upped the
	so number to 5.

2001-02-14  Dan Winship  <danw@ximian.com>

	* gal/util/e-util.c (e_marshal_INT__POINTER_POINTER,
	e_marshal_INT__POINTER_POINTER_POINTER_POINTER): New marshallers

2001-02-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas-vbox.c, gal/widgets/e-canvas-vbox.h: Made a
	width other than the default possible if the children have widths
	larger than the default.

2001-02-11  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-canvas-utils.c, gal/widgets/e-canvas-utils.h
	(e_canvas_item_show_area_delayed): Added this function.

2001-02-09  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-canvas.c (e_canvas_key): Since gdkevent is a
	union, casting a smaller struct to a gdkevent caused unknown
	memory to be copied around.  fix by copying to a full gdkevent
	structure before calling gdkevent.
	(e_canvas_focus_in): ditto
	(e_canvas_focus_out): ditto

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Changed the version number of gal to 0.5.

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-model-test.c (describe_model): Commented out
	this function since it's not being used.

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/gal-categories.glade, gal/widgets/e-categories.c
	(ec_set_header): Added a "header" argument to set the label at the
	top of the dialog.

2001-02-08  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text-event-processor-emacs-like.c
	(e_text_event_processor_emacs_like_event): Don't handle C-Enter.

2001-02-07  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-text.c, gal/e-text/e-text.h (e_text_realize): Store
	the whole GdkColor instead of just the pixel.

2001-02-07  Kjartan Maraas  <kmaraas@gnome.org>

	* Makefile.am: Added xml-i18n-* to EXTRA_DIST.
	* configure.in: Added AM_PROG_XML_I18N_TOOLS.
	
2001-02-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-i18n.h: Added a comment.

2001-02-06  Christopher James Lahey  <clahey@ximian.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_format_number,
	e_create_directory): Added e_format_number and e_create_directory.

2001-01-22  Akira TAGOH  <tagoh@redhat.com>
 
	* gal/widgets/e-unicode.c (e_utf8_from_gtk_event_key): Fixed operation
	event_key received the strings.

	* gal/widgets/e-font.c (e_font_from_gdk_font): Added check CJK locale.
	(translate_encoding): Added Japanese encoding table.

2001-02-06  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Check for nl_langinfo (CODESET).  Code taken from
	glib 1.3 branch.

	* gal/widgets/e-font.c, gal/widgets/e-font.h (e_locale_encoding):
	Added e_locale_encoding, e_iconv_from_locale, and
	e_iconv_to_locale.

	* gal/widgets/e-unicode.c, gal/widgets/e-unicode.h: Added
	e_utf8_from_locale_string, e_utf8_from_locale_string_sized,
	e_utf8_to_locale_string, e_utf8_to_locale_string_sized.

2001-02-06  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-font.c (e_font_to_native): okay, revert that
	brokeness from my last commit.
	(translate_encoding): don't convert to utf-16 that is definitely
	the wrong byte order, now match iso-10646-1 and do it properly.

2001-02-05  Jeffrey Stedfast  <fejj@ximian.com>

	* gal/e-text/.cvsignore: Added e-text-model-test

2001-02-05  Larry Ewing  <lewing@ximian.com>

	* gal/widgets/e-font.c (e_font_to_native): make sure the bytes of
	the multibyte font are in big endian order, this seems to be
	required by the XChar2b structure.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* tests/.cvsignore: Added test-define-views to this .cvsignore.

2001-02-05  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-entry.h: Changed draw_borders from a gboolean to a
	a guint : 1.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-font.c (e_font_to_native), gal/widgets/e-unicode.c
	(e_utf8_from_gtk_string_sized, e_utf8_to_gtk_string_sized):
	Changed the call to iconv to be char ** instead of const char **.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-xml-utils.c: Rearranged the includes here a bit.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-i18n.h: Added declarations for all the functions
	declared in gnome-i18n.h.

2001-01-30  Christopher James Lahey  <clahey@helixcode.com>

	* Reverted the latest change to EText since we're in feature freeze.

2001-02-04  Christopher James Lahey  <clahey@ximian.com>

	* configure.in: Upped the version number to 0.4.99.8

2001-02-04  Christopher James Lahey  <clahey@ximian.com>

	* gal/widgets/e-font.c, gal/widgets/e-font.h (e_font_to_gdk_font):
	Added this function.  It returns a reffed GdkFont based on the
	style passed in.

2001-02-02  Ettore Perazzoli  <ettore@ximian.com>

	* tests/Makefile.am (vfs_programs): Remove `test-tree-2'.  It
	doesn't build right now and it's breaking the daily snapshots.

2001-01-31  Radek Doulik  <rodo@ximian.com>

	* gal/e-text/e-entry.h: added gboolean draw_borders to make it
	compile, probably some forgotten commit of e-entry.h

2001-01-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_allocate, et_set_arg): Fixed
	allocation and placement of text for no bordered text.

2001-01-30  Christopher James Lahey  <clahey@ximian.com>

	* gal/e-text/e-entry.c (canvas_size_allocate, et_set_arg): Fixed
	allocation and placement of text window.

	* gal/e-text/e-text.c (e_text_draw): Fixed display of the text.

2001-01-29  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-text.c (e_text_init): Connect to the model's
	"position" signal.
	(e_text_init): Set default value for rgba_object as blue.
	(e_text_destroy): Disconnect model position signal.
	(fix_selection): Some extra sanity checking to keep the selection
	from spilling outside of the bounds of the text string as it
	expands or contracts.  Should be obsolete due to the changes to
	objectify_uris --- but I'll leave this in here for now, in an
	attempt to avoid non-\0-terminated strings, segfaults, and all of
	that fun stuff.
	(e_text_text_model_position): Move our cursor according to the
	suggestions made by our ETextModel, via the "position" signal.
	(text_width_with_objects): Check that text is not NULL.
	(text_draw_with_objects): Accept an extra GdkGC for use in drawing
	objects.
	(e_text_set_arg): Properly handle the "position" signal when
	changing models.
	(e_text_draw): Initialize the GC for drawing objects, if
	necessary.
	(_insert): Comment out the code that adjustes text->selection_*.
	The cursor is now moved by the ETextModel directly via the
	position signal, not by the view.

	* gal/e-text/e-text-model-uri.c (objectify_uris): Add more
	sophisticated uri recognition via regular expressions.
	(objectify_uris): Changed to track position changes as model->text
	expands and contracts along with the objects.  Block the
	objectification of any chunks of text that straddle our current
	position.
	(e_text_model_uri_set_text): Added position info to objectify_uris
	call.
	(e_text_model_uri_insert): Added position info to objectify_uris
	call.
	(e_text_model_uri_insert_length): Added position info to
	objectify_uris call.
	(e_text_model_uri_delete): Added position info to objectify_uris
	call.

	* gal/e-text/e-text-model.c (e_text_model_class_init): Added a
	"position" signal that allows the ETextModel to send cursor
	positioning information back to any view.  We need this for text
	with objects, where the text string can grow and shrink in ways
	that the view doesn't expect.
	(e_text_model_real_insert): Added sanity checking of args and a
	position emission.
	(e_text_model_real_insert_length): Added sanity checking of args
	and a position emission.
	(e_text_model_real_delete): Added sanity checking of args.
	(e_text_model_suggest_position): A wrapper around the "position"
	signal emitter.

2001-01-29  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-cell-number.lo

2001-01-29  Not Zed  <NotZed@Ximian.com>

	* gal/widgets/e-unicode.c (e_utf8_xml1_decode): Always include +1
	for the size.  0*2 == 0, so malloc returns NULL, which is not what
	we want.

2001-01-28  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/util/e-i18n.h: Don't #define __GNOME_I18N_H__ if it's already
	defined.

	*gal/util/e-xml-utils.c:
	Functions moved from Gnumeric:
	e_xml_get_child_by_name_by_lang_list,
	e_xml_get_child_by_name_by_lang_list_with_score (static),
	e_xml_get_child_by_name_no_lang.
	New functions (for completness):
	e_xml_get_integer_prop_by_name_with_default,
	e_xml_get_string_prop_by_name_with_default,
	e_xml_get_uint_prop_by_name,
	e_xml_get_uint_prop_by_name_with_default,
	e_xml_set_uint_prop_by_name.
	Now every e_xml_get_*_prop_by_name function just calls
	e_xml_get_*_prop_by_name_with_default with some sensible default
	value.
	Formatting fixes here and there.

2001-01-27  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-categories.c (table_key_press): Made pressing the
	space bar toggle a given row.

2001-01-27  Ettore Perazzoli  <ettore@ximian.com>

	* gal/widgets/e-categories.c (e_categories_construct): New.
	(e_categories_new): Call it.  Made const-safe.
	(ec_set_categories): Made const-safe.

2001-01-26  Jon Trowbridge  <trow@gnu.org>

	* gal/e-text/e-text-model-test.c: Added; a new test program that
	demonstrates objects in ETexts.
	
	* gal/e-text/e-text-model-uri.c: Added; a text model that converts
	URIs in the text into objects that are passed off to the GNOME URI
	handler when activated.  This is actually still extremely broken;
	I got it just working enough to test out my EText changes.

	* gal/e-text/e-text.c: A whole lot of changes, designed to make
	ETextModel objects render properly.  The basic idea of the changes
	is pretty simple, though.
	(text_width_with_objects): First of all, this function is an
	alternative to e_font_utf8_text_width that takes into the account
	the embedded \1s in the text string and properly accounts for the
	width of the object strings.
	(unicode_strlen_with_objects): Next, this function finds the
	proper strlen of a string, expanding the \1s.
	(text_draw_with_objects): Finally, this is just a replacement for
	e_font_draw_utf8_text that does the right thing for objects.  I've
	gone through all of e-text.c and replace calls by those original
	functions with my new object-enabled alternatives.
	(split_into_lines): Some tweaking to get line breaking to work
	properly.  Made \1 into a "break character", so that we can break
	lines between multiple adjacent objects.  (Which seemed like the
	right thing to do, but there may be cases where that is
	undesireable.)
	(_get_position_from_xy): Fixed to properly handle embedded
	objects, and to get the right selection semantics for objects.
	(Or at least semantics that feel right to me.)  Also fixed a bug
	that caused selection, etc. to not work properly if the text was
	anchored anywhere other than with GTK_ANCHOR_NORTH*.
	(_get_position): Hacked to cause objects to activate when they are
	double-clicked.  There is probably a better way to do this.
	
	* gal/e-text/e-text-model.c (e_text_model_real_object_count):
	Provide a default implementation of an object counter.  Derived
	classes might want to override this for efficiency reasons.
	(e_text_model_strdup_expanded_text): Added.  Allocates and returns
	a string contains the model's text with the objects "expanded"
	within.

	* gal/e-text/e-text-model.h: Added obj_count, get_nth_obj, and
	activate_nth_obj virtual methods to ETextModelClass.

2001-01-25  Federico Mena Quintero  <federico@ximian.com>

	* gal/widgets/e-categories.c (e_categories_init): Give the initial
	focus to the text entry, and do gnome_dialog_editable_enters() on
	it.  Make the OK button the default button.

2001-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-canvas-utils.c (e_canvas_item_show_area): Clamp
	the value we set here.
	(compute_offset): Switched to ints here.

2001-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-canvas-utils.c (e_canvas_item_show_area): Made
	this function put some space around the area shown.

2001-01-25  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the internal version number of gal to
	0.4.99.7.

	* gal/widgets/e-font.c: Added a global variable e_font_verbose and
	only print debugging messages if it gets set to non-zero.

2001-01-24  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the internal version number of gal to
	0.4.99.6.

2001-01-22  JP Rosevear  <jpr@ximian.com>

	* gal/widgets/e-categories.c (e_categories_set_arg): use new internal 
	function to set
	(ec_set_categories): set the list of categories
	(e_categories_new): use ec_set_categories, fixes crash

2001-01-22  Pablo Saratxaga <pablo@mandrakesoft.com>

	* configure.in: put ALL_LINGUAS list in sync with the files in po/

2001-01-22  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-define-views.c (main): Switched this to use the users
	home directory instead of mine.

2001-01-22  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-define-views.c (dialog_clicked): Deal with clicking
	OK or Cancel on the dialog.  Load the view collection on startup.

2001-01-21  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Added function
	e_xml_get_bool_prop_by_name_with_default.

2001-01-21  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c (INITIAL_SPEC): Changed this to test
	cursor-mode="line" selection-mode="browse" and draw-focus="true".

2001-01-20  Fatih Demir	<kabalak@gmx.net>

	* configure.in: Added tr to ALL_LINGUAS.

2001-01-19  Dan Winship  <danw@ximian.com>

	* gal/widgets/e-popup-menu.c (e_popup_menu_run):
	s/GdkEventButton/GdkEvent/

	* gal/widgets/e-gui-utils.c (e_popup_menu): ditto, and deal with
	key events as well

2001-01-19  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added sk to ALL_LINGUAS.

2001-01-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c: Fixed text misplacement.

2001-01-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text.c (_do_tooltip): Make tooltip appear properly
	even if anchor is set.

2001-01-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c (canvas_size_allocate, et_set_arg): Center
	text vertically.

2001-01-17  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c (e_entry_init): Made EEntry be shrinkable.

2001-01-17  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c, gal/e-text/e-entry.h (et_set_arg): Make
	justification work properly for entries.  Documented.

2001-01-17  Christopher James Lahey  <clahey@helixcode.com>

	* tests/Makefile.am: Added test-define-views.

	* tests/test-define-views.c: New test for the gal/gal/menus/
	stuff.

2001-01-16  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-paned/e-vpaned.c (e_vpaned_draw), gal/e-paned/e-hpaned.c
	(e_hpaned_draw): Removed an unused variable.

2001-01-17  Dave Camp  <dave@ximian.com>

	* po/POTFILES.in: Remove gal/e-text/e-entry-test.c and 
	gal/widgets/test-color.c, as these are not distributed with the 
	tarball.

2001-01-17  Miguel de Icaza  <miguel@gnu.org>

	* po/POTFILES.in: update.

	* gal/widgets/color-palette.c: use e-i18n.h

	* gal/util/e-i18n.h: Avoid inclussion of the GNOME i18n file as we
	provide our own.

2001-01-17  Dave Camp  <dave@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Removed e-table/e-table-config-field.lo

2001-01-16  Jason Leach  <jasonleach@usa.net>

	* gal/e-text/e-text.c (e_text_set_arg): Emit a "changed" signal to
	the EText after we gtk_object_set a "model" arg and fill the EText
	with text from the model, which obviously changes the text.

2001-01-15  Christopher James Lahey  <clahey@ximian.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added e-table/e-cell-date.lo
	and e-table/e-cell-size.lo.

	* configure.in: Upped the internal version number of gal to
	0.4.99.4.

2001-01-15  Miguel de Icaza  <miguel@gnu.org>

	* docs/tmpl/e-table-specification.sgml: Write documentation.

2001-01-13  Ettore Perazzoli  <ettore@ximian.com>

	* gal/e-paned/e-vpaned.c (e_vpaned_draw): Don't draw the handle
	with `gtk_paint_handle()' as it looks butt-ugly.
	* gal/e-paned/e-hpaned.c (e_hpaned_draw): Likewise.

2001-01-12  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the internal version number of gal to
	0.4.99.3.

2001-01-12  Miguel de Icaza  <miguel@ximian.com>

	* docs/tmpl/e-table-sort-info.sgml: Document the object.

2001-01-11  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c (save_state):
	(create_tree): Make these save and load the header state so that
	we can test header state saving.

2001-01-11  Christopher James Lahey  <clahey@helixcode.com>

	* docs/etablexml.txt: Document the new selection-mode attribute of
	ETableSpecification.

2001-01-11  Lauris Kaplinski  <lauris@ximian.com>

	* gal/widget/e-font.c (e_font_from_gdk_font): Return NULL, if GdkFont == NULL
	Some checks for 'should be impossible' situations - but they probably can
	occur for screwed up X/font configurations
	(e_font_from_gdk_fontset): Ditto

2001-01-09  JP Rosevear  <jpr@helixcode.com>

	* gal/widgets/Makefile.am: dist the glade file

2001-01-06  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-unicode.c (e_utf8_xml1_decode): Removed an unused
	variable.
	(e_utf8_from_gtk_string_sized): Made ib const here.

2001-01-06  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): Print out bold font
	full name, not just weight
	(e_font_from_gdk_fontset): Ditto

2001-01-06  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): Added E_XF_SET_WIDTH
	to font query
	(e_font_from_gdk_fontset): Ditto

2001-01-05  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/test-font-loading.c: New test program

	* gal/widgets/Makefile.am: Added test-font-loading

	* gal/widgets/e-font.c (e_font_from_gdk_name): Try to figure out,
	whether we want to create font or fontset
	(e_font_from_gdk_font): Splitted fontset variant into separate
	method, so CJK/Europaean people will not break each other code
	(e_font_from_gdk_fontset): New function

	* gal/widgets/e-unicode.c (e_utf8_from_gtk_string_sized): If iconv == -1
	assumes either iso-8859-1 or iso-10646 encoding
	(e_utf8_to_gtk_string_sized): Ditto

2001-01-04  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text.c (e_text_draw): Fixed the border bug.
	Borders draw properly now.

2001-01-04  JP Rosevear  <jpr@helixcode.com>

	* configure.in: bump version

	* gal/widgets/gal-categories.glade: Glade file for category editor

	* gal/widgets/e-categories.[hc]: A category editor dialog taken 
	and renamed from evolution

	* gal/widgets/Makefile.am: Build new files and install
	glade stuff

2001-01-02  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widget/e-unicode.* (e_utf8_xml1_decode): New function
	(e_utf8_xml1_encode): ditto

2001-01-02  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the version number.

2001-01-02  Ali Abdin  <aliabdin@aucegypt.edu>

	* gal/configure.in: Install API docs in the 'gal' directory, not in
	  bonobo's

2000-12-29  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-entry.c: Add support here for "cursor_pos".
	(et_get_arg): Handle ARG_CURSOR_POS.
	(et_set_arg): ditto.

	* gal/e-text/e-text.c: Add new argument: "cursor_pos". 
	(e_text_get_arg): Handle ARG_CURSOR_POS.
	(e_text_set_arg): Handle ARG_CURSOR_POS.
	(e_text_class_init): Add.

2000-12-27  Miguel de Icaza  <miguel@helixcode.com>

	* tests/Makefile.am (INCLUDES): Add test-shortcut-bar to the
	makefile. 

2000-12-27  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Added gal/shortcut-bar/Makefile.

	* tests/Makefile.am: Added test-shortcut-bar.

	* tests/test-shortcut-bar.c: Moved this from gal/shortcut-bar.

2000-12-26  Christopher James Lahey  <clahey@helixcode.com>

	* docs/etablexml.txt: New file documenting the ETableSpecification
	xml format.

2000-12-26  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c: Added a "draw_background" argument.  Set
	the default for the "draw_background" argument to the contained
	EText to TRUE.

	* gal/e-text/e-text.c: Changed the default for the
	"draw_background" argument to FALSE.

2000-12-26  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-entry.c: Connect to the "changed" and "activate"
	signals on the EText to the proxy routines.
	(e_entry_proxy_changed): Proxy this to our signals.
	(e_entry_proxy_activate): ditto.

2000-12-25  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-text.c (e_text_init): Always have some text.  Fixes crash.

	* gal/widgets/e-reflow.c (set_empty): Set draw_background to FALSE.

	* gal/e-text/e-text.c (e_text_draw): Made the code CanvasItem
	correct: the code should not draw at arbitrary positions in the
	GdkWindow, it should instead draw from item->x1, item->y1 to
	item->y1, item->y2 (Chris, we need to talk about this, I think my
	current fix is passable, but might not be fully correct.
	Specially the interpretation of the width, height arguments).
	(e_text_class_init): Fix name.
	(e_text_set_arg): Use correct name.

2000-12-24  Miguel de Icaza  <miguel@helixcode.com>

	* gal/e-text/e-text.c (e_text_set_arg): Handle draw background.
	(e_text_draw): Support both border drawing and background drawing.

	* gal/e-text/e-entry.c (et_get_arg, et_set_arg): Reduce code size by casting
	once.
	(et_set_arg, et_get_arg): Add ARG_DRAW_BORDERS handling.

2000-12-23  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Added
	e_xml_get_double_prop_by_name_with_default.

2000-12-21  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/gtk-combo-box.c (gtk_combo_box_set_tearable): New
	API call.

2000-12-20  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/gtk-combo-box.h: Export gtk_combo_box_get_pos. 

	* gal/widgets/gtk-combo-box.c: Add two new signals:
	pre_pop_down and post_pop_hide.
	(gtk_combo_box_popup_hide_unconditional): Emit signal when done.
	(gtk_combo_box_popup_display): Emit signal

2000-12-19  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c, gal/util/e-util.h (e_strdup_strip): Made the
	parameter type of e_strdup_string a const.  Made it not call
	isspace on signed characters.  Made the return type of
	e_strstrcase non const again.

2000-12-19  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated so number to 4 since an interface has
	changed.  Updated version number to 0.4.99.0 for internal
	versioning number.

2000-12-19  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/gtk-combo-text.c (gtk_combo_text_construct): Move
	initialization code to construct instead of leaving it on _new.

	* gal/widgets/gtk-combo-text.h, gal/widgets/gtk-combo-text.c
	(gtk_combo_text_construct): expose.

	* gal/widgets/widget-pixmap-combo.h: ditto.

	* gal/widgets/widget-color-combo.h: Fix parent class.  It should
	have been GtkComboBoxClass, not GnomeCanvasClass.

2000-12-15  Dan Winship  <danw@helixcode.com>

	* configure.in: FreeBSD ships two iconv library ports, and they
	mangle the one we support. So support the other one too. Also,
	throw in some AC_CACHE fun to make re-configures faster.

2000-12-15  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the version number to 0.4.1.  Bumped the
	GAL_REVISION to 1.

2000-12-14  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_event): Don't allow
	the arrow keys to let you scroll off of the table. 

	* NEWS: Changed the NEWS format.

2000-12-14  Christopher James Lahey  <clahey@helixcode.com>

	* README: Updated README a bit.

2000-12-14  Christopher James Lahey  <clahey@helixcode.com>

	* NEWS: Updated NEWS a bit.

	* configure.in: Updated version number to 0.4.

2000-12-13  Christopher James Lahey  <clahey@helixcode.com>

	* docs/.cvsignore: Added .cvsignore.

2000-12-13  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text.c (_do_tooltip): Changed the color from yellow
	to light gray.

	* gal/widgets/e-canvas-vbox.c (e_canvas_vbox_event): Made it so
	that e-canvas-vbox doesn't eat all the keyboard events.  This
	means widget navigation keys work properly.

2000-12-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c, gal/util/e-util.h: Fixed a warning by making
	e_strstrcase return a const gchar.

2000-12-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-font.c (e_iconv_to_gdk_font): Fixed a warning.

2000-12-09  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped so number to 3.0.0.  Upped version number to
	internal cvs version number.

2000-12-11  Dan Winship  <danw@helixcode.com>

	* gal/widgets/e-scroll-frame.c (adjustment_changed): Add some
	checks so that setting the vadjustment before the hadjustment
	won't cause a warning.

2000-12-08  JP Rosevear  <jpr@helixcode.com>

	* gal/widgets/e-canvas.c (e_canvas_destroy): Remove my lame "fix"

2000-12-08  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/widget-color-combo.h: Adjust as well.

	* gal/widgets/color-palette.c (color_palette_new): Make API
	parseable by gtk-doc.

2000-12-07  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Removed bonobox from the gal libs and configure
	lines.

2000-12-07  Dan Winship  <danw@helixcode.com>

	* configure.in: Add --with-libiconv, set ICONV_CFLAGS as well as
	ICONV_LIBS, and put it in galConf.sh

	* gal/widgets/Makefile.am (INCLUDES): Add $(ICONV_CFLAGS)

2000-12-07  JP Rosevear  <jpr@helixcode.com>

	* gal/widgets/e-canvas.c (e_canvas_destroy): Destroy the gdkIC
	if we have one

2000-12-07  Dan Winship  <danw@helixcode.com>

	* gal/Makefile.am (libgal_la_LDFLAGS): Add $(ICONV_LIBS) and
	$(UNICODE_LIBS) to make auto-dependencying stuff work

2000-12-06  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (e_font_get_name): new function

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Dropped the so number back down to its proper
	value.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Increased the version number to 0.3.  Increased
	the so number.

	* gal/util/e-util.h: Removed unnecessary #define e_str_make_safe
	e_filename_make_safe.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c, gal/widgets/e-font.c: Fixed some warnings.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Increased the version number.

	* gal/Makefile.am (libgal_la_LIBADD): Added
	menus/gal-view-etable.lo, menus/gal-view-factory-etable.lo,
	menus/gal-view-factory.lo, and menus/gal-view-collection.lo.

2000-12-05  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/util/e-cache.*: New files, implementing general LRU cache

	* gal/widgets/e-font.c (e_font_from-gdk-font): Use cache, removed
	foundry specification from fon loading
	(e_gdk_font_encoding): Use cache

2000-12-04  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_print_gdk_font_name): New function
	(e_font_from_gdk_font): Added font name printout (if VERBOSE)

2000-12-04  Jeffrey Stedfast  <fejj@helixcode.com>

	* gal/util/e-util.h (e_str_make_safe): macro that calls
	e_filename_make_safe

	* gal/util/e-util.c (e_filename_make_safe): Renamed from
	e_str_make_safe
	(e_strstrcase): go back to returning gchar * rather than const.

2000-11-30  Jeffrey Stedfast  <fejj@helixcode.com>

	* configure.in: Bump the version to 0.2.99.4

	* gal/util/e-util.c (e_strstrcase): This should return a const
	gchar *.
	(e_str_make_safe): New convenience function to replace risky chars
	with an underscore.

2000-11-29  Dan Winship  <danw@helixcode.com>

	Move away from unicode_iconv*. We still need libunicode for utf8
	strings functions, but that will go away eventually.

	* configure.in: Add a check for libiconv, which is required if
	your system doesn't have iconv in libc, or has glibc 2.1.2. Bump
	the gal version number to 0.2.99.3

	* tests/Makefile.am (LDADD): add ICONV_LIBS

	* gal/widgets/Makefile.am (libwidgets_la_LDFLAGS): Add ICONV_LIBS

	* gal/widgets/e-unicode.c: Use iconv rather than libunicode for
	iconv()ing.
	(e_unicode_init): No longer needed

	* gal/widgets/e-font.c: Use iconv rather than libunicode for
	iconv()ing.
	(e_iconv_{from,to}_gdk_font): renamed from e_uiconv...

	* gal/widgets/test-e-font.c: No longer need to e_unicode_init().

2000-11-25  Federico Mena Quintero  <federico@helixcode.com>

	* gal/Makefile.am (libgal_la_LIBADD): Added
	e-table/e-table-header-utils.lo.

2000-11-24  Jon K Hellan  <hellan@acm.org>

	* configure.in: Remove remaining bonobo dependencies.

2000-11-22  Zbigniew Chyla  <cyba@gnome.pl>

	* gal/widgets/widget-pixmap-combo.c: Used gettext() instead of _()
	macro. We should get string from an application's (eg. Gnumeric's)
	textdomain not from the gal's one here.

2000-11-21  Morten Welinder  <terra@diku.dk>

	* gal/widgets/gtk-combo-stack.c (gtk_combo_stack_clear_selection):
 	Plug leak.
	(list_select_cb): Plug leak.
	(gtk_combo_stack_remove_top): Plug leak.

2000-11-20  Morten Welinder  <terra@diku.dk>

	* gal/widgets/gtk-combo-stack.c (gtk_combo_stack_truncate): New
 	function.

2000-11-18  Miguel de Icaza  <miguel@helixcode.com>

	* configure.in (gnomelocaledir): Removed test for Bonobo here.

	* gal/menus/gal-view-menus.c: Removed this file, and moved into
	Evolution. 

2000-11-10  Miguel de Icaza  <miguel@helixcode.com>

	* gal/widgets/widget-color-combo.c (color_combo_construct):
	Reindented. 

2000-11-14  Jody Goldberg <jgoldberg@home.com>

	* configure.in : Fix typo.

2000-11-13  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated version number.

	* gal/e-table/e-tree-model.c, gal/e-table/e-tree-model.h: Added
	freeze and thaw functions.

	* gal/menus/gal-define-views-dialog.c: Fixed some warnings.

2000-11-13  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): identify fonts,
	which calcs width of "&nbsp;" equal 0
	(set_nbsp_zero_width_flag): helper function, indentifies those bad
	fonts
	(replace_nbsp_with_spaces): replaces &nbsp;'s with spaces
	(e_font_to_native): use replace_nbsp_with_spaces

2000-11-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/Makefile.am:  Added a bunch of .lo s from the menus
	directory.

2000-11-09  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Changed the gal version number and the gal so
	number.  Added check for bonobo.

	* gal/Makefile.am: Added gal-view-menus.lo.

	* gal/widgets/e-unicode.c: Removed some unused variables.

2000-11-08  Matt Bissiri  <bissiri@eecs.umich.edu>

	* .cvsignore: add gal.spec

2000-11-08  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-unicode.* (e_utf8_strstrcasedecomp): New function
	doing canonical-decomposing, combination marks ignoring, case
	insensitive search

2000-11-07  Jody Goldberg <jgoldberg@home.com>
	For : ÉRDI Gergõ <cactus@cactus.rulez.org>

	* gal/widgets/gtk-combo-stack.[ch] : Improve selection display.

2000-11-07  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): add ,* if we are
	calling gdk_fontset_load

2000-11-06  Julian Missig  <julian@linuxpower.org>

	* gal/widgets/e-unicode.h: END_GNOME_DECLS, not BEGIN

2000-11-06  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Place AM_GNOME_GETTEXT after ALL_LINGUAS to
	make it work.
	
2000-11-06  Jeffrey Stedfast  <fejj@helixcode.com>

	* gal/widgets/e-popup-menu.h: Add a submenu field to struct
	EPopupMenu.

	* gal/widgets/e-popup-menu.c (e_popup_menu_create): If the menu
	item has a submenu field, create the submenu and attach it.

	* configure.in: Bumped the micro-version because of some changes
	to e-popup-menu's structure.

2000-11-06  Christopher James Lahey  <clahey@helixcode.com>

	* acconfig.h, configure.in: Set GNOME_EXPLICIT_TRANSLATION_DOMAIN.

2000-11-05  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Added gal/menus/Makefile.

	* gal/Makefile.am: Added menus to subdirs and
	gal-define-views-dialog.lo to libgal_la_LIBADD.

2000-11-05  Jason Leach  <leach@wam.umd.edu>

	* configure.in: fixed the libxml depdency checking, there was a
	typo ("xml-config --libs print") and it was only checking for
	greater than 1.8.5, but gal actually requires at least libxml
	1.8.8 to compile.  Fixes bug #29517.

2000-11-03  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/widget-color-combo.c (emit_change) : Do not free the
	  colour here.
	 (preview_clicked) : free the result of color_palette_get_current_color

2000-11-02  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated gal version number.

2000-11-01  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_gdk_font_encoding): translate the
	encoding even in the fontset case.
	(translate_encoding): add charset mappings from iso_xxxxx-x to
	iso-xxxxx-x.  this fixes freebsd.

2000-11-01  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): better twobyte
	check, and get rid of all the BROKEN_FONTSET_STUFF.

	* gal/widgets/test-e-font.c (main): call e_unicode_init.

2000-11-01  Matt Bissiri  <bissiri@eecs.umich.edu>

	* gal/widgets/widget-color-combo.[ch] : Make this header file
	"stand alone", so that it can be included without including
	another file (gtk-combo-box.h) first.  This is needed, otherwise the
	latest /cvs/gtkhtml/components/html-editor/body.c does not compile.

2000-10-31  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/widget-color-combo.c (emit_change) : Take the colour to
	  emit as an argument.
	(cb_color_change) : Pass the supplied colour.  This fixes the use of
	  the no colour button.  Gnumeric was breaking when people selected
	  the 'clear' background because the combo was sending the current
	  colour to gnumeric rather than NULL.
	(preview_clicked) : Use the current colour.

	* gal/widgets/color-palette.c (emit_change) : color_group_add_color
	* also emits a CHANGED signal.  Do not emit duplicates.

2000-10-31  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): add lightfont->type
	== GDK_FONT_FONT to the conditional, since xfs isn't really a
	XFontStruct unless that's true.  also, #define
	BROKEN_FONTSET_STUFF since although it's broken, we seem to crash
	if it's undef'ed.  the conditional change should fix the most
	blatant problem.

2000-10-31  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/widget-color-combo.[ch] : Make the class public.
	* gal/widgets/color-group.[ch] : Ditto.
	* gal/widgets/color-palette.[ch] : Ditto.

	* gal/widgets/gtk-combo-stack.h : Add conditional extern "C".
	  Do not use GNOME_DECL because these are slated for inclusion in Gtk
	  rather than gnome.
	* gal/widgets/gtk-combo-text.h : Ditto.

2000-10-31  Szabolcs Ban  <shooby@gnome.hu>

	* configure.in: Added hu to ALL_LINGUAS.

2000-10-31  Gediminas Paulauskas  <menesis@delfi.lt>

	* configure.in: added lt to ALL_LINGUAS.
	
2000-10-30  Chris Toshok  <toshok@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): disable new fontset
	code (which has problems) unless BROKEN_FONTSET_STUFF is defined.
	(locale_charset_to_encoding): same.

2000-10-27  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Upped the version number to a cvs version number.

2000-10-27  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c,
	gal/e-text/e-text-event-processor-emacs-like.c,
	gal/e-text/e-text-event-processor-emacs-like.h,
	gal/e-text/e-text-event-processor.c,
	gal/e-text/e-text-event-processor.h, gal/e-text/e-text.c: Added an
	"allow_newlines" argument.

2000-10-26  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in: Added pl to ALL_LINGUAS.

2000-10-26  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/test-e-font.*: Dumb test program

2000-10-25  Lauris Kaplinski  <lauris2helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_font): Use fontsets,
	if we do not have unicode font
	(e_gdk_font_encoding): Use locale encoding for fontsets

2000-10-25  Akira Tagoh  <tagoh@redhat.com>

	* gal/widgets/e-font.c (get_locale_charset): new function
		
2000-10-25  Dan Winship  <danw@helixcode.com>

	* gal/util/e-util.c (e_marshal_NONE__POINTER_POINTER_INT): Add
	another marshalling function.

2000-10-24  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/widget-color-combo.c (color_combo_construct): if
	icon is NULL allow create combo button without icon and with large
	color rectangle
	(color_combo_new): removed assert icon != NULL

2000-10-23  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated the version number to 0.2.1 and the
	libtool version numbers as appropriate.

2000-10-22  John Gotts  <jgotts@linuxsavvy.com>

	* Makefile.am: Minor Makefile.am screw up fixed.  Sorry guys.

2000-10-20  John Gotts  <jgotts@linuxsavvy.com>

	* Makefile.am, configure.in, gal.spec.in: Created a new spec file.

2000-10-20  Christophe Merlet  <christophe@merlet.net>

	* configure.in: Added French (fr) in $ALL_LINGUAS.

2000-10-19  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Updated the version number to 0.2 and the libtool
	version numbers as appropriate.

2000-10-19  Dan Winship  <danw@helixcode.com>

	* gal/e-text/e-text.c (e_text_destroy): Remove dbl_timeout and
	tpl_timeout.

2000-10-19  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text-event-processor-emacs-like.c: Made the number
	keys on the number pad work in ETexts and ECellTexts.

2000-10-18  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-entry.c: Made EEntry accept focus properly.

2000-10-15  Ettore Perazzoli  <ettore@helixcode.com>

	* gal/widgets/e-hscrollbar.c (e_hscrollbar_new): Use
	`gtk_object_new()' instead of `gtk_type_new()' and then
	`gtk_object_set()', as the latter doesn't set the CONSTRUCTED
	flag.
	* gal/widgets/e-vscrollbar.c (e_vscrollbar_new): Likewise.

2000-10-15  Ettore Perazzoli  <ettore@helixcode.com>

	* gal/widgets/e-scroll-frame.c (e_scroll_frame_set_vadjustment):
	Use an EVScrollbar instead of a GtkVScrollbar.
	(e_scroll_frame_set_hadjustment): Use an EHScrollbar instead of a
	GtkHScrollbar.

	* gal/widgets/e-vscrollbar.h: New.
	* gal/widgets/e-vscrollbar.c: New.
	* gal/widgets/e-hscrollbar.h: New.
	* gal/widgets/e-hscrollbar.c: New.

2000-10-13  Lauris Kaplinski  <lauris@helixcode.com>

	* configure.in: Use $UNICODE_CFLAGS and $UNICODE_LIBS instead
	of gnome-config

2000-10-13  Christopher James Lahey  <clahey@helixcode.com>

	* gal/Makefile.am: Added e-table-config-field.lo.

	* tests/test-tree-2.c: Changed this to use cursor-mode in the xml
	instead of the no longer existing gtk argument.

2000-10-12  Iain Holmes  <iain@helixcode.com>

	* gal/e-text/e-text.c (e_text_(set|get)_arg): Add "font_e"
	argument. Make the "font_gdk" argument write-only.
	(e_text_realize): Ref the style font.
	(_do_tooltip): Ref the font before creating the tooltip and
	delete the blank lines in the middle.
	
2000-10-12  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-gui-utils.c, gal/widgets/e-gui-utils.h: Added
	e_container_focus_nth_entry.

2000-10-11  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c, tests/test-tree-2.c, tests/test-tree-3.c:
	Changed these to use the default cells.

2000-10-11  Christopher James Lahey  <clahey@helixcode.com>

	* tests/test-tree-1.c, tests/test-tree-2.c, tests/test-tree-3.c:
	Changed these to match the new ETable system.

	* gal/Makefile.am: Added e-table-column-specification.lo,
	e-table-extras.lo, e-table-specification.lo, and e-table-state.lo.

2000-10-11  Christopher James Lahey  <clahey@helixcode.com>

	* gal/util/e-util.c: Included a missing #include.

	* gal/util/e-xml-utils.c, gal/util/e-xml-utils.h: Added
	e_xml_get_bool_prop_by_name, e_xml_set_bool_prop_by_name, and
	e_xml_get_translated_string_prop_by_name.  Reindented prototypes.

2000-10-09  Jesus Bravo Alvarez  <jba@pobox.com>

	* configure.in: Added Galician (gl) to ALL_LINGUAS.

2000-10-08  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-unicode.h: Added {BEGIN|END}_GNOME_DECLS

2000-10-07  Damon Chaplin  <damon@helixcode.com>

	* gal/e-text/e-text.c (e_text_unrealize): set cursors to NULL after
	destroying them, to avoid any possibility of BadCursor.
	(e_text_event): just return if the EText item is destroyed.

2000-10-07  Lauris Kaplinski  <lauris@helixcode.com>

	* gal/widgets/e-font.c (e_font_from_gdk_name): Use "fixed", if font
	cannot be found
	(e_font_from_gdk_font): Use font as light version, if we cannot
	get X font property

2000-10-07  Dan Winship  <danw@helixcode.com>

	* gal/util/e-util.c (e_mkdir_hier): New function to make a
	directory and (if needed), its parents

2000-10-06  Yukihiro Nakai  <nakai@gnome.gr.jp>

	* configure.in: Add ja (Japanese) to ALL_LINGUAS

2000-10-05  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in, tests/Makefile.am: Made gnome-vfs an optional
	dependence.  Gal will now compile without gnome-vfs but
	test-tree-2 will only compile if gnome-vfs is available.

Mon Oct  2 18:25:45 2000  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in, tests/Makefile.am: Added a configure check for
 	gnome vfs.

2000-10-02  Chris Toshok  <toshok@helixcode.com>

	* tests/test-tree-3.c (sort_ascending): track sorting api change.
	(sort_descending): same.
	(descending_compare): same.
	(ascending_compare): same.

2000-10-02  Federico Mena Quintero  <federico@helixcode.com>

	* tests/Makefile.am (LDADD): Add $(UNICODE_LIBS).

2000-10-02  Chris Toshok  <toshok@helixcode.com>

	* tests/test-tree-3.c: add a test for tree sorting.

	* tests/Makefile.am (noinst_PROGRAMS): add test-tree-3.

	* tests/.cvsignore: same.

2000-10-02  Radek Doulik  <rodo@helixcode.com>

	* gal/widgets/e-font.c (no_conv_wrapper): new helper function,
	does "poor" conversion in case we don't have font->to conversion
	available
	(e_font_to_native): use no_conv_wrapper

2000-10-02  Chris Toshok  <toshok@helixcode.com>

	* gal/e-table/e-tree-example-1.c: nuke
	
	* gal/e-table/e-tree-example-2.c: nuke
	
	* tests/test-tree-1.c: move gal/e-table/e-tree-example-1.c here.

	* tests/test-tree-2.c: move gal/e-table/e-tree-example-2.c here.

	* tests/Makefile.am: new file.

	* tests/.cvsignore: same.

	* configure.in: AC_OUTPUT (tests/Makefile)

	* Makefile.am (SUBDIRS): add tests dir.

2000-09-29  Mathieu Lacage  <mathieu@eazel.com>

	* gal/Makefile.am: dunno: a space.
	* gal/e-table/Makefile.am: add UNICODE_CFLAGS
	* gal/widgets/Makefile.am: idem.

Tue Sep 26 17:04:45 2000  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in: Added -I${includedir} to GAL_INCLUDEDIR so that
 	gnome-config --cflags gal will work.  Also added unicode since gal
 	is dependent on libunicode.

2000-09-26  Jody Goldberg <jgoldberg@home.com>

	* configure.in : There is no makefile in gal/widgets/pixmaps

2000-09-23  Chema Celorio  <chema@celorio.com>

	* configure.in: add libunicode library to LIBS since gnome-print
	no longer depends on libunicode

2000-09-22  Christopher James Lahey  <clahey@helixcode.com>

	* gal/e-text/e-text-event-processor-emacs-like.c: Fixed operation
	of the keypad keys in EText and ECellText.

2000-09-21  Christopher James Lahey  <clahey@helixcode.com>

	* gal/widgets/e-gui-utils.h: Changed the #ifndef used so that it
	doesn't collide with one inside of evolution.  The entire name of
	this file should change soon.

2000-09-20  Jody Goldberg <jgoldberg@home.com>

	* gal/widgets/color-group.c (color_group_add_color) : do no use == TRUE
	* gal/widgets/color-palette.c (cb_group_color_change) : Ditto.
	(emit_change) : Ditto.

2000-09-20  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added "no" to ALL_LINGUAS.
	
2000-09-18  Federico Mena Quintero  <federico@helixcode.com>

	* gal/widgets/widget-pixmap-combo.h: 
	* gal/widgets/gtk-combo-text.h: 
	* gal/widgets/gtk-combo-stack.h: 
	* gal/widgets/e-reflow.c: 
	* gal/widgets/e-reflow-sorted.c: 
	* gal/widgets/e-reflow-sorted.h: 
	* gal/widgets/e-printable.c: 
	* gal/widgets/color-group.c: 
	* gal/e-text/e-text.c:
	* gal/e-text/e-text.h:
	* gal/e-text/e-text-test.c:
	* gal/e-text/e-text-event-processor.h:
	* gal/e-text/e-text-event-processor-emacs-like.h:
	* gal/e-text/e-entry.h:
	* gal/e-paned/e-vpaned.h:
	* gal/e-paned/e-hpaned.h: Fix includes.

	* gal/widgets/Makefile.am (INCLUDES):
	* gal/util/Makefile.am (INCLUDES):
	* gal/e-text/Makefile.am (INCLUDES): Fix include paths.

	* configure.in (GAL_INCLUDEDIR): do not include
	-I${includedir}/gal; people should use #include <gal/blah/blah.h>.
	(AC_OUTPUT): Renamed the src directory to gal.

	* Makefile.am (SUBDIRS): Ditto.

2000-09-19  Robert Brady  <robert@suse.co.uk>

	* configure.in (ALL_LINGUAS): Add Swedish, Danish, British.

2000-09-18  Morten Welinder  <terra@diku.dk>

	* src/widgets/color-palette.c (color_clicked): Plug leak.
	(color_palette_change_custom_color): Plug leak.
	(cust_color_set): Plug leak.

	* src/widgets/widget-color-combo.c (emit_change): Plug leak.

2000-09-18  Radek Doulik  <rodo@helixcode.com>

	* src/widgets/e-font.c (e_font_to_native): make const safe
	(e_font_to_native): likewise
	(e_font_draw_utf8_text): likewise
	(e_font_to_native): if font->to == -1, return 0

2000-09-18  Kenneth Christiansen <kenneth@gnu.org>

        * po/desk.pl, po/update.pl: Two new scripts for helping
        translation/i18n maintainance of Gal

        * po/README.tools: Added readme file, which explains the
        use of the newly checked in po tools.

        * po/POTFILES.in: Overall prepared for translations of gal

2000-09-18  JP Rosevear  <jpr@helixcode.com>

	* configure.in: Add libunicode check for non-standard
	prefixes

2000-09-17  Morten Welinder  <terra@diku.dk>

	* src/widgets/e-colors.c (e_color_init): Don't leak if called
 	twice.

2000-09-18  Christopher James Lahey  <clahey@helixcode.com>

	* src/e-paned/Makefile.am, src/e-table/Makefile.am,
	src/e-text/Makefile.am: Install the headers.

2000-09-17  Jody Goldberg <jgoldberg@home.com>

	* src/Makefile.am (libgal_la_LIBADD) : Add new files

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* src/widgets/Makefile.am, src/widgets/e-reflow-sorted.c,
	src/widgets/e-reflow.c: Added e-reflow-sorted and e-reflow and
	fixed the #includes.

2000-09-17  Jody Goldberg <jgoldberg@home.com>

	* src/widgets/e-colors.c (e_color_init) : doh!

	* configure.in : Add a version.
	* src/Makefile.am (libgal_la_LIBADD) : Update the set of lo files.

2000-09-17  JP Rosevear  <jpr@helixcode.com>

	* src/util/e-xml-utils.c (e_xml_set_string_prop_by_name): Merging
	in additional type functions
	(e_xml_get_string_prop_by_name): ditto
	(e_xml_set_double_prop_by_name): ditto
	(e_xml_get_double_prop_by_name): ditto

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* configure.in, src/widgets/Makefile.am: Added the
	src/widgets/pixmaps/ directory.

	* po/ChangeLog: Necessary for make distcheck.

	* src/util/Makefile.am (libgalinclude_HEADERS): Fixed a typo of
	e-xml-utils.c to e-xml-utils.h.

	* src/widgets/pixmaps/.cvsignore, src/widgets/pixmaps/Makefile.am:
	Make this a full fledged directory for make distcheck purposes.

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* src/widgets/Makefile.am: Added e-scroll-frame.c,
	e-scroll-frame.h, e-unicode.c, and e-unicode.h.

2000-09-17  Christopher James Lahey  <clahey@helixcode.com>

	* src/e-table/Makefile.am: Removed duplicate
	$(EXTRA_GNOME_CFLAGS).

	* src/util/Makefile.am: Added e-xml-utils.c and e-xml-utils.h.

	* src/widgets/Makefile.am: Added e-printable.c and e-printable.h.

	* src/widgets/e-printable.c: Fixed the include directory for
	e-util.h.

2000-09-17  JP Rosevear  <jpr@helixcode.com>

	* src/e-paned/e-hpaned.h: Fix header includes

	* src/e-paned/e-vpaned.h: Fix header includes

2000-09-17  JP Rosevear  <jpr@helixcode.com>

	* src/widgets/e-gui-utils.c: Remove e_create_image_widget function

	* src/widgets/e-canvas-vbox.c: Fix headers

2000-09-17  Miguel de Icaza  <miguel@helixcode.com>

	* src/widgets/color-group.c: Update to use E_MAKE_TYPE

