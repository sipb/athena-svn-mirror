2003-03-13  Mike Kestner  <mkestner@ximian.com>

	* gal-view-collection.c (gal_view_collection_save): use 
	e_xml_save_file and check return
	(gal_view_collection_load): check return of e_create_directory
	* gal-view-instance.c (save_current_view): use e_xml_save_file 
	and check return

2002-12-17  Gilbert Fang  <gilbert.fang@sun.com>

	* gal-define-views-dialog.c (gdvd_button_new_dialog_callback):
	don't leak the name

2002-12-13  Mike Kestner  <mkestner@ximian.com>

	* gal-view-instance.c (gal_view_instance_construct): convert NULL
	instance_id's to "".  (bug #35540)
 
2002-12-10  Gilbert Fang  <gilbert.fang@sun.com>

	* gal-define-views-dialog.c (gdvd_button_new_dialog_callback):
	check for null or blank view names (bug #34901)

2002-12-02  Mike Kestner  <mkestner@ximian.com>

	* gal-view-instance.c : nuke Collection::changed handling (Bug#33439)

2002-06-16  Christopher James Lahey  <clahey@ximian.com>

	* gal-define-views-dialog.c (gdvd_button_new_dialog_callback):
	Edit the view after appending it to the model.

2002-06-04  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-collection.c, gal-view-collection.h
	(gal_view_collection_set_title): Added this function to set the
	user visible name of this collection.

	* gal-define-views-dialog.c (gal_define_views_dialog_init): Set
	the Define Views for %s label.  Fixes Ximian bug #2100 and #4080.

	* gal-define-views.glade: Change the Define Views for %s label to
	match what is used within the .c.

2002-05-01  Christopher James Lahey  <clahey@ximian.com>

	* gal-define-views-dialog.c (SPEC),
	gal-view-instance-save-as-dialog.c (SPEC): Set the gettext-domain
	here.

2002-04-25  Christopher James Lahey  <clahey@ximian.com>

	* gal-define-views-dialog.c, gal-view-factory.c,
	gal-view-new-dialog.c, gal-view.c: Ansification patch from danw.

2002-04-22  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-instance.c, gal-view-instance.h
	(gal_view_instance_get_popup_menu,
	gal_view_instance_free_popup_menu):  Added these functions.  Used
	to add a current view menu to your popup menus.

2002-03-26  Chris Toshok  <toshok@ximian.com>

	* Makefile.am: remove comment about adding .lo's to the parent
	directory's Makefile.am.

2002-02-13  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-etable.c (detach_table): Set
	view->table_state_changed_id to 0.
	(detach_tree): Set view->tree_state_changed_id to 0.

2002-02-07  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-collection.c (gal_view_collection_load): Create the
	local directory when loading instead of when saving.  This way
	instance data will have somewhere to be saved.

2002-02-07  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (glade_DATA): Added
	gal-view-instance-save-as-dialog.glade.
	(libgalmenus_la_SOURCES): Added
	gal-view-instance-save-as-dialog.c.
	(libgalmenusinclude_HEADERS): Added
	gal-view-instance-save-as-dialog.h.

	* gal-view-collection.c, gal-view-collection.h
	(gal_view_collection_append_with_title): Added this new version of
	the append function that sets the title and returns the new id as
	well.
	(gal_view_collection_set_nth_view): Added this function to save
	over another view.
	(gal_view_collection_get_default_view,
	gal_view_collection_set_default_view): Added the concept of a
	default view for GalViewCollections.

	* gal-view-etable.c, gal-view-etable.h
	(gal_view_etable_attach_table, gal_view_etable_attach_tree,
	gal_view_etable_detach): Added functions to set the state of a
	table or tree and then send GalView "changed" signals whenever
	that state changes.
	(gal_view_etable_set_state): New function to set the ETableState
	of a GalViewETable.

	* gal-view-instance-save-as-dialog.c,
	gal-view-instance-save-as-dialog.glade,
	gal-view-instance-save-as-dialog.h: New dialog to save the current
	custom view as a named view.

	* gal-view-instance.c, gal-view-instance.h
	(gal_view_instance_set_custom_view): New function to set the state
	of an instance to custom view and set the custom view to a
	particular GalView.
	(gal_view_instance_exists): New function to check if this
	particular instance has ever been opened before.  Use before
	gal_view_instance_load.
	(gal_view_instance_save_as): New function to open a save as
	dialog.
	(gal_view_instance_load): Added this function which used to be
	part of _construct.  This function can be called multiple times,
	and those extra times will be ignored.  This is so you can set a
	default view before loading.
	(gal_view_instance_get_default_view,
	gal_view_instance_set_default_view): Set the default view for this
	instance.  If unset, this falls back to the default view for the
	corresponding GalViewCollection.

2002-01-31  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am: Added gal-view-instance.c and gal-view-instance.h.

	* gal-view-collection.c, gal-view-collection.h
	(gal_view_collection_load_view_from_file): Factored out this
	function so that it can be used outside of gal-view-collection.c.
	(gal_view_collection_get_view_index_by_id,
	gal_view_collection_get_view_id_by_index,
	gal_view_collection_loaded): Added these functions.

	* gal-view-instance.c, gal-view-instance.h: New class representing
	a single folder of a particular type of folder.

2001-10-31  Christopher James Lahey  <clahey@ximian.com>

	* gal-define-views-model.c: Made this match pre_changes with
	changes.

2001-10-28  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-collection.c (load_single_file): Check item->type !=
	NULL here.  Fixes Ximian bug #6808.

2001-10-24  Christopher James Lahey  <clahey@ximian.com>

	* gal-define-views-dialog.c, gal-define-views-dialog.h,
	gal-define-views-model.c, gal-define-views-model.h,
	gal-view-collection.c, gal-view-collection.h, gal-view-etable.c,
	gal-view-etable.h, gal-view-factory-etable.c,
	gal-view-factory-etable.h, gal-view-factory.c, gal-view-factory.h,
	gal-view-new-dialog.c, gal-view-new-dialog.h, gal-view.c,
	gal-view.h: Changed the license announcement at the top of these
	files.

2001-10-24  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (INCLUDES): Added $(ICONV_CFLAGS).

2001-08-09  Federico Mena Quintero  <federico@ximian.com>

	* gal-define-views-dialog.c (gal_define_views_dialog_destroy):
	Chain to the destroy handler in the parent class!

	* gal-define-views-model.c (gdvm_destroy): Likewise.  Sigh.

	* gal-view-etable.c (gal_view_etable_destroy): Likewise.  Double
	sigh.

	* gal-view-factory-etable.c (gal_view_factory_etable_destroy):
	Likewise.  Triple sigh.

	* gal-view-new-dialog.c (gal_view_new_dialog_destroy): Likewise.
	Quadruple sigh.

2001-07-06  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-etable.c (config_changed): Changed this to match the
	changed signal on the ETableConfig object.  Fixes bug 4066.

2001-05-28  Federico Mena Quintero  <federico@ximian.com>

	* gal-view-collection.c (gal_view_collection_add_factory):
	Document the fact that this function ref()s the factory and that
	people should unref() it after calling the function if they no
	longer need the factory object.
	(gal_view_collection_display_view): Added preconditions.
	(gal_view_collection_set_storage_directories): Likewise.
	(gal_view_collection_add_factory): Likewise.
	(gal_view_collection_load): Likewise.
	(gal_view_collection_save): Likewise.
	(gal_view_collection_get_count): Likewise.
	(gal_view_collection_get_view): Likewise.
	(gal_view_collection_get_view_item): Likewise.
	(gal_view_collection_append): Likewise.
	(gal_view_collection_delete_view): Likewise.
	(gal_view_collection_copy_view): Likewise.

2001-04-23  Dan Winship  <danw@ximian.com>

	* Makefile.am (INCLUDES): remove UNICODE_CFLAGS

2001-04-10  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-collection.c (load_single_file): Translate the title as
	we read it.

2001-04-07  Dan Winship  <danw@ximian.com>

	* gal-define-views-model.c: make parent_class static

2001-04-04  Kjartan Maraas  <kmaraas@gnome.org>

	* gal-define-views-dialog.h: Fix headers.
	* gal-define-views-model.c: Ditto.
	* gal-view-collection.c: Ditto.
	* gal-view-etable.c: Ditto.
	* gal-view-new-dialog.h: Ditto.

2001-04-02  Federico Mena Quintero  <federico@ximian.com>

	* gal-view-collection.c (load_single_dir): Ahem, free the xmlDoc.
	(load_single_dir): Free the filename if we return immediately due
	to not being able to parse the file.

2001-04-02  Gediminas Paulauskas <menesis@delfi.lt>

	* gal-define-views.glade, gal-view-new-dialog.glade: do not generate
	glade.h files.
	* gal-define-views.glade.h, gal-view-new-dialog.glade.h: removed.
	* Makefile.am: updated.

2001-04-01  Gediminas Paulauskas <menesis@delfi.lt>

	* gal-define-views-dialog.c, gal-view-new-dialog.c: replaced
	glade_xml_new with glade_xml_new_with_domain. fixes #2030

2001-03-05  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-collection.c, gal-view-collection.h
	(gal_view_collection_changed): New changed signal.

2001-02-17  Christopher James Lahey  <clahey@ximian.com>

	From a patch submitted by Murray Cumming <Murray.Cumming@mybau.com>

	* gal-define-views-model.h, gal-view-collection.h,
	gal-view-etable.h, gal-view-factory-etable.h, gal-view-factory.h,
	gal-view.h: Added GNOME_DECLS.

2001-02-06  Christopher James Lahey  <clahey@ximian.com>

	* gal-view-collection.c (gal_view_collection_save): Create the
	local directory when saving if it doesn't exist already.

2001-02-05  Christopher James Lahey  <clahey@ximian.com>

	* gal-define-views-model.h: Removed unnecessary comment about now
	non-existant virtual column list.

2001-02-05  Christopher James Lahey  <clahey@helixcode.com>

	* gal-view-collection.c: Fixed a number of small bugs in how we
	were saving and loading view collections.

	* gal-view-etable.c (config_changed): Send the changed signal
	properly.
	(gal_view_etable_construct): Duplicate the spec's state here.

2001-01-24  Christopher James Lahey  <clahey@helixcode.com>

	* gal-define-views-dialog.c (gal_define_views_dialog_class_init):
	Have the argument system do type checking on our "collection"
	argument.  Refactored the setting of the "collection" argument
	into a set_argument function.

	* gal-define-views-model.c (gal_define_views_model_class_init):
	Have the argument system do type checking on our "collection"
	argument.

2001-01-24  Christopher James Lahey  <clahey@helixcode.com>

	* gal-view-collection.c (gal_view_collection_get_view_item):
	Actually implement this function.

2001-01-23  Christopher James Lahey  <clahey@helixcode.com>

	* gal-view-collection.c, gal-view-collection.h: Made
	GalViewCollectionItem a public type.
	(load_single_file): Made it so that the filename does not get
	saved with the directory structure.
	(gal_view_collection_get_view_item): Added this function to return
	a certain GalViewCollectionItem.

2001-01-22  Christopher James Lahey  <clahey@helixcode.com>

	* gal-define-views-dialog.c, gal-define-views-dialog.h
	(gal_define_views_dialog_init): Initialize collection field to
	NULL.  Set the collection on the model as soon as we create it.
	(gal_define_views_dialog_new): Add a GalViewCollection argument to
	this function.  This just makes this dialog a bit easier to use
	through the API.
	(gal_define_views_dialog_set_arg): When we set the collection, set
	it on the dialog->model.

	* gal-define-views-model.c, gal-define-views-model.h: Rewrote this
	object to use a GalViewCollection to store the information instead
	of an array of GalViews.

	* gal-view-collection.c, gal-view-collection.h: Added
	gal_view_collection_get_count, gal_view_collection_get_view,
	gal_view_collection_append, gal_view_collection_delete_view, and
	gal_view_collection_copy_view.
	(view_changed, load_single_file): Connect to the "changed" signal
	on the views.
	(load_single_dir): Survive loading if there's no xml file.

	* gal-view-etable.c: Implemented get_type_code method.

	* gal-view-factory-etable.c: Implemented get_type_code method.

	* gal-view.c, gal-view.h: Added gal_view_get_type_code and
	"changed" signal.

2001-01-21  Christopher James Lahey  <clahey@helixcode.com>

	* gal-define-views-model.c (gdvm_set_value_at): Use the new
	gal_view_set_title function.

	* gal-view-collection.c, gal-view-collection.h: Implemented this.
	Added gal_view_collection_save and gal_view_collection_load.

	* gal-view-etable.c: Implemented save, load, and set_title methods
	for this class.

	* gal-view-factory.c: Implemented gal_view_factory_get_type_code.

	* gal-view.c, gal-view.h: Replaced gal_view_save_to_node with
	gal_view_save.  Replaced gal_view_load_from_node with
	gal_view_load.  Added gal_view_set_title.

2001-01-17  Christopher James Lahey  <clahey@helixcode.com>

	* gal-define-views-dialog.c, gal-define-views-dialog.h: Added a
	collection argument to this to set the GalViewCollection.
	Connected up the modify, delete, and copy buttons.  Documented.

	* gal-define-views-model.c, gal-define-views-model.h: Added
	gal_define_views_model_get_view,
	gal_define_views_model_delete_view, and
	gal_define_views_model_copy_view methods.  Documented.

	* gal-view-collection.c: Documented.

	* gal-view-etable.c, gal-view-etable.h: Documented.  Implemented
	edit and clone methods of GalView.  Initialized state to a
	non-NULL value.  Added a name parameter to gal_view_etable_new.

	* gal-view-factory-etable.c: Documented.  Added the name argument
	to gal_view_etable_new.

	* gal-view-factory.c: Fixed the g_return_val_if_fails to check for
	GalViewFactory as the type instead of GalView.

	* gal-view.c, gal-view.h: Added the clone method.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* gal-view-collection.h: Removed incorrect e-list.h include.

2000-12-06  Christopher James Lahey  <clahey@helixcode.com>

	* Makefile.am: Added gal-view-collection.c, gal-view-etable.c,
	gal-view-factory-etable.c, gal-view-factory.c,
	gal-view-collection.h, gal-view-etable.h,
	gal-view-factory-etable.h, and gal-view-factory.h.

	* gal-define-views-dialog.c, gal-define-views-dialog.h: Rewrote
	this to take a GalViewCollection.  This now passes its collection
	to the new view dialog but still doesn't get its list of views
	from the collection.

	* gal-define-views-model.c: Changed this to use the gal_view_get_title
	function instead of the "title" gtk argument.

	* gal-define-views.glade, gal-define-views.glade.h: Changed this
	dialog to be a bit cleaner.

	* gal-view-collection.c, gal-view-collection.h: A collection of
	views and view factories.

	* gal-view-etable.c, gal-view-etable.h: An implementation of the
	view class.  This stores an ETableSpecification and the current
	ETableState.

	* gal-view-factory-etable.c, gal-view-factory-etable.h: An
	implementation of the view factory class.  This stores an
	ETableSpecification and creates GalViewEtables when requested.

	* gal-view-factory.c, gal-view-factory.h: A new virtual class.
	Its primary job is to return new GalViews.

	* gal-view-new-dialog.c, gal-view-new-dialog.h: Added a collection
	argument to the new function here so that it can get a list of
	factories to choose from.

	* gal-view-new-dialog.glade, gal-view-new-dialog.glade.h: Added a
	CList for the list of factories to choose from.

	* gal-view.c, gal-view.h: Changed this to be a virtual class.

2000-11-22  Christopher James Lahey  <clahey@helixcode.com>

	* gal-define-views-dialog.c: Fixed some typos to get the table to
	display properly.

	* gal-view-new-dialog.c: Fixed the string for loading the glade
	file for this dialog.

2000-11-11  Christopher James Lahey  <clahey@helixcode.com>

	* Makefile.am: Added gal-define-views-model.c,
	gal-define-views-model.h, gal-view-new-dialog.c,
	gal-view-new-dialog.h, gal-view-new-dialog.glade,
	gal-view-new-dialog.glade.h, gal-view.c, and gal-view.h.

	* gal-define-views-dialog.c, gal-define-views-dialog.h: Connect up
	the New button.  Use an ETable.

	* gal-define-views.glade, gal-define-views.glade.h: Put in custom
	object for the ETable

	* gal-define-views-model.c, gal-define-views-model.h: New model
	for list of views.

	* gal-view-menus.c: Close the define views dialog when it's done.

	* gal-view-new-dialog.c, gal-view-new-dialog.glade,
	gal-view-new-dialog.glade.h, gal-view-new-dialog.h: New class for
	creating a new view.

	* gal-view.c, gal-view.h: New class for representing a single view
	in the define views model.

2000-11-09  Christopher James Lahey  <clahey@helixcode.com>

	* Makefile.am: Added gal-view-menus.c and gal-view-menus.h.

	* gal-view-menus.c, gal-view-menus.h: New files to create the view
	menus.

2000-11-05  Christopher James Lahey  <clahey@helixcode.com>

	* .cvsignore, Makefile.am, gal-define-views-dialog.c,
	gal-define-views-dialog.h, gal-define-views.glade,
	gal-define-views.glade.h: New files for the new define views
	dialog.

