2004-10-15  Radek Doulik  <rodo@ximian.com>

	* spell.c (spell_add_to_personal_no_language): new helper method
	to report broken language settings
	(spell_add_to_personal): call spell_add_to_personal_no_language if
	language is null
	(add_cb): ditto

2004-10-15  Radek Doulik  <rodo@ximian.com>

	* replace.c: add finished flag to ask dialog
	(ask_dialog_response): set finished flag by return value from
	html_engine_replace_do
	(ask): run ask dialog until replacing process is finished

	Fixes #50646

2004-09-20  Radek Doulik  <rodo@ximian.com>

	* menubar.c (font_style_cb): toggle style instead of setting it on

2004-09-02  Radek Doulik  <rodo@ximian.com>

	* text.c (text_properties): connect signals to right widgets, they
	were before all set to bold button

	Fixes #62087

2004-08-13  JP Rosevear  <jpr@ximian.com>

	* menubar.c (insert_image_cb): optionally use gtk file chooser
	(file_dialog_ok): ditto
	(insert_file_dialog): ditto and use it in a more GtkDialog manner

2004-07-22  Rodney Dawes  <dobey@novell.com>

	* Makefile.am (gtkhtml_data, LDADD): Use GTKHTML_API_VERSION

2004-06-25  Radek Doulik  <rodo@ximian.com>

	* editor-control-shlib.c (editor_control_shlib_factory): make the
	function static

	* popup.c (remove_link): use html_engine_set_link

Sat Jun  5 12:20:42 2004  Owen Taylor  <otaylor@redhat.com>

	* html-stream-mem.c (html_stream_mem_construct): Add a missing static.

2004-06-04  Radek Doulik  <rodo@ximian.com>

	* clean all unused variables and other compiler warnings

	* gi-combo-box.c (gtk_combo_tearoff_bg_copy): replace deprecated
	calls

	* link.c (link_set_ui): removed unused variables
	removed unused variables and old unused methods

	* image.c (load_done): added return value
	remove unused old methods

	* cell.c (data_new): make sure we always return value

	* utils.c (editor_hig_vbox): return value (pointed out by Miguel Ibarra)

2004-05-31  Radek Doulik  <rodo@ximian.com>

	* body.c (ADD_COLOR): get colors from settings and not from
	default settings

	Fixes #59258

	* table.c: after making sure the table still exists, move one step
	forward so that cursor is inside the table

	Fixes #59261

	* menubar.c (insert_image_cb): complete the image url (prepend
	"file://" prefix)

	Fixes #59263

2004-05-27  Radek Doulik  <rodo@ximian.com>

	* updated for color set changes

2003-05-21  Pratik V. Parikh  <pratikvp@despammed.com>

	* search.c (search_dialog_response): integrate the regular
	expression search feature into the find dialog
	(regular_toggled): make find button sensitive again

2004-05-24  Radek Doulik  <rodo@ximian.com>

	* menubar.c (menubar_setup): connect
	menubar_paragraph_style_changed_cb, it was probably unconnected by
	mistake, causing Wrap Lines menu item unaccessible

2004-05-14  Radek Doulik  <rodo@ximian.com>

	* menubar.c (insert_image_cb): use html_engine_get_image_factory

2004-05-04  Radek Doulik  <rodo@ximian.com>

	* search.c (case_toggled): cast GTK_TOGGLE_BUTTON

2004-05-17  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (editor_control_construct): do not
	disable animations, they work nicely now

	Fixes #58335

2004-04-28  Pratik V. Parikh  <pratikvp@despammed.com>

	* search.c (search_dialog_response):
	(case_toggled): make find button sensitive again
	Fixes bug #57719

2004-04-16  Radek Doulik  <rodo@ximian.com>

	* search.c (search_dialog_response): do not hide the search dialog
	when we are successful
	(backward_toggled): make find button sensitive again

2003-12-12  Charles Zhang  <charles.zhang@sun.com>

	* search.c (search): use existing find dialog, not new one blindly.
	(search_dialog_response): if not found, disable the Find button
	and leave dialog visible to indicate the user.
	(entry_changed): enable the Find button when entry changed.
	Fixes bug #49702

2004-04-15  Radek Doulik  <rodo@ximian.com>

	* popup.c (prepare_properties_and_menu): keep table delete submenu
	in plain text editor. it may contain tables and we would like to
	give the user a possibility to delete table/table parts

2004-04-09  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (create_style_toolbar): do not use gtk 2.4 new toolbar
	API

2004-04-07  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (create_style_toolbar): added two new separators as
	suggested in #42865

2004-03-19  Radek Doulik  <rodo@ximian.com>

	* image.c (image_widget): default gnome pixmap entry set to home
	dir
	(get_data): do not use image location if it has template_image
	data set
	(insert_or_apply): reset template_image data

	* editor-control-factory.c (html_button_pressed_after): do not
	reset template_image data here, do it when applying changes so
	that it will survive cancel response and will bring properties
	dialog again

	Fixes #54566

2004-03-12  Rodney Dawes  <dobey@ximian.com>

	* Makefile.am (%.server): Don't put Makefile in the list after :
	This avoids the circular dependency and causing the server file to
	get overridden with the contents of Makefile in some cases
	(BUILT_SOURCES): remove $(server_DATA) and $(ui_DATA) from here
	(CLEANFILES): and put $(server_DATA) and $(ui_DATA) here instead

2004-03-12  Radek Doulik  <rodo@ximian.com>

	* replace.c (ask_dialog_new): use CANCEL response for CLOSE button
	(gtk_html_replace_dialog_new): ditto
	(ask_dialog_response): handle CANCEL response as well as CLOSE one
	(replace_dialog_response): ditto

	* search.c (gtk_html_search_dialog_new): use CANCEL response for
	close button, gtkdialog.c closes dialog when Esc key is pressed
	only if there's CANCEL response present
	(search_dialog_response): handle CANCEL response as well as CLOSE
	one

	Fixes #47064

2004-02-26    <rodo@ximian.com>

	* image.c (insert_or_apply): set alt to d->alt instead of d->url

2004-02-17  Radek Doulik  <rodo@ximian.com>

	* popup.c (prepare_properties_and_menu): do not add "Insert Link"
	popup menu item in plain text mode
	(prepare_properties_and_menu): capitalize link in "Insert Link"
	(prepare_properties_and_menu): add separator before "Input
	Methods"
	(prepare_properties_and_menu): do not add separator after "Style"
	submenu and place it before table items

2004-02-13  Radek Doulik  <rodo@ximian.com>

	* image.c (load_done): new handler, replaces set_size idle
	callback
	(image_widget): hoohkup load_done

	Fixes #54204

2004-02-11  Yong Sun <Yong.Sun@sun.com>

	* toolbar.c: (create_style_toolbar) steal domain for libgnomeui to 
	create toolbar.

2004-02-03  Radek Doulik  <rodo@ximian.com>

	* paragraph.c (fill_sample): don't include </div> in translateable
	string

	* toolbar.c (create_style_toolbar): unset focus for all toolbar
	widgets

2004-02-02  Radek Doulik  <rodo@ximian.com>

	* properties.c (gtk_html_edit_properties_dialog_new): make the
	code more readable
	(dialog_response): close the dialog only if dialog succeeded

	* link.c (link_insert_cb): complain if text and/or url is not
	filled

2004-01-30  Radek Doulik  <rodo@ximian.com>

	* menubar.c (menubar_setup): as below

	* gnome-gtkhtml-editor.c (main): as below

	* editor-control-shlib.c (editor_shlib_init): use GETTEXT_PACKAGE
	instead of GNOME_EXPLICIT_TRANSLATION_DOMAIN

2004-01-30  Yong Sun <Yong.Sun@sun.com>

	* cell.c image.c rule.c table.c template.c: add domain param in
	glade_xml_new()

	* properties.c link.c: add domain member in GtkStockItem

2004-01-23  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (create_style_toolbar): set initial unindent button
	sensitivity
	(toolbar_item_represents): new helper function
	(toolbar_item_update_sensitivity): use toolbar_item_represents,
	newer gtk toolbar contains gtktoolitems so we have to be more
	careful
	(toolbar_update_format): use gtk_container_foreach instead of
	forall

2003-12-15  Radek Doulik  <rodo@ximian.com>

	* menubar.c (menubar_update_format): disable sick smiley for plain
	text mode

2003-12-02  Charles Zhang  <charles.zhang@sun.com>

	* replace.c (ask_dialog_new): new button with mnemonics.
	Fixes bug #51472

2003-09-24  Radek Doulik  <rodo@ximian.com>

	* spell.c (spell_check_dialog): added missing dialog, set
	temporary inline spelling in case it's disabled and whole document
	has to be checked

2003-12-05  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: as below, make it the same order
	and grouping as in paragraph dialog

	* paragraph.c (paragraph_properties): s/Pre/Preformatted,
	reordered and added few separators

	* menubar.c (menubar_update_format): allow alignment change in
	plain text mode, we support this

	* paragraph.c (paragraph_properties): disable headings and address
	styles for plain text mode

2003-12-03  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.h: include config.h for
	EDITOR_API_VERSION

2003-12-02  Rodney Dawes  <dobey@ximian.com>

	* GNOME_GtkHTML_Editor.oaf.in.in:
	* GNOME_GtkHTML_Editor.oafinfo: Removed unneeded files

2003-12-02  Radek Doulik  <rodo@ximian.com>

	* persist-file.c (impl_getCurrentFile): use CORBA_string_dup
	(gtk_html_persist_file_new): add step counter
	(impl_isDirty): check step counter, use CORBA types

2003-09-10  Archit Baweja  <bighead@users.sourceforge.net>

	* persist-file.c (impl_save): call to open, mode should be 0666 instead
	of 0600.
	(gtk_html_persist_file_new): initialize new member, uri.
	(finalize): free the file->uri field.
	(gtk_html_persist_file_class_init): setup the 2 new methods. isDirty()
	and getCurrentFile().
	(impl_isDirty, impl_getCurrentFile): new.
	(impl_save): call gtk_html_command (html, "saved"). Also save the
	uri/path to which data is saved.
	(impl_load): likewise for the uri.

	* test-html-editor-control.c (file_selection_cancel_cb): new callback.
	Destroy the whole filesel widget. Previously only the cancel_button
	was destroyed.
	(open_or_save_as_dialog): setup cancel callback correctly.

2003-11-18  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: remove gnome and gtk deprecated flags

2003-11-07  Radek Doulik  <rodo@ximian.com>

	* link.c (link_insert_cb): use add_link => pass engine as
	parameter

	* test-html-editor-control.c (container_create): enable magic
	smileys, links and inline spell checking

2003-10-14  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* popup.c: Add missing header include.

2003-10-02  Rodney Dawes  <dobey@ximian.com>

	* Makefile.am: Version the server file, Clean up some of the
	unneeded rules, and condense them, Don't dist generated files

2003-09-23  Ettore Perazzoli  <ettore@ximian.com>

	* editor-control-factory.c (send_event_str): Work around the fact
	that bonobo_arg_from_gvalue() in libbonobo 2.4.0 doesn't handle
	NULL strings.

2003-09-22  Radek Doulik  <rodo@ximian.com>

	* Makefile.am (glade_DATA): don't link with a11y, it's already in
	libgtkhtml

2003-09-03  Larry Ewing  <lewing@ximian.com>

	* menubar.c: revert the destach changes

2003-09-03  Radek Doulik  <rodo@ximian.com>

	* menubar.c (menubar_set_languages): use control data languge

	* spell.c (spell_set_language): set control data language

	* control-data.c (gtk_html_control_data_new): added language
	property

	* menubar.c (menubar_setup): move spell control checking here from
	activate callback, cache has_spell_control value - it's expensive
	call
	(menubar_setup): call menubar_set_languages

2003-07-23  Federico Mena Quintero  <federico@ximian.com>

	* menubar.c (menubar_setup): Save the signal ID that we connect.
	(menubar_detach): New function, disconnects the appropriate
	signals and removes our menu items.

	* control-data.c (gtk_html_control_data_destroy): Disconnect the
	menubar signal handler if it is present.

	* editor-control-factory.c (activate_cb): In the deactivate case,
	call menubar_detach().  Also, set the sensitivity of the
	EditSpellCheck verb here.
	(set_frame_cb): Don't set up the menubar here, nor the sensitivity
	of the EditSpellCheck verb.

2003-09-05  Antonio Xu  <antonio.xu@sun.com>

	* editor-control-factory.c (load_from_file): use
	g_filename_from_uri to get image file's real path, bug fix
	#47990.

2003-09-03  Dan Winship  <danw@ximian.com>

	* Makefile.am (libgnome_gtkhtml_editor_3_1_la_LDFLAGS): Remove
	-no-undefined (which is wrong), and add -module.

2003-09-02  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor-emacs.xml.in: add file with emacs friendly
	keybindings converted by Alain Mellan (see Ximian #41187).

	* menubar.c (menubar_setup): load emacs keybindings if the
	use_emacs_keybindings is set in the class.

	* Makefile.am: add rules for GNOME_GtkHTML_Editor-emacs.xml.in.

2003-09-02  Radek Doulik  <rodo@ximian.com>

	* body.c: renamed draft paper to graph paper as suggested by Aaron

2003-08-08  Yuedong Du  <yuedong.du@sun.com>

	* menubar.c: fix a typo cause bullet list not work. See bug 
	#47387

2003-07-31  Radek Doulik  <rodo@ximian.com>

	* replace.c (ask_dialog_response): as below

	* search.c (search_dialog_response): as below

	* properties.c (prop_close): grab focus after closing prop dialog

2003-06-28  Alex Jiang <alex.jiang@sun.com>

	* image.c (changed_template): before clear option data, check 
	if we are using the same template. Fixes #44705

2003-07-18  Antonio Xu <antonio.xu@sun.com>

	* image.c : (get_sample_html) : change some no sense text.

2003-07-01  Yuedong Du <yuedong.du@sun.com>

	* editor-control-factory.c : add a new signal handler (html_show_popup)
	for "popup-menu" signal. Thus shift+f10 to activate popup menu.

2003-06-26  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (html_button_pressed): update for gtk2
	changed coordinates

2003-06-13  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (send_event_void): unref all return
	values.

	* spell.c (spell_create_language_menu): make sure we don't
	overwrite languages without freeing it.

	* control-data.c (gtk_html_control_data_destroy): free the
	languages.

	* Makefile.am: Use imlcit rules to generate the .server files. 

2003-06-10  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (send_event_str): free the bonobo arg
	the right way.

2003-06-05  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: changed increase/decrease indent
	accelerators and added wrap lines menu item

	* menubar.c (menubar_setup): connect to
	current_paragraph_style_changed signal to enable/disable "Wrap
	Lines"
	(menubar_paragraph_style_changed_cb): new signal handler

2003-05-20  Larry Ewing  <lewing@ximian.com>
	
	* menubar.c (menubar_setup): move declaration to the top of the
	function

	* editor-control-factory.c (editor_control_construct): disable
	animations while editing until it works properly.

2003-05-20  Radek Doulik  <rodo@ximian.com>

	* menubar.c (menubar_setup): set gettext domain before calling
	bonobo bonobo_ui_util_set_ui so that labels get translated and
	restore it afterwards. see FIXME comment for explanation what's
	wrong with this hack

2003-05-20  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c: add inline smiley and link bonobo
	properties.

2003-05-17  Larry Ewing  <lewing@ximian.com>

	* menubar.c (file_dialog_ok): rewrite file insertion to try utf-8
	then locale charset and improve error reporting.  Fixes #43069.

2003-05-08  Radek Doulik  <rodo@ximian.com>

	* include config.h and gnome-i18n.h everywhere so that we use
	explicit translation domain

	* editor-control-shlib.c (editor_shlib_init): new helper method,
	initializes i18n

	* gnome-gtkhtml-editor.c (main): call bind_textdomain_codeset with
	utf-8

2003-05-02  Radek Doulik  <rodo@ximian.com>

	* properties.c (gtk_html_edit_properties_dialog_new): remove apply
	button to be more conformant with the HIG

2003-05-01  Abel Cheung  <maddog@linux.org.hk>

	* image.c(get_sample_html): Fix typo.
	* GNOME_GtkHTML_Editor.server.in.in.h,
	  gtkhtml-editor-properties.glade.h,
	  GNOME_GtkHTML_Editor.xml.in.h:
	  Remove temp files generated by intltool.

2003-04-29  Larry Ewing  <lewing@ximian.com>

	* Makefile.am (CLEANFILES): add missing files to CLEANFILES to
	make automake-1.7.3 happy.

	* menubar.c: remove unused include.

2003-04-17  Radek Doulik  <rodo@ximian.com>

	* html-stream-mem.c: derive from BonoboObject instead of
	BonoboStreamMem

2003-04-14  Larry Ewing  <lewing@ximian.com>

	* Makefile.am (SPELL_IDL_GENERATED_C): remove spell.h that was
	accidentally still there.

2003-04-14  Radek Doulik  <rodo@ximian.com>

	* test-html-editor-control.c (app_delete_cb): call quit
	(container_create): don't connect to window destroy signal, it's
	no more needed + was calling unref on uic which we didn't have
	reference to
	(container_create): remove control frame activate call - I guess
	it was committed by mistake, right Larry? after I removed this
	call things started to work again - menu items work and no warning
	on exit

2003-04-09  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (editor_init_painters): use the gdk painter
	directly rather than the prop 
	(editor_set_format): copy the default fonts back since they may
	have changed dues to style changes.
	(editor_init_painters): call ensure_style to make sure the colors
	and fonts are valid.

2003-04-09  Radek Doulik  <rodo@ximian.com>

	* spell.c: use html_engine_get_language

	* popup.c: use html_engine_get_language

	* editor-control-factory.c: removed static from struct declaration
	(to quiet compiler)

2003-04-04  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (html_button_pressed): revert the
	previous change

2003-04-04  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (html_button_pressed): always do the
	editor popup and never disable the selection.  This matches how
	the gtk text widgets do popup editing better.

2003-04-03  Larry Ewing  <lewing@ximian.com>

	* popup.c (prepare_properties_and_menu): use stock undo/redo
	cut/copy/paste.

	* GNOME_GtkHTML_Editor.xml.in: use stock icons.

	* Makefile.am: fix spell idl depends.

2003-04-03  Rodney Dawes  <dobey@ximian.com>

	* Makefile.am: Fix shlib support and idl dependencies
	* editor-control-factory.c: Don't need conditional shlib stuff here
	* editor-control-factory.h: Prototype editor_control_factory here
	* editor-control-shlib.c: Add source file for the shlib factory
	* gnome-gtkhtml-editor.c: N conditional shlib support and use the
	new public prototype for editor_control_factory
	
2003-04-03  Larry Ewing  <lewing@ximian.com>

	* Makefile.am: Fix idl depends.

2003-04-01  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (activate_cb): add activate callback.

	* test-html-editor-control.c (main): init libgnomeui so that we
	get the indent icons.

	* menubar.c: make the verbs static, shlibs don't like globals.

2003-03-30  Larry Ewing  <lewing@ximian.com>

	* test-html-editor-control.c (main): use gnome_program_init.

	* Makefile.am (libgnome_gtkhtml_editor_3_0_la): add a broken dep
	onto the shlib until I can figure something else out

	* htmlsourceview.c (html_source_view_destroy): make sure this is
	safe for multiple calls

2003-03-28  Larry Ewing  <lewing@ximian.com>

	* menubar.c (command_cb): replace a bunch of reproduced code with
	a translation table call gtk_html_command.  Fixes #40069.

2003-03-28  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: fix build typo

2003-03-27  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c: remove main move it to
	gnome-gtkhtml-editor.c

	* Makefile.am: always build a libtool library don't install it if
	we are making an exe component.

	* gnome-gtkhtml-editor.c (main): move the main function to it's
	own file.

2003-03-26  Larry Ewing  <lewing@ximian.com>

	* popup.c (prepare_properties_and_menu): add Input Methods menu item.

	* GNOME_GtkHTML_Editor.xml.in: fix PasteQuotation menu item.

2003-03-24  Radek Doulik  <rodo@ximian.com>

	* paragraph.c: include htmlselection.h to avoid warnings

	* menubar.c (menubar_setup): removed unused variable

2003-03-20  Radek Doulik  <rodo@ximian.com>

	* spell.c (spell_check_dialog): use gtk_widget_destroy instead of
	g_object_unref on dialog
	use new gnome spell API version 0.3

2003-03-17  Larry Ewing  <lewing@ximian.com>

	* Makefile.am: install the binary in libexecdir

2003-03-15  Larry Ewing  <lewing@ximian.com>

	* Makefile.am: fix the server.in.in rules to use sed so that
	variables will be exapanded before being inserted in the xml.
	Also clean up the ui xml rules a little.

2003-03-13  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c: use bonobo activation instead of oaf
	for shlib factories.

2003-03-05  Larry Ewing  <lewing@ximian.com>

	* Makefile.am (uninstall-hook): add uninstall-hook to remove
	renamed binary.

2003-03-04  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: as below

	* menubar.c: turn radio/check menu items to normal ones

2003-03-03  Larry Ewing  <lewing@ximian.com>

	* Makefile.am: add defines that gnome_program_init wants.

	* popup.c: remove debug define.

2003-02-28  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c: fix the gvalue usage.

	* body.c (body_apply_cb): set the left margin if the template
	requires it.

2003-02-25  Larry Ewing  <lewing@ximian.com>

	* image.c (set_ui): remove debug printf that could try to print
	NULL.

2003-02-24  Radek Doulik  <rodo@ximian.com>

	* popup.c (prepare_properties_and_menu): count property pages
	(property_dialog_show): use props intead of items to decide
	whether to show dialog

2003-02-12  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: make paste quotation C-S-v

2003-02-05  Dan Winship  <danw@ximian.com>

	* editor-control-factory.c (editor_control_init): Replace
	deprecated glade_gnome_init() with glade_init()

2003-01-09  Radek Doulik  <rodo@ximian.com>

	* spell.c (spell_check_dialog): as below

	* properties.c (gtk_html_edit_properties_dialog_show): don't make
	properties dialog modal

2002-12-05  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (load_from_file): try to load file even
	if it doesn't start with file:

	* cell.c (fill_sample): use rspan/cspan
	(changed_cspan): new handler
	(changed_rspan): ditto
	(cell_widget): connect cspan/rspan
	(set_ui): set cspan/rspan
	(get_data): get cspan/rspan
	(cell_apply_1): apply cspan/rspan

	* gtkhtml-editor-properties.glade: enabled cspan/rspan

2002-12-02  Radek Doulik  <rodo@ximian.com>

	* template.c: use template_image object data for Image frame

	* editor-control-factory.c (html_button_pressed_after): handle
	template_image object data

	* cell.c (changed_bg_color): updated signature to gal changes
	(cell_widget): connect to color_changed signal instead of changed

	* table.c (changed_bg_color): updated signature to gal changes
	(table_widget): connect to color_changed signal instead of changed

2002-11-27  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (html_button_pressed_after): look for
	auto-replace text after mouse click

	* template.c: added template_text data to specify auto-replace
	text

2002-11-02  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (html_button_pressed): fix the return
	value on a bunch of cases the code that was there doesn't even
	make sense.

2002-10-28  Larry Ewing  <lewing@ximian.com>

	* toolbar.c (toolbar_item_update_sensitivity): silence warning.

	* properties.c: add missing header.

2002-10-09  Radek Doulik  <rodo@ximian.com>

	* body.c: added left_margin to template, replace templates test
	and test 1 with 3 real templates.

2002-10-04  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (toolbar_item_update_sensitivity): set unindent
	sensitivity only when level > 0
	(indentation_changed): new signal handler, cares about unindent
	button sensitivity
	(create_style_toolbar): connect indentation_changed

2002-09-26  Radek Doulik  <rodo@ximian.com>

	* menubar.c (file_dialog_ok): use html_engine_paste_text instead
	of e-utils
	(insert_file_dialog): open file selector in home directory instead
	of cwd

2002-09-16  Radek Doulik  <rodo@ximian.com>

	* popup.c (prepare_properties_and_menu): check if selection
	contains link before including remove link
	(prepare_properties_and_menu): always include "Insert link" menu
	item

2002-09-12  Bastien Nocera  <hadess@hadess.net>

	* Makefile.am: remove GTK_DISABLE_DEPRECATED definition for the
	benefit of gal2 (will be removed when gal stops having references to
	GtkCList in gal/widgets/e-unicode.h)

2002-08-22  Radek Doulik  <rodo@ximian.com>

	* menubar.c (file_dialog_ok): convert from locale to utf8

2002-08-21  Radek Doulik  <rodo@ximian.com>

	* menubar.c (indent_more_cb): removed properties menu item as it
	doesn't play nice with evo. now clients have to call capplet or
	provide own settings if needed

2002-06-06  Radek Doulik  <rodo@ximian.com>

	* menubar.c: added insert text/html file items and implemented
	them

2002-05-28  Radek Doulik  <rodo@ximian.com>

	* menubar.c (menubar_update_format): take care of smiley menuitems

	* GNOME_GtkHTML_Editor.xml.in: fix typo

2002-05-22  Radek Doulik  <rodo@ximian.com>

	* menubar.c (paragraph_style_cb): don't set style if
	block_font_style_change

2002-05-15  Larry Ewing  <lewing@ximian.com>

	* htmlsourceview.c: rename methods and add content type parameter
	to set_source.
	
	* htmlsourceview.h: rename prototypes.

	* test-html-editor-control.c (view_html_source_cb): specify html
	output.
	(view_plain_source_cb): specify plain output.
	(view_source_dialog): pass the content type along to
	html_view_source_set_source.

2002-05-13  Larry Ewing  <lewing@ximian.com>

	* test-html-editor-control.c (view_source_cb): new verb to start
	up the source view.
	(init_corba): set the version to the editor api version.
	(main): initialize gconf.

	* htmlsourceview.c: added.  This is a simple widget that pulls the
	persist information from a control.

	* htmlsourceview.h: added.

	* e-html-utils.c: added, for e-text-to-html.

	* e-html-utils.h: added.

	* Makefile.am: add the new source files to the test-editor build.

2002-05-07  Larry Ewing  <lewing@ximian.com>

	* test-html-editor-control.c (save_through_persist_stream): use a
	reasonable mode and truncate existing files.  
	(save_through_plain_persist_stream): truncate existing stream. Wow
	yet another way in which bonobo sucks.

	* GNOME_GtkHTML_Editor.oaf.in: add Editor interface to the oaf
	list.

2002-05-08  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: moved lists before hedings

	* toolbar.c: moved lists before hedings

2002-05-07  Radek Doulik  <rodo@ximian.com>

	* Makefile.am: use versioned libraries

2002-05-06  Radek Doulik  <rodo@ximian.com>

	* spell.c (spell_check_word): check just for SYSTEM exception
	(fill_suggestion_clist): ditto

2002-03-26  Radek Doulik  <rodo@ximian.com>

	* popup.c (prepare_properties_and_menu): sink menu if it doesnt
	contains any items, return NULL in such case

2002-03-25  Radek Doulik  <rodo@ximian.com>

	* test-html-editor-control.c (app_destroy_cb): use
	bonobo_main_quit

2002-03-15  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c: use EDITOR_API_VERSION

	* Makefile.am: added install-exec-hook to rename component binary

	* GNOME_GtkHTML_Editor.oaf.in.in: use EDITOR_API_VERSION

2002-02-21  Larry Ewing  <lewing@ximian.com>

	* image.c (insert_or_apply): initialize url properly.

2002-02-13  Larry Ewing  <lewing@ximian.com>

	* Editor.idl: remove references to resolver interface.

	* Makefile.am: remove resolver references.

	* test-html-editor-control.c (container_create): remove
	resolver implementation and references.

	* editor-control-factory.c (url_requested_cb): remove references
	to resolver interface.

2002-02-12  Radek Doulik  <rodo@ximian.com>

	* engine.c (impl_has_undo): renamed from impl_is_dirty
	(editor_engine_get_epv): updated to changed API

	* Editor.idl: renamed isDirty flag to hasUndo and commented
	dropUndo and hasUndo methods

2002-02-08  Larry Ewing  <lewing@ximian.com>

	* link.c (test_clicked): handler for new "Test URL" button.
	(link_widget): add a button to the url frame to open the current
	url.

2002-01-31  Radek Doulik  <rodo@ximian.com>

	* Editor.idl: undo_begin, undo_end --> undoBegin, undoEnd, added
	ignoreWord method, which tells spell checker to ignore given word

	* GNOME_GtkHTML_Editor.xml.in: added C-S-l for spell check document

2002-01-30  Radek Doulik  <rodo@ximian.com>

	* Makefile.am (LDADD): removed unwanted -dynamic link flag

2002-01-27  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (editor_set_prop): add bonobo property
	for the title.

	* body.c (body_apply_cb): use gtk_html_set_title.

2002-01-23  Radek Doulik  <rodo@ximian.com>

	* added Text... and Paragraph... entries to menu

	* editor-control-factory.c (editor_api_command): use
	popup_show_at_cursor instead of popup_show

	* popup.c (popup_show_at_cursor): new function, shows popup menu
	at text cursor position
	(set_position): helper function for popup_show_at_cursor

2002-01-15  Ettore Perazzoli  <ettore@ximian.com>

	* spell.c (spell_create_language_menu): Just return if cd->dict is
	NIL.

2002-01-14  Radek Doulik  <rodo@ximian.com>

	* menubar.c: implemented Format/Page...

	* GNOME_GtkHTML_Editor.xml.in: added Format/Page...

2002-01-08  Radek Doulik  <rodo@ximian.com>

	* dialog.c (run_dialog): run dialog to make it modal

	* properties.c (gtk_html_edit_properties_dialog_new): set dialog parent

	* dialog.c (run_dialog): set dialog parent

2002-01-07  Radek Doulik  <rodo@ximian.com>

	* Makefile.am (GTKHTML_EDITOR_SOURCES_COMMON): removed link.[ch]

	* text.c (text_properties): place bold/italic/underline/strikeout
	in 2x2 table

	* body.c (body_properties): set pixmap entry preview to FALSE

2001-12-11  Radek Doulik  <rodo@ximian.com>

	* added new link dialogs to glade, added new percent option value
	in image editor - Follow, this makes dimension follow original
	aspect ratio and other dimension

2001-12-09  Radek Doulik  <rodo@ximian.com>

	* image.c (get_data): avoid calling g_strconcat with NULL as 1st
	parameter
	(set_ui): avoid setting NULL as text for entries
	(insert_or_apply): use Text color for non-linked images

2001-11-20  Radek Doulik  <rodo@ximian.com>

	* search.c (gtk_html_search_dialog_new): as below

	* replace.c (gtk_html_replace_dialog_new): don't limit entries to
	20 characters

	* properties.c (gtk_html_edit_properties_dialog_destroy): destroy
	dialog, if it wasn't yet

	* control-data.c (gtk_html_control_data_destroy): destroy
	properties_dialog

	* popup.c (property_dialog_show): set items to 0 before preparing
	dialog
	(show_prop_dialog): destroy properties_dialog before creating new one

2001-11-05  Radek Doulik  <rodo@ximian.com>

	* popup.c (remove_link): use html_engine_select_word_editable
	instead of html_engine_select_word
	(remove_link): restore saved selection

2001-10-30  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (editor_api_event): update for
	GTK_HTML_EDITOR_EVENT_COMMAND_... change

2001-10-29  Ettore Perazzoli  <ettore@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: Move select all in the CutCopyPaste
	placeholder with a separator before it.  Put a separator between
	the spell checker entry and the properties one.

2001-10-29  Larry Ewing  <lewing@ximian.com>

	* image.c (insert_or_apply): make urls that are not valid files
	insert properly.  They will not view inline until the composer is
	fixed but they will transfer in the html properly.

2001-10-29  Radek Doulik  <rodo@ximian.com>

	* spell.c (spell_add_to_session): added g_return_if_fail (word);
	(spell_add_to_personal): ditto
	(add_cb): ditto
	(ignore_cb): ditto
	(spell_add_to_session): ditto

	* popup.c (spell_add): check if word is non-NULL and don't leak it
	(spell_ignore): ditto

2001-10-28  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (init_corba): init gnome with the
	gtkhtml version so that we have a clue as to what version we have
	in bug reports.

	* link.c (link_apply_cb): get the positions for the insertion from
	the saved values.  Otherwise if people make a selection while the
	dialog is up we will lose the url.  Since people probably want to
	past the url from somewhere to the entry this is especially important.
	(link_properties): store the positions of the selection at
	the time the dialog was opened.  Add members to the structure to
	hold them. Fixes Ximian #13175.

2001-10-23  Larry Ewing  <lewing@ximian.com>

	* search.c (search): initialize regular, even on the first time
	they run the dialog.

2001-10-22  Larry Ewing  <lewing@ximian.com>

	* template.c (get_sample_html): don't leak the template html.

2001-10-16  Larry Ewing  <lewing@ximian.com>

	* persist-stream-impl.c (ps_impl_load): clean up exit code.

	* editor-control-factory.c (load_from_file): remove annoying
	warning.

2001-10-16  Radek Doulik  <rodo@ximian.com>

	* menubar.c (menubar_update_paragraph_alignment): block changes
	(paragraph_align_cb): check for blocked changes

2001-10-15  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (editor_init_painters): use points attribute

2001-10-09  Larry Ewing  <lewing@ximian.com>

	* html-stream-mem.c (html_stream_mem_write): remove debugging code
	that slipped in.

	* editor-control-factory.c (editor_control_init): make the
	intialized test here rather than up a level.
	make editor_api static.
	(url_requested_cb): try to load from file first since we don't
	want to close the stream then try to load the file to it.
	(load_from_file): return TRUE even if there is an error since it
	means we have closed the stream.

2001-10-08  Radek Doulik  <rodo@ximian.com>

	* popup.c (prepare_properties_and_menu): utf8-ize popup menu

	* spell.c (spell_set_language): new method

	* editor-control-factory.c (new_editor_api): set set_language
	method

2001-10-06  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: change the shortcut for Numbered
	List from n to l.

2001-10-05  Radek Doulik  <rodo@ximian.com>

	* image.c (insert_or_apply): use html_image_edit_set_url

2001-10-04  Larry Ewing  <lewing@ximian.com>

	* Editor.idl: add the new event type and update copyright.

	* Makefile.am (GTKHTML_EDITOR_SOURCES_COMMON): add
	html-stream-mem.[ch]

	* editor-control-factory.c (url_requested_cb): rework to pass the
	url request to the listener using send_event_stream.
	(send_event_stream): ask for the url through the listener.
	(init_corba): change the name to reflect the renaming from long
	ago.

	html-stream-mem.[ch]: add a stream mem implementation that also
	writes directly to the GtkHTMLStream.

2001-10-04  Tuomas Kuosmanen  <tigert@ximian.com>

	* template.c: Small beautification; Image frame should have the 
	text with a smaller font since it looks nicer and also you
	can fit more text that way.

2001-09-19  Radek Doulik  <rodo@ximian.com>

	* table.c: don't change rows/cols when changing templates

2001-09-18  Larry Ewing  <lewing@ximian.com>

	* image.c (image_widget): don't make widgets that we never
	actually use.

2001-09-14  Radek Doulik  <rodo@ximian.com>

	* spell.c (spell_check_dialog): show ok dialog when there aren't
	misspelled words

	* popup.c (prepare_properties_and_menu): renamed spell checking
	item to _("Check '%s' spelling..."), word

	* GNOME_GtkHTML_Editor.xml.in: renamed spell checking item to
	"_Spell check document..."

	* spell.c (check_next_word): check next word only when
	cd->spell_check_next is TRUE and there is next word to check

	* control-data.h: added spell_check_next flag

	* menubar.c (spell_check_cb): spell check whole document

	* spell.c (spell_check_document): on start, go to begin of
	document

2001-09-13  Radek Doulik  <rodo@ximian.com>

	* popup.c (spell_add): use html_engine_spell_check
	(spell_ignore): ditto

	* spell.c (check_next_word): update whole document, not just
	current paragraph

2001-09-12  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: fixed typo

2001-09-11  Larry Ewing  <lewing@ximian.com>

	* persist-stream-impl.c (save_receiver): if the stream is NIL set
	and exception.

2001-09-10  Zbigniew Chyla  <cyba@gnome.pl>

	Fixes #9522

	* search.c (search_cb): Use e_utf8_gtk_entry_get_text instead of
	gtk_entry_get_text (we need UTF-8 string).

2001-08-27  Radek Doulik  <rodo@ximian.com>

	* body.c (body_apply_cb): update to html_image_factory_register change

2001-08-26  Larry Ewing  <lewing@ximian.com>

	* menubar.c (menubar_update_format): add some missing formats.

2001-08-23  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: comment out separator.

	* menubar.c: add missing case for italic style.

2001-08-23  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: use properties menu icon

	* spell.c (check_next_word): always disable selection
	(spell_check_document): callback for each change to make own spell
	dictionary up-to-date

2001-08-21  Larry Ewing  <lewing@ximian.com>

	* menubar.c: warning cleanups.

	* GNOME_GtkHTML_Editor.xml.in: comment out subscript and
	superscript until they can be fixed.  Clean up accelerators.

	* persist-stream-impl.c (ps_impl_save): until we fix this properly
	always dirty the stream so that people will not lose their buffers.

	* toolbar.c (set_color_combo): remove inline.

	* menubar.c: hook up the align menu and test styles.

	* GNOME_GtkHTML_Editor.xml.in: more cleanups, accelerator changes.

2001-08-21  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: clean up the new menus and add commands.

	* menubar.c: make the format and size menus actually do something.

	* toolbar.c (font_size_changed): make block_font_style_change recursive.
	(insertion_font_style_changed_cb): the same.

2001-08-20  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: update more of the format options

	* menubar.c (menubar_update_paragraph_style): listen to the
	paragraph style changes from the html widget.

2001-08-20  Radek Doulik  <rodo@ximian.com>

	* popup.c (prepare_properties_and_menu): added spell checker
	submenu
	(spell_add): new callback
	(spell_ignore): ditto

2001-08-20  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: add new format menu item that
	mirror the editor toolbar functions.

	* menubar.c: add indent more/less verbs.
	(menubar_update_format): update more of the menu items for html
	more.

	* test-html-editor-control.c: add a placeholder and separator to
	the format menu.

	* toolbar.c: Change List item names, and make fix the align center
	tip.

2001-08-17  Radek Doulik  <rodo@ximian.com>

	* template.c: simplified text

2001-08-16  Anna Marie Dirks <anna@ximian.com> 

	* gtkhtml-editor-properties.glade : fixed spelling and capitalization
	inconsistencies. 

2001-08-16  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: use insert object icons meanwhile
	use new 16 pixel versions of search/search-and-replace menu icons

2001-08-15  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (paragraph_style_menu_item_update): added
	GTK_HTML_PARAGRAPH_STYLE_ITEMALPHA

	* GNOME_GtkHTML_Editor.xml.in: plug in new tigert's undo/redo
	icons

	* paragraph.c (paragraph_properties): like below

	* toolbar.c: added Alphabeta item

2001-08-13  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (html_button_pressed): take care of
	selection on button #3 press
	(html_button_pressed): check if clicked point is in selection

	* template.c: added hspace=10 to Note bulb.png

	* menubar.c (menubar_update_format): set sensitivity for InsertTable and
	InsertTemplate

	* popup.c (popup_show): initialize items to 0

	* editor-control-factory.c (html_button_pressed): jump to mouse
	cursor position on button 3
	(editor_api_event): set return value

2001-08-10  Anna Marie Dirks <anna@ximian.com>	
	*search.c : Changed the title of the Regex Find dialog to 
	"Find Regular Expression" as per bug #2658.

2001-08-10  Anna Marie Dirks <anna@ximian.com>
	* GNOME_GtkHTML_Editor.xml.in: Changed label for "Find Regex"
	to "Find Regular Expression (as per bug #2658 ). Also fixed duplicate
	accelerators (Properties and Paste were both using _P, while
	Undo and Cut were both using _U)

2001-08-10  Zbigniew Chyla  <cyba@gnome.pl>

	* popup.c (prepare_properties_and_menu): Marked two strings for
	translation.

2001-08-09  Radek Doulik  <rodo@ximian.com>

	* utils.c: new helper function
	(our_gnome_pixmap_entry_set_last_pixmap): new helper function
	(our_gnome_pixmap_entry_set_last_dir): ditto

	* test-html-editor-control.c (container_create): use grab-focus
	command

	* table.c (table_widget): fix for GnomePixmapEntry + set last dir

	* image.c (image_widget): new extracted function
	(image_insertion): use image_widget
	(image_properties): ditto
	(image_widget): fix for GnomePixmapEntry + set last dir

	* gtkhtml-editor-properties.glade: set history_id's

	* cell.c (cell_widget): like below

	* body.c (body_properties): fix for GnomePixmapEntry + set last
	dir

	* toolbar.c (unset_focus): call itself recursively

	* editor-control-factory.c (gtk_toolbar_focus): toolbar focus
	callback
	(set_frame_cb): workaround gtk+ bug

2001-08-03  Radek Doulik  <rodo@ximian.com>

	* test-html-editor-control.c (exit_cb): destroy main window rather
	than gtk_main_quit
	(app_destroy_cb): new destroy handler
	(app_delete_cb): new delete handler
	(container_create): use new handlers

	* editor-control-factory.c (send_event_str): new, extracted
	function
	(send_event_void): new helper function
	(editor_api_event): handle DELETE event, use new helper functions

	* popup.c (prepare_properties_and_menu): disabled plenty of items
	in plain mode
	disabled DEBUG, which I've enabled before by mistake

2001-08-02  Radek Doulik  <rodo@ximian.com>

	* table.c (fill_templates): new extracted function
	(table_insert_widget): use fill_templates

	* rule.c: use glade base dialog, added rule templates

	* gtkhtml-editor-properties.glade: added Rule page

2001-07-31  Radek Doulik  <rodo@ximian.com>

	* table.c: tuned template colors

	* engine.c (impl_get_paragraph_data): use CORBA_string_dup ("")
	instead of CORBA_string_alloc (0)

2001-07-30  Larry Ewing  <lewing@ximian.com>

	* Makefile.am (oaf_in_in_files): move
	GNOME_GtkHTML_Editor.oaf.in.in here so that it doesn't get
	installed (from Ettore).

2001-07-30  Radek Doulik  <rodo@ximian.com>

	* cell.c (fill_sample): make preview respect cell/row/column/table
	scope

2001-07-30  Tuomas Kuosmanen  <tigert@ximian.com>

	* table.c: Changed the color of the Note table template so it
	looks nicer.

2001-07-30  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: use new rule icons

2001-07-29  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: fix typos so that label is
	actually set.

2001-07-26  Radek Doulik  <rodo@ximian.com>

	* popup.c (delete_table): use gtk_html_command
	(delete_row): ditto
	(delete_column): ditto
	(delete_cell_contents): ditto

2001-07-25  Radek Doulik  <rodo@ximian.com>

	* table.c (table_apply_cb): updated for API changes

2001-07-24  Radek Doulik  <rodo@ximian.com>

	* popup.c (insert_table_cb): new menuitem callback
	(insert_row_above): ditto
	(insert_row_below): ditto
	(insert_column_before): ditto
	(insert_column_after): ditto
	(delete_table): ditto
	(delete_column): ditto
	(delete_row): ditto
	(delete_cell_contents): ditto
	(prepare_properties_and_menu): added table insert/delete submenus

	* menubar.c (insert_table): new extracted function

2001-07-23  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: use new search icons for toolbar

	* cell.c: added scope option menu
	(cell_apply_1): extracted helper function
	(cell_apply_row): new helper function
	(cell_apply_col): new helper function
	(cell_apply_table): new helper function
	(cell_apply_cb): use scope and new helper functions
	(cell_apply_row): test if cell belongs to the same table
	(cell_apply_col): likewise
	(cell_apply_table): likewise

1904-01-03  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (create_style_toolbar): let toolbar extend

2001-07-20  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: added 16 pixels wide insert
	image/link/table icons to menu

	* table.c (table_apply_cb): use html_engine_table_set_cols and
	html_engine_table_set_rows

	* cell.c (cell_widget): use UPPER_FIX

	* table.c (UPPER_FIX): fix for glade spin upper limit
	(table_widget): use UPPER_FIX
	(table_insert_widget): likewise

	* GNOME_GtkHTML_Editor.xml.in: use 16 pixels version for Menu and
	24 pixels version for Toolbar (Cut/Copy/Paste), remove stock
	references from commands

2001-07-20  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: use the cut/copy/paste icons from
	tigert, and Change the labels for insert* so that the accelerator
	doesn't show.

2001-07-19  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml.in: use those realy nice icons from
	Jakub

	* Makefile.am (EXTRA_DIST): added GNOME_GtkHTML_Editor.xml.in
	(GNOME_GtkHTML_Editor.xml): generate from .in

2001-07-17  Radek Doulik  <rodo@ximian.com>

	* search.c (search): added title
	(gtk_html_search_dialog_new): removed title parameter

	* replace.c (replace): added title

	* dialog.c (run_dialog): added title parameter

	* menubar.c (search_cb): non regex
	(search_regex_cb): regex

	* properties.c (switch_page): check for d->dialog
	(destroy_dialog): new signal handler, sets d->dialog to NULL

2001-07-13  Larry Ewing  <lewing@ximian.com>

	* popup.c: disable debug #define and wrap the disabled functions
	in the #ifdef.  This shouldn't be enabled by default.  

	* persist-file-impl.c (persist_file_impl_new): fix a stupid error
	in the previous change.

2001-07-09  Larry Ewing  <lewing@ximian.com>

	* persist-stream-impl.c (persist_stream_impl_new): ref the html
	widget.
	(ps_destroy): unref the html widget.

	* persist-file-impl.c (persist_file_impl_new): ref the html widget
	so that if the control goes away we still have a valid handle.
	(pf_destroy): unref the html widget.
	
2001-07-02  Dan Winship  <danw@ximian.com>

	* persist-file-impl.c (impl_save): Add O_TRUNC to the open() flags
	so saving over an existing file doesn't leave garbage at the end.
	(save_receiver): Fix this to not keep rewriting the same data over
	and over in the case of a partial write.

2001-06-26  JP Rosevear  <jpr@ximian.com>

	* Makefile.am: Remove non-existent file

2001-06-26  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.h (editor_control_factory): obsolete

	* editor-control-factory.c: on #ifdef basis build in both cases -
	shlib or exe component

	* main.c: obsolete

	* GNOME_GtkHTML_Editor.oaf.in.in: new file, uses SHLIB variables

2001-06-13  Radek Doulik  <rodo@ximian.com>

	* properties.c (gtk_html_edit_properties_dialog_new): set default
	button to 0 (Insert/Ok)

	* cell.c: use disable_change

	* table.c (get_data): set has_width to FALSE if needed

	* rule.c (rule_widget): show rule widget

	* table.c: use disable_change

2001-05-30  Radek Doulik  <rodo@ximian.com>

	* cell.c (get_data): get width

2001-05-29  Larry Ewing  <lewing@ximian.com>

	* control-data.h: add placeholders for the persist interfaces.

	* editor-control-factory.c (editor_control_construct): initialize
	the persist interfaces.
	
2001-05-29  Radek Doulik  <rodo@ximian.com>

	* Makefile.am: removed dependency on libglade-xgettext
	(gnome_gtkhtml_editor_SOURCES): removed
	gtkhtml-editor-properties.c

2001-05-24  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml: split edit menu to placeholders

	* replaced HTML_VALIGN_CENTER with HTML_VALIGN_MIDDLE everywhere

	* image.c: replaced center align with middle

2001-05-22  Radek Doulik  <rodo@ximian.com>

	* table.c: added disable_change flag
	(set_ui): use disable_change flag

	* engine.c (impl_get_paragraph_data): dup value on return (pointed
	out by mla@1012surf.net)

2001-05-17  Radek Doulik  <rodo@ximian.com>

	* table.c (table_widget): use engine's window to allocate color

2001-05-15  Radek Doulik  <rodo@ximian.com>

	* Makefile.am (gtkhtml-editor-properties.h): added
	gtkhtml-editor-properties.c:	gtkhtml-editor-properties.h
	dependency

	* added Format/HTML mode menu item to test application

2001-05-12  Almer S. Tigelaar  <almer@gnome.org>

	* text.c (color_changed): Adjust signal callback for new
	by_user flag.

	* body.c (color_changed): Idem and don't change the color
	if we changed it ourselves programatically.

	* toolbar.c (color_changed): Same as for body.c.

2001-05-11  Gediminas Paulauskas <menesis@delfi.lt>

	* body.c, paragraph.c, popup.c: marked 30 strings for translation.

	* test-html-editor-control.c: initialize gettext to test
	translations also.

2001-05-09  Larry Ewing  <lewing@ximian.com>

	* GNOME_GtkHTML_Editor.xml: connect the menu item.

	* menubar.c (select_all_cb): make the new verb.

2001-05-08  Radek Doulik  <rodo@ximian.com>

	* search.c (gtk_html_search_dialog_new): s/backward search/backward

	* menubar.c: verb EditFindRegex, not EditFindRegexp

2001-05-07  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml: changed some tips as suggested by
	Aaron

2001-04-25  Radek Doulik  <rodo@ximian.com>

	* editor-control-factory.c (editor_set_format): use
	schedule_redraw

	* engine.c (impl_get_paragraph_data): update for data type change
	(impl_set_paragraph_data): likewise
	(impl_set_object_data_by_type): likewise
	(impl_run_command): return boolean value
	(impl_insert_html): new method implementation
	(impl_search_by_data): ditto
	(impl_freeze): ditto
	(impl_thaw): ditto
	(impl_undo_begin): ditto
	(impl_undo_end): ditto

	* Editor.idl: added new methods, changed data type to string

2001-04-20  Radek Doulik  <rodo@ximian.com>

	* engine.c (impl_run_command): use return value from gtk_html_editor_command

2001-04-23  Jon K Hellan  <hellan@acm.org>

	* editor-control-factory.c (editor_control_factory): Make it
	compile again.

2001-04-23  Miguel de Icaza  <miguel@ximian.com>

	* editor-control-factory.c: Do not attempt to typecast NULL
	value.

2001-04-18  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (setup_color_combo): as below

	* text.c (text_properties): as below

	* body.c (ADD_COLOR): use cd as context for color group (suggested
	by Jody)

2001-04-17  Radek Doulik  <rodo@ximian.com>

        * toolbar.c (setup_color_combo): as below

        * text.c (text_properties): as below

        * body.c (ADD_COLOR): updated color_combo_new calling

2001-04-17  Larry Ewing  <lewing@ximian.com>

	* control-data.h: add indent and unindent buttons.

	* toolbar.c (create_style_toolbar): store the indent and unindent
	buttons.
	(toolbar_item_update_sensitivity): update the list of valid
	widgets.
	(paragraph_style_menu_item_update): add more sensitive styles.

2001-04-16  Larry Ewing  <lewing@ximian.com>

	* toolbar.c (toolbar_item_update_sensitivity): fix prototype.
	(paragraph_style_option_menu_set_mode): add cast.

	* engine.c (impl_is_previous_paragraph_empty): fix cast.

2001-04-15  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (editor_control_construct): hold
	a reference to the control in the control_data.

	* toolbar.h (toolbar_update_format): add prototype.

	* toolbar.c (paragraph_style_menu_item_update): forall function to
	update the sensitivity of the menu item based on the mode.
	(paragraph_style_option_menu_set_mode): update them option menu
	sensitivity.
	(create_style_toolbar): store the option menu in the control data.
	(toolbar_item_update_sensitivity): forall function to set
	everything but the paragraph style widget insensitive.
	(toolbar_update_format): entry point to update the toolbar
	during format mode changes.

	* menubar.c (menubar_update_format): make the insertion items senstive
	of insensitive depending on the mode.

	* menubar.h (menubar_update_format): add prototype.

	* control-data.h: add pointer for paragraph option menu and
	control.
	
	* control-data.c (gtk_html_control_data_new): initialize new
	members.
	
2001-04-14  Larry Ewing  <lewing@ximian.com>

	* editor-control-factory.c (set_frame_cb): return if the frame is
	NIL.

	* control-data.c (gtk_html_control_data_destroy): unref the
	painters when we are destroyed.

	* editor-control-factory.c (editor_init_painters): move the
	painter initialization out of the logic, and make sure we ref both
	painters.

2001-04-14  Michael Meeks  <michael@ximian.com>

	* Makefile.am (dist-hook): remove built files from package.

2001-04-12  Radek Doulik  <rodo@ximian.com>

	* toolbar.c (load_done): set_color_combo only if html widget
	already realized else wait for realization

	* persist-stream-impl.c (load): write only buffers of length > 0

	* editor-control-factory.c (editor_set_format): realize only if
	html->engine->window is non NULL

2001-03-29  Radek Doulik  <rodo@ximian.com>

	* GNOME_GtkHTML_Editor.xml: remove properties accelerator as we
	already use M-Return for object properties

	* body.c (ADD_COLOR): set right default color and set combo color
	to actual color

	* toolbar.c (set_color_combo): new helper function
	(realize_engine): new signal handler
	(load_done): ditto
	(setup_color_combo): take care of right setting of actual combo
	color

	* test-html-editor-control.c (main): load file given as last
	parameter
	(load_file): new helper function

	* engine.c (impl_is_paragraph_empty): use html_clueflow_is_empty
	(impl_is_previous_paragraph_empty): ditto

	* body.c (ADD_COLOR): use default color for automatic

	* toolbar.c (unset_focus): new helper function
	(setup_color_combo): unset focus for whole color combo

2001-03-28  Larry Ewing  <lewing@ximian.com>

	* body.c (color_changed): return if the color is null.

	* editor-control-factory.c (editor_set_format): slave the painters
	color set and cleanup warnings.
	(edit_set_format): more warning cleanups.

2001-03-27  Larry Ewing  <lewing@ximian.com>

	* control-data.h: add format_html and gdk and plain painters.

	* control-data.c (gtk_html_control_data_new): initialize
	format_html and gdk and plain painters.

	* editor-control-factory.c (editor_control_construct): add a
	property bag with the FormatHTML property.
	(editor_set_prop): property bag set funtion.
	(editor_get_prop): proprty bag get function.
	(editor_set_format): toggle the painter based on the mode setting.

2001-03-16  Kjartan Maraas  <kmaraas@gnome.org>

	* Makefile.am: Hook up the .oaf.in build stuff and remove
	gnorba stuff since that is obsolete.
	
2001-03-14  Kjartan Maraas  <kmaraas@gnome.org>

	* popup.c: Added #include <config.h>.
	
2001-03-06  Miguel de Icaza  <miguel@ximian.com>

	* GNOME_GtkHTML_Editor.xml: Adjust to new layout (Insert of
	menu/Component/Insert, menu/Insert/Component). 

2001-02-19    <rodo@ximian.com>

	* Makefile.am: fix idl generating includes

2001-02-12  Radek Doulik  <rodo@ximian.com>

	* image.c (insert_or_apply): fix image width/height and percentage
	(image_properties): properly recognize file:// and file:

2001-02-07  Kjartan Maraas  <kmaraas@gnome.org>

	* GNOME_GtkHTML_Editor.oaf.in: Added this. Not hooked up yet.
	
2001-01-24  Larry Ewing  <lewing@ximian.com>

	* persist-file-impl.c (impl_save): cast function to fix warning.

2001-01-24  Radek Doulik  <rodo@helixcode.com>

	* main.c: as below

	* test-html-editor-control.c: use ORB from oaf_init in bonobo_init

2001-01-23  Radek Doulik  <rodo@helixcode.com>

	* Makefile.am (EXTRA_DIST): added tt.xpm to EXTRA_DIST

2001-01-23  Michael Meeks  <michael@helixcode.com>

	* GNOME_GtkHTML_Editor.xml: put Insert menu inside
	/menu/Component instead of overriding this placeholder with an
	item.

2001-01-23  Radek Doulik  <rodo@helixcode.com>

	* toolbar.c: added TT check button (toggles fixed font style),

2001-01-17  Larry Ewing  <lewing@helixcode.com>

	* toolbar.c: change the tooltip wording slightly to match gnumeric
	more closely.

	* GNOME_GtkHTML_Editor.xml: fix up redo wording.

2001-01-16  Radek Doulik  <rodo@helixcode.com>

	* toolbar.c (color_changed): use gtk_html_set_color instead of
	engine method

	* text.c (text_apply_cb): use gtk_html_set_font_style rather than
	engine method
	(text_apply_cb): likewise for set_color

2001-01-12  Radek Doulik  <rodo@helixcode.com>

	* test-html-editor-control.c (container_create): move test
	control == NULL

2001-01-08  Radek Doulik  <rodo@helixcode.com>

	* engine.c (par_is_empty): fixed, it was returning wrong value for
	par without slaves

2001-01-05  Radek Doulik  <rodo@helixcode.com>

	* menubar.c (properties_cb): call right capplet, Frdric Crozat
	fixed that, thanks

2001-01-04  Radek Doulik  <rodo@helixcode.com>

	* popup.c: update to type changes

	* editor-control-factory.c: update to type changes

2000-12-15  Kjartan Maraas  <kmaraas@gnome.org>

	* image.c (ADD_ITEM),(ADD_VAL): Put the gettext stuff out of the macros
	to make it all work even.
	* rule.c (ADD_ITEM),(ADD_VAL): Same here.
	
2000-12-15  Larry Ewing  <lewing@helixcode.com>

	* image.c (ADD_ITEM): use the right gettext function because we
	are inside a macro.  (patch from kmaraas)

2000-12-14  Larry Ewing  <lewing@helixcode.com>

	* editor-control-factory.c (editor_api_create_input_line): make
	the cast even if it isn't strickly needed.

	* persist-stream-impl.c (save): add cast to cleanup warning.
	(load): bonobo streams are always utf-8 so set the charset
	explicitly.

2000-12-14  Kjartan Maraas  <kmaraas@gnome.org>

	* *.c: Added #include <config.h> to all .c files. And added
	calls to bindtextdomain() and textdomain() in the html-editor
	main() function.
	
2000-12-13  Radek Doulik  <rodo@helixcode.com>

	* GNOME_GtkHTML_Editor.xml: redone shortcuts
	use placeholder component for Insert menu

2000-12-13  Iain Holmes  <iain@helixcode.com>

	* GNOME_GtkHTML_Editor.xml: Added _label attributes for each of 
	the toolbar buttons.

2000-12-12  Radek Doulik  <rodo@helixcode.com>

	* text.c (color_changed): take care of automatic color
	(text_properties): use HTMLTextColor as automatic color
	remember HTMLColor instead of GdkColor

	* toolbar.c (setup_color_combo): use HTMLTextColor as automatic
	color
	(color_changed): take care of automatic color

	* test-html-editor-control.c: added toolbar

	* GNOME_GtkHTML_Editor.xml: added toolbar items

2000-12-10 Anna Marie Dirks  <anna@helixcode.com>
	* html-editor-control.xml: Changed keybindings to comply 
	with GNOME standards; removed unnecessary bindings and all uses
	of "Alt". 
	
2000-12-07  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (editor_api_create_input_line): new
	function for editor API

2000-12-07  Ettore Perazzoli  <ettore@helixcode.com>

	* spell.c (spell_suggestion_request): Use an EScrollFrame instead
	of a GtkScrolledWindow, and set the shadow type to `E_SHADOW_IN'.
	* utils.c (sample_frame): Likewise.
	* editor-control-factory.c (set_frame_cb): Likewise.

2000-12-07  Radek Doulik  <rodo@helixcode.com>

	* menubar.c (menubar_setup): html-editor-control renamed to
	GNOME_GtkHTML_Editor

	* engine.c (impl_set_listener): updated to
	IDL:GNOME/GtkHTML/Editor/Listener:1.0

	* GNOME_GtkHTML_Editor.oafinfo: updated for gnome-gtkhtml-editor

	* Makefile.am: renamed html-editor-control to gnome-gtkhtml-editor

	* test-html-editor-control.c (HTML_EDITOR_CONTROL_ID): updated

	* editor-control-factory.c (CONTROL_FACTORY_ID): updated

	* Makefile.am: updated for IDL and OAF changes

	* Editor.idl: renamed from HTMLEditor.idl

	* GNOME_GtkHTML_Editor.oafinfo: changed OAFIIDs, renamed from
	html-editor-control.oafinfo

2000-12-03  Radek Doulik  <rodo@helixcode.com>

	* spell.c (DICTIONARY_IID): updated to changed IID

2000-12-02  Radek Doulik  <rodo@helixcode.com>

	* toolbar.c: use N_ instead of _ for paragraph_style_items
	(setup_paragraph_style_option_menu): use _() here


2000-11-22  Radek Doulik  <rodo@helixcode.com>

	* spell.c: check for cd->dict

	* editor-control-factory.c (editor_control_construct): set editor
	api always

	* image.c (insert_or_apply): use file:// rather than file:

2000-11-15  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (load_from_corba): update namespace

	* engine.c (impl_set_listener): update namespace

	* updated to API changes

	* HTMLEditor.idl: moved to GNOME namespace

2000-11-14  Radek Doulik  <rodo@helixcode.com>

	* engine.c (impl_run_command): renamed

	* HTMLEditor.idl: changed command to runCommand

	* engine.c: updated to API changes

	* HTMLEditor.idl: StudlyCapsulized

	* spell.c: updated to API changes

	* Spell.idl: copied updated Spell API

2000-11-13  Radek Doulik  <rodo@helixcode.com>

	* engine.c (impl_paragraph_previous_is_empty): new method impl
	(impl_paragraph_is_empty): likewise
	(par_is_empty): helper function, tests if paragraph is empty

	* HTMLEditor.idl: added new methods used while replying

2000-11-10  Radek Doulik  <rodo@helixcode.com>

	* image.c (insert_or_apply): fixed compilation

2000-11-08  Anna Marie Dirks  <anna@helixcode.com> 
        * html-editor-control.xml:  Added keyboard bindings to the composer.

2000-11-04  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c
	(wait_for_bonobo_patch__bonobo_arg_type_to_gtk): new function, it
	should go to bonobo

2000-11-02  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (editor_api_event): updated to API
	change

	* HTMLEditor.idl: changed event definition, added return value any
	and also change arg parameter to type any as any could contain
	sequence (suggested by Miguel)

	* Makefile.am: install HTMLEditor.idl

2000-10-31  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (editor_control_construct): extracted
	function, added Engine iface
	(editor_api_event): new method, deliver editor events to
	Engine::Listener

	* control-data.h: added HTMLEditorEngine to GtkHTMLControlData

	* Makefile.am: added engine.[ch]

	* HTMLEditor.idl: added new ifaces - Engine, Listener

	* engine.[ch]: new files, implementing HTMLEditor::Engine object

	* toolbar.c (editor_toolbar_indent_cb): updated to API changes
	(editor_toolbar_unindent_cb): likewise

2000-10-27  Maciej Stachowiak  <mjs@eazel.com>

	* html-editor-control.oafinfo: Made list of interfaces and list of
	mime types more complete.

2000-10-25  Federico Mena Quintero  <federico@helixcode.com>

	* persist-stream-impl.c (save_receiver): Bonobo::Stream::write()
	no longer returns the number of bytes written.

2000-10-25  Radek Doulik  <rodo@helixcode.com>

	* popup.c (popup_show): updated, event could be NULL
	(popup_show): clear cd->properties_types before refilling
	(prepare_properties_and_menu): extracted function
	(property_dialog_show): new function
	(show_prop_dialog): extracted function

	* editor-control-factory.c (new_editor_api): updated to EditorAPI

2000-10-24  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (set_frame_cb): set vertical scrollbar
	policy to always

	* image.c (value_changed): new signal handler for adjustments

	* Makefile.am (html_editor_control_SOURCES): removed
	gtk-combo-box.[ch] as they are not needed anymore, we use widgets
	from GAL now

2000-10-20  Michael Meeks  <michael@helixcode.com>

	* test-html-editor-control.c (container_create): re-write for new
	UI handler.

	* editor-control-factory.c (set_frame_cb): remove toolbar_setup.

	* toolbar.c (editor_toolbar_cut_cb, editor_toolbar_copy_cb),
	(editor_toolbar_paste_cb, editor_toolbar_undo_cb, editor_toolbar_redo_cb),
	(toolbar_setup): kill, were duplicated in the menu code; now each is a verb.
	toolbar_info: remove

	* html-editor-control.xml: add the toolbar.

	* test-html-editor-control.c (load_through_persist_stream): update to
	Dietmar's new API.

2000-10-20  Radek Doulik  <rodo@helixcode.com>

	* rule.c (fill_sample): set bg for sample view

	* text.c (fill_sample): set bg for sample view

2000-10-17  Radek Doulik  <rodo@helixcode.com>

	* properties.c (gtk_html_edit_properties_dialog_show): don't show
	notebook tabs and border if there is less than two notebook pages

	* text.c (text_properties): use sample_frame, added sample frame
	(fill_sample): new helper function
	(text_properties): changed style handling
	use fill_data all over place

	* utils.c (sample_frame): new helper function

	* rule.c (fill_sample): use gtk_html_load_from_string

2000-10-12  Radek Doulik  <rodo@helixcode.com>

	* popup.c (prop_dialog): added rule property type
	(popup_show): likewise

	* control-data.h: removed remaining object properties dialogs

	* control-data.c (gtk_html_control_data_destroy): forgot about
	rule dialog

	* image.h: removed some old stuff

	* rule.[ch]: rewritten to use properies dialog

	* menubar.c (insert_rule_cb): use new rule properties

	* editor-control-factory.c (release): added rule propeties

	* properties.h: added rule to GtkHTMLEditPropertyType

	* image.c: updated image dialog design with Anna improvements,
	fixed properties_changed handling

2000-10-11  Radek Doulik  <rodo@helixcode.com>

	* implemented GtkHTMLEditSpellAPI, use gnome-spell
	component

2000-10-09  Larry Ewing  <lewing@helixcode.com>

	* resolver.c (resolver_load_from_file): remove unused variable.

	* test-html-editor-control.c (container_create): add cast.

2000-10-09  Michael Meeks  <michael@helixcode.com>

	* html-editor-control.xml: cmd/widgetify; needs Bonobo HEAD.

2000-10-06  Larry Ewing  <lewing@helixcode.com>

	* resolver.c (impl_HTMLEditor_Resolver_loadURL): actually listen
	to the results of the file load and init and free the environment.
	This makes it very clear that we need more exception types for the
	resolver.

	* editor-control-factory.c (load_from_corba): clean up the login a
	little.
	
2000-10-06  Radek Doulik  <rodo@helixcode.com>

	* menubar.c (insert_image_cb): added link properties while
	inserting image
	(insert_link_cb): added text properties while inserting link

2000-10-06  Larry Ewing  <lewing@helixcode.com>

	* resolver.c (impl_HTMLEditor_Resolver_loadURL): only set the
	exception if we don't know how to open the file.

	* resolver-progressive-impl.c (resolver_sink_add_data): actually
	write the incomming data to the stream.

	* editor-control-factory.c (load_from_corba): use proper return
	valuse if the corba loading is successfull.

2000-10-06  Radek Doulik  <rodo@helixcode.com>

	* properties.c: add title to GtkHTMLEditPropertiesDialog
	(gtk_html_edit_properties_dialog_new): added title parameter
	(switch_page): new signal

	* menubar.c (insert_image_cb): use GTK_HTML_EDIT_PROPERTY_IMAGE,
	not GTK_HTML_EDIT_PROPERTY_LINK
	(insert_image_cb): fix title
	(insert_link_cb): fix title

	* popup.c (popup_show): use GTK_HTML_EDIT_PROPERTY_IMAGE for image
	instead of GTK_HTML_EDIT_PROPERTY_PARAGRAPH

	* image.c (image_properties): don't use cd->obj here, use
	cd->html->engine->cursor->object instead
	added HTMLImage   *image; to GtkHTMLEditImageProperties
	(insert_or_apply): use GtkHTMLEditImageProperties::image here
	removed old code 

2000-10-06  Larry Ewing  <lewing@helixcode.com>

	* resolver-progressive-impl.[ch]: files added. The start of the
	progressive data sink implmentation.

	* resolver.c (impl_HTMLEditor_Resolver_loadURL): change prototype
	to match the new idl, and add some test code to try out the sink
	interface.

	* editor-control-factory.c (load_from_corba): pass the html widget
	along too.
	(url_requested_cb): pass the html widget.
	(load_from_corba): create the sink add pass it in the loadURL
	call.

	* Makefile.am (html_editor_control_SOURCES): add
	resolver-progressive-impl.[ch]

	* HTMLEditor.idl: Change the loadURL prototype to use the
	ProgressiveDataSink interface.

2000-10-05  Larry Ewing  <lewing@helixcode.com>

	* test-html-editor-control.c (container_create): attach the
	resolver to the control frame now that the component expects it
	there.

	* editor-control-factory.c (load_from_corba): fix the extreme
	brokeness involving the uih.  Now we try to resolve the interface
	through the control frame.

2000-10-05  Michael Meeks  <michael@helixcode.com>

	* toolbar.c (toolbar_setup): upd.

	* menubar.c (menubar_setup): upd.

2000-10-04  Michael Meeks  <michael@helixcode.com>

	* menubar.c (menubar_setup): simplify with new helper.

2000-09-21  Michael Meeks  <michael@helixcode.com>

	* editor-control-factory.c (set_frame_cb): upd.

2000-09-28  Larry Ewing  <lewing@helixcode.com>

	* Makefile.am: fix broken referencing of html-editor-control.xml

2000-09-26  Radek Doulik  <rodo@helixcode.com>

	* menubar.c (menubar_setup): use BonoboUINode instead of xmlNode,
	because of Bonobo changes

	* editor-control-factory.c: add ref counting, unfortunately
	control isn't destroyed right way and we don't get destroy signal
	from it

2000-09-24  Larry Ewing  <lewing@helixcode.com>

	* editor-control-factory.c (load_from_corba): 
	(set_frame_cb): change prototype to Bonobo_Unknown so that things
	build with the latest bonobo.

2000-09-16  Michael Meeks  <michael@helixcode.com>

	* Makefile.am (-DGNOMEDATADIR): add.

	* menubar.c (menubar_setup): use it.

2000-09-14  Radek Doulik  <rodo@helixcode.com>

	* menubar.c (properties_cb): run editor capplet

2000-09-07  Michael Meeks  <michael@helixcode.com>

	* Makefile.am: add .xml install

	* menubar.c: Update for new UI code.

	* test-html-editor-control.c: Update for new UI code

2000-09-08  Radek Doulik  <rodo@helixcode.com>

	* toolbar.c (setup_font_size_option_menu): hide +5 size

2000-08-18  Larry Ewing  <lewing@helixcode.com>

	* toolbar.c (paragraph_style_menu_item_activated_cb): remove
	warning that printed out the value of the new style.

2000-08-14  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (html_button_pressed): use
	Ctrl-Button1-2xclick for object properties

2000-08-13  Ettore Perazzoli  <ettore@helixcode.com>

	* spell.c (select_row): Don't segfault on a NULL event, as stupid
	GtkClist does synthesize that.

2000-08-10  Radek Doulik  <rodo@helixcode.com>

	* popup.c (spell_suggest): added suggestions to popup menu

2000-08-10  Larry Ewing  <lewing@helixcode.com>

	* editor-control-factory.c (load_from_corba): fix some brokeness
	and warnings, and comment out debug messages.

	* resolver.c: fix some warnings.

2000-08-10  Radek Doulik  <rodo@helixcode.com>

	* spell.c (destroy): do replacing only if replacement selected
	(select_row): added select row handler - now replacement could be
	selected by mouse from suggestions list

2000-07-28  Ettore Perazzoli  <ettore@helixcode.com>

	* Makefile.am: Updated so that it works when bonobo is installed
	on a different prefix.

2000-07-24  Larry Ewing  <lewing@helixcode.com>

	Makefile.am: generate the stubs.
	
	* HTMLEditor.idl, resolver.c, resolver.h: added for the trial
	corba interface.
	
	* editor-control-factory.c (load_from_corba): use the corba
	resolver.

2000-07-21  Larry Ewing  <lewing@helixcode.com>

	* editor-control-factory.c (load_from_file): close the stream and
	the file when we are done with it.

	* popup.c (popup_show): remove the incorrect dereferences of the
	url and target strings in the test to stop the crashes.

2000-07-20  Radek Doulik  <rodo@helixcode.com>

	* spell.c: new file, popup window with spell checker suggestions

	* spell.h: new file

2000-07-17  Pavel Cisler  <pavel@eazel.com>

	* Makefile.am:
	Fix a hard dependency on pspell, making it build if you don't have
	pspell installed.
	Radek broke that earlier today and forgot to add a ChangeLog entry 
	about it.

2000-07-15  Larry Ewing  <lewing@helixcode.com>

	* editor-control-factory.c (editor_control_factory): connect to
	url_requested.
	(url_requested_cb): try to load_from_file.
	(load_from_file): rough code to load file to stream.

2000-07-11  Radek Doulik  <rodo@helixcode.com>

	* toolbar.c (setup_font_size_option_menu): added font size option
	menu + another one insertion style changed cb

2000-07-10  Radek Doulik  <rodo@helixcode.com>

	* toolbar.c (toolbar_setup): it now adds some commands to uih toolbar
	(toolbar_style): old one toolbar is created here, also uses hbox,
	so it doesn't eat all space
	- removed ToolbarData structure, store this info in ControlData
	- update all callbacks to use ControlData
	- add Undo/Redo to toolbar

	* test-html-editor-control.c (container_create): create toolbar here

2000-07-10  Larry Ewing  <lewing@helixcode.com>

	* editor-control-factory.c (release): initialize the default
	edit property type.

2000-07-08  Dan Winship  <danw@helixcode.com>

	* menubar.c (menubar_setup): Redo this a bit so it will use the
	container's existing "Edit" menu rather than creating its own new
	one. (So that it ends up ordered correctly.)

2000-07-07  Radek Doulik  <rodo@helixcode.com>

	* body.c (body_apply_cb): implemented bg pixmap setting

	* toolbar.c (setup_color_option_menu): set relief for color
	selection combo on toolbar by gnome preferences

2000-07-06  Radek Doulik  <rodo@helixcode.com>

	* toolbar.c (color_changed_cb): added signal hadler for
	insertion_color_changed signal

	* main.c (main): call gconf_init here instead of gtkhtmllib_init

	* toolbar.c (setup_color_option_menu): new function
	add color selection to toolbar
	
	* body.c (body_properties): use color_table_new

	* text.c (text_properties): use color_table_new

	* utils.c: new file
	(color_table_new): new helper function for color table creation

	* utils.h: new file

	* image.c (insert_or_apply): new helper function
	(image_apply_cb): use insert_or_apply
	(image_insert_cb): likewise

2000-07-05  Radek Doulik  <rodo@helixcode.com>

	* properties.c (gtk_html_edit_properties_dialog_new): added insert
	parameter, which tells if we want insertion or properties dialog

	* image.c (image_insert_cb): filled with old dialog code
	(image_insertion): new function, creates insertion dialog
	(image_properties): use image_insertion as base

	* link.c (link_properties): added clear button to clear URL

2000-07-03  Michael Meeks  <michael@helixcode.com>

	* persist-stream-impl.c (load): update for new read.

2000-07-04  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (html_button_pressed): updated to use
	new properties dialog, now text/link/image could be 2x clicked
	(html_button_pressed): use release event instead of directly
	starting properties dialog (we wand release event of html widget
	to be processed and it wasn't because of properties dialog
	modality)
	(html_button_pressed): use object at under cursor rather than
	engine->cursor->object

2000-07-01  Radek Doulik  <rodo@helixcode.com>

	* menubar.c (insert_link_cb): rewritten using properties dialog

	* popup.c (remove_link): use cd->html->engine->cursor->object
	instead of cd->obj which could be unset

2000-06-30  Radek Doulik  <rodo@helixcode.com>

	* link.c (link_properties): fix case when we get NULL url
	
2000-06-23  Radek Doulik  <rodo@helixcode.com>

	* text.c (text_properties): set initial color
	(text_properties): fixed style setting

2000-06-21  Radek Doulik  <rodo@helixcode.com>

	* popup.c (remove_link): it now uses html_engine_remove_link and
	html_engine_remove_link_object

	* link.c (button_link_cb): use rewritten html_engine_insert_link

	* popup.c (popup_show): always add insert link to popup menu

	* link.c: remove text entry, we want only set link

2000-06-20  Radek Doulik  <rodo@helixcode.com>

	* popup.c (popup_show): added insert link to popup menu when
	selection is active

2000-06-17  Ettore Perazzoli  <ettore@helixcode.com>

	* editor-control-factory.c (editor_control_factory): Create a
	PersistFile interface and add it to the control.

	* test-html-editor-control.c: `OP_LOAD' and `OP_SAVE' replaced by
	`OP_SAVE_THROUGH_PERSIST_STREAM',
	`OP_LOAD_THROUGH_PERSIST_STREAM', `OP_SAVE_THROUGH_PERSIST_FILE',
	`OP_LOAD_THROUGH_PERSIST_FILE'.  New separate menu items to
	save/load using the PersistStream or PersistFile interface.
	(save_through_persist_stream): Renamed from `save_through_stream'.
	(load_through_persist_stream): Renamed from `load_through_stream'.
	(save_through_persist_file): New.
	(save_through_persist_stream): New.
	(file_selection_ok_cb): Handle the new `OP_*' types.
	(open_through_persist_stream_cb): Renamed from `open_.
	(save_through_presist_stream_cb): Renamed from `save_as_cb'.
	(open_through_persist_file_cb): New.
	(save_through_persist_file_cb): New.

	* persist-file-impl.c: New.
	* persist-file-impl.h: New.

	* persist-stream-impl.c (load): Make non editable before feeding
	data, and make editable again after it.

2000-06-14  Radek Doulik  <rodo@helixcode.com>

	* menubar.c (properties): properties callback - runs capplet

	* Makefile.am (LDADD): removed -lgconf-gtk which was hack and is
	fixed now

	* main.c (main): call gtkhtmllib_init

2000-06-13  Radek Doulik  <rodo@helixcode.com>

	* rule.c (combo_align_cb): use _() on align
	(gtk_html_rule_dialog_new): use N_() instead of _()
	(gtk_html_rule_dialog_new): use _() for name and align

2000-06-10  Ariel Rios  <ariel@arcavia.com>

	* rule.c (combo_align_cb): Function for checking the desired
	alignment option.
	(button_rule_cb): We now use the shade and halign values from the
	code instead.
	(gtk_html_rule_dialog_new): We now point the content of the align
	const array unto the structure.  Added the signal for the check
	button.  The rule dialog is complete.
	
2000-06-10  Ariel Rios  <ariel@arcavia.com>
	
	* popup.c (prop): In the HTML_TYPE_RULE case we now pass the
	object as a parameter to rule_edit.

	* rule.c (rule_insert): Added reference to the new dialog variable
	rule and set it to NULL.
	(rule_edit): Added new HTMLRule parameter and then we pass it to
	GtkHMTLDialog.  We now also correctly set the values taken from
	the the HTMLRule object.
	(set_get_values): Replaces the old get_values function.
	(button_rule_cb): We now make distinction between inserting and
	object and editing it.
	(button_shade_cb): New call back for toggling the shade state.
	(combo_align_cb): New call back for selecting the type of rule
	alignment.

	* rule.h (rule_edit): Add HTMLRule as a parameter.
	
2000-06-09  Ariel Rios  <ariel@arcavia.com>

	* rule.c (gtk_html_rule_dialog_new): Some modifications to the
	dialog to make to look cooler and nicer.

	* popup.c (prop): Added reference so we can edit rule type. 
	(popup_show): Ditto.

2000-06-09  Ariel Rios  <ariel@arcavia.com>
	
	* Makefile.am: Include rule.c and rule.h
	
	* menubar.c: Added rule as as a member of subtree.
	(insert_rule_cb): Added.

	* control-data.c (gtk_html_control_data_destroy): Add conditional
	for rule_dialog.

	* control-data.h: Add reference to rule_dialog in
	GtkHTMLControlData.

	* rule.c: New file that contains Rule Dialog support.
	(get_values): Get the integer from the spin buttons.
	(button_rule_cb): Call back for the rule dialog.
	(gtk_html_rule_dialog_new): Creates a new GtkHTMLRuleDialog.
	(gtk_html_rule_dialog_destroy): Created
	(rule_insert): Created.
	(rule_edit): Created.

	* rule.h: Ditto.

2000-06-05  Radek Doulik  <rodo@helixcode.com>

	* popup.c (remove_link): remove link callback
	(popup_show): use remove_link

2000-06-03  Ariel Rios  <ariel@arcavia.com>

	* table.c: New file: Functions for creating and using the table
	dialog.
	(set_get_values): Set and get the table value arguments.
	(button_table_cb): Call back for the table dialog.
	(gtk_html_table_dialog_new): Creates a new GtkHTMLDialog.
	(gtk_html_link_dialog_destroy): Destroy the dialog.
	(table_insert): Insert table.
	(table_edit): Edit table.

	* table.h: Ditto.

2000-05-29  Larry Ewing  <lewing@helixcode.com>

	* persist-stream-impl.c (get_content_types): add test/plain to
	content type list.
	(save): save the requested content type.

2000-05-26  Dan Winship  <danw@helixcode.com>

	* test-html-editor-control.c (load_through_stream,
	save_through_stream):
	* persist-stream-impl.c (save_receiver, save, load,
	get_content_types): Update for PersistStream changes.

2000-05-21  Ettore Perazzoli  <ettore@helixcode.com>

	* persist-stream-impl.c (load): Updated to use `GtkHTMLStream *'
	instead of `GtkHTMLStreamHandle'.
	(load): Updated to use the new `gtk_html_begin()' with no @url.

2000-05-17  Ettore Perazzoli  <ettore@helixcode.com>

	* toolbar.c
	(editor_toolbar_left_align_cb): If the button is now inactive,
	don't do anything, because it means that the user has clicked on
	another button in the same radiogroup.
	(editor_toolbar_center_cb): Likewise.
	(editor_toolbar_right_align_cb): Likewise.
	(safe_set_active): New helper function to set a toggle button
	active without triggering the corresponding callback.
	(paragraph_alignment_changed_cb): Use it to update the buttons.
	This way we don't get a callback every time the current alignment
	changes.

2000-05-16  Larry Ewing  <lewing@helixcode.com>

	* image.c (insert): renamed html_image_set_filename to html_image_set_url.

2000-05-09  Ettore Perazzoli  <ettore@helixcode.com>

	* test-html-editor-control.c: #if 0 the unused toolbar
	GnomeUIInfo.

2000-05-08  Larry Ewing  <lewing@helixcode.com>

	* editor-control-factory.c (editor_control_factory_init): call
	gdk_rgb_init().
	(html_button_pressed): pass button 2 events through to the defautl
	handler.

2000-05-03  Radek Doulik  <rodo@helixcode.com>

	* link.c (link_edit): hide text input - we don't want edit it now
	& here as it doesn't work and could be edited right in editor

	* editor-control-factory.c (html_button_pressed): added missing
	link_edit call when 2xclick

	* link.c (button_link_cb): fixed type (link instead of
	d->html_link)

2000-05-03  Jacob Berkman  <jacob@helixcode.com>

	* Makefile.am (oaf_DATA): if using oaf, actually install oaf and not
	gnorba

2000-05-02  Michael Meeks  <michael@helixcode.com>

	* html-editor-control.oafinfo: correct supported_mime_types to stringv

2000-04-29  Maciej Stachowiak  <mjs@eazel.com>

	* html-editor-control.oafinfo: Added most standard OAF attributes
	that apply, and corrected repo_ids to include all supported
	interfaces and exclude hackish pseudo-ids.

2000-04-28  Radek Doulik  <rodo@helixcode.com>

	* editor-control-factory.c (html_button_pressed): in case we show
	popup menu, stop signal emiting

	* popup.[ch]: new file - popup menu for html widget/objects
	(popup_show): new function, shows popup menu after button press
	event

2000-04-28  Ettore Perazzoli  <ettore@helixcode.com>

	* main.c: Don't #include <libgnorba/gnorba.h> when we really don't
	need it.

2000-04-27  Ettore Perazzoli  <ettore@helixcode.com>

	* editor-control-factory.c: New #define `CONTROL_FACTORY_ID',
	depending on whether we are `USING_OAF' or not.
	(editor_control_factory_init): Use `CONTROL_FACTORY_ID'.

	* test-html-editor-control.c: New #define
	`HTML_EDITOR_CONTROL_ID'; conditional on whether we are
	`USING_OAF' or not.
	(container_create): Use `HTML_EDITOR_CONTROL_ID' instead of an
	hardcoded value.
	(init_corba): New function, conditionally implemented according to
	`USING_OAF'.
	(init
	(main): Use `init_corba()'.

	* main.c (init_corba): New function, different compilation
	according to the `USING_OAF' #define.
	(init_bonobo): Use `init_corba()'.

	* Makefile.am: Updated to install the OAF stuff.

	* html-editor-control.oafinfo: New file for OAF.

2000-04-28  Radek Doulik  <rodo@helixcode.com>

	* image.c (image_edit): new function to use image dialog for
	editing, it sets image parameters and dialog->image, so we could
	later change image_parameters thru new htmlimage setting functions

	* editor-control-factory.c (html_button_pressed): new handler to
	for button press event in html widget (now it calls edit dialog for
	image)
	(editor_control_factory): connect button press event handler

2000-04-27  Radek Doulik  <rodo@helixcode.com>

	* dialog.c (run_dialog): use gtk_widget_show instead of
	gnome_dialog_run

	* link.c (gtk_html_link_dialog_new): set table col spacings

	* replace.c (gtk_html_replace_dialog_new): likewise

2000-04-25  Radek Doulik  <rodo@helixcode.com>

	* image.c (gtk_html_image_dialog_new): set sensitive for OK button

	* link.c (set_entries): new function, trying to be clever about
	links :)
	(gtk_html_link_dialog_new): link dialog
	(insert_link): run link dialog

2000-04-24  Radek Doulik  <rodo@helixcode.com>

	* replace.c (replace): use RUN_DIALOG

	* search.c (search): use RUN_DIALOG

	* image.c (insert_image): use RUN_DIALOG

	* dialog.c (run_dialog): creates and runs/raises dialog

	* dialog.[ch]: new files, some general dialogs util(s)

	* editor-control-factory.c (set_frame_cb): set automatic policy
	for scrolled_window

	* Makefile.am (html_editor_control_SOURCES): added search.[ch],
	replace.[ch], image.[ch] files

	* search.c (search): new function, replacing one in gtkhtml.c
	(search_next):  new function, replacing gtk_html_search_next in gtkhtml.c

	* image.c:  new file, moved from gtkhtml/src/gtkhtml-edit-image.c
	(gtk_html_image_dialog_new): commented out halignment
	setting (left/right)
	(insert_image): new function, replacing gtk_html_insert_image

	* image.h:  new file, moved from gtkhtml/src/gtkhtml-edit-image.h

	* replace.c: new file, moved from gtkhtml/src/gtkhtml-replace.c
	(gtk_html_replace_dialog_new): replace ask dialog moved to replace
	dialog
	(replace): new function, replacing gtk_html_replace

	* replace.h: new file, moved from gtkhtml/src/gtkhtml-replace.h

	* search.c: new file, moved from gtkhtml/src/gtkhtml-search.c

	* search.h: new file, moved from gtkhtml/src/gtkhtml-search.h

	* toolbar.c (toolbar_setup): use control data

	* menubar.c (menubar_setup): use control data

	* editor-control-factory.c (editor_control_factory): use
	control_data instead of set_frame_data
	(editor_control_factory): connect to bonobo object destroy to
	destroy control_data

	* control-data.c (gtk_html_control_data_new): new ctor
	(gtk_html_control_data_destroy): new dtor

	* control-data.h: new file, contains control_data struct which
	holds out control data as html, vbox, dialogs

2000-04-21  Radek Doulik  <rodo@helixcode.com>

	* menubar.c: added menu subtree insert with items Image and Link
	plus new callbacks

2000-04-20  Radek Doulik  <rodo@helixcode.com>

	* menubar.c: use ITALIC and UNDERLINE menu items instead of 3xBOLD
	added edit_subtree_info with Cut/Copy/Paste|Search/Search
	regex/Search again/Replace
	(menubar_setup): use _list functions instead of _tree ones as we
	have more menu subtrees now :)
	(menubar_setup): once more changed :) use _list_with_data to pass
	html thru
	(undo_cb): new callback
	(redo_cb): likewise
	(cut_cb): likewise
	(copy_cb): likewise
	(paste_cb): likewise
	(search_cb): likewise
	(search_regex_cb): likewise
	(search_next_cb): likewise
	(replace_cb): likewise

	* test-html-editor-control.c (container_create): create control
	after menu is prepared

2000-03-12  Ettore Perazzoli  <ettore@helixcode.com>

	* editor-control-factory.c: Removed `MAKE_VBOX_CONTROL' #define as
	the bug is gone.  Apparently GtkOptionMenu likes to queue resizes
	on the parent even when not needed.  We now avoid recalculating
	the toolbars and reflowing paragraphs unless the size has actually
	changed, so the bug is gone.

2000-03-08  Ettore Perazzoli  <ettore@helixcode.com>

	* editor-control-factory.c
	(MAKE_VBOX_CONTROL): New #define.  If this is not #defined, we
	just put the GtkHTML widget into a scrolled window and make it a
	control.  Otherwise, we create a vbox and put the scrolled window
	with the GtkHTML widget and the toolbar in it.  Using the vbox
	slows the whole widget down greatly, and I have no idea why.

2000-03-03  Ettore Perazzoli  <ettore@helixcode.com>

	* editor-control-factory.c (editor_control_factory): Call
	`gtk_html_load_empty()' on the widget to make it an empty document
	after its created.

2000-03-01  Ettore Perazzoli  <ettore@helixcode.com>

	* editor-control-factory.c (uih_hack_cb): Do not create the
	toolbar here anymore.
	(uih_hack_cb): Removed.
	(editor_control_factory): Create the toolbar here.  Put the
	toolbar and the GtkHTML widget into a vbox.  Create the menu bar
	here too.
	(set_frame_cb): Removed.

	* toolbar.c (toolbar_setup): Return a `GtkWidget *' with the
	toolbar that we want to add, fixed on top of the GtkHTML
	component.
	(create_editor_toolbar): Return the raw `GtkWidget' instead of a
	`Bonobo_Control'.

2000-02-26  Ettore Perazzoli  <ettore@helixcode.com>

	* toolbar.c: Implemented buttons to indent paragraphs more or
	less.  Actually make the center/left/right alignment buttons
	behave as expected.  Added cut/copy/paste toolbar buttons.

2000-02-24  Ettore Perazzoli  <ettore@helixcode.com>

	* toolbar.c (create_editor_toolbar): Add the paragraph style
	GtkOptionMenu before everything else.

2000-02-22  Ettore Perazzoli  <ettore@helixcode.com>

	* toolbar.c (insertion_font_style_changed_cb): New function.
	(create_editor_toolbar): Connect it to the
	"insertion_font_style_changed_cb" signal.

	* toolbar.c: (editor_toolbar_bold_cb): Use the new style mask
	system.
	(editor_toolbar_italic_cb): Likewise.
	(editor_toolbar_underline_cb): Likewise.
	(editor_toolbar_strikeout_cb): Likewise.

2000-02-16  Dan Winship  <danw@helixcode.com>

	* editor-control-factory.c (editor_control_factory): Update for
	latest round of interface changes.
	* test-html-editor-control.c (container_create): likewise
	* html-editor-control.gnorba: likewise

2000-02-15  Miguel de Icaza  <miguel@nuclecu.unam.mx>

	* Makefile.am: Add GNOME_EXTRA_CFLAGS to the INCLUDES.

2000-02-14  Ettore Perazzoli  <ettore@helixcode.com>

	* toolbar.c: Implemented the paragraph style menu.

2000-02-01  Ettore Perazzoli  <ettore@helixcode.com>

	* editor-control-factory.c: Set up the UI Handler.

	* test-html-editor-control.c: Updated to support the Bonobo UI
	Handler.

	* menubar.c: New file.
	* menubar.h: New file.

	* toolbar.c: New file.
	* toolbar.h: New file.

2000-01-26  Ettore Perazzoli  <ettore@helixcode.com>

	* All files: Updated according to the new Bonobo naming changes.

2000-01-25  Ettore Perazzoli  <ettore@helixcode.com>

	* test-html-editor-control.c: Added a "Save As..." menu item and its
	implementation.

	* persist-stream-impl.c (save): Implemented.

	* test-html-editor-control.c (container_create): Abort if we
	cannot get the control.

2000-01-25  Ettore Perazzoli  <ettore@helixcode.com>

	* test-html-editor-control.c: New file.

	* main.c: New file.

	* persist-stream-impl.c: New file.
	* persist-stream-impl.h: New file.

	* editor-control-factory.c: New file.
	* editor-control-factory.h: New file.
