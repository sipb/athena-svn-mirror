<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Debugging</title><meta name="generator" content="DocBook XSL Stylesheets V1.65.1"><link rel="home" href="index.html" title="Libbonobo Reference Manual"><link rel="up" href="misc.html" title="Miscellaneous"><link rel="previous" href="misc.html" title="Miscellaneous"><link rel="next" href="libbonobo-faq.html" title="Common Questions"><link rel="chapter" href="general.html" title="General"><link rel="refentry" href="libbonobo-bonobo-main.html" title="bonobo-main"><link rel="refentry" href="libbonobo-bonobo-running-context.html" title="BonoboRunningContext"><link rel="refentry" href="libbonobo-bonobo-shutdown.html" title="bonobo-shutdown"><link rel="refentry" href="libbonobo-bonobo-i18n.html" title="bonobo-i18n"><link rel="refentry" href="libbonobo-bonobo-types.html" title="bonobo-types"><link rel="refentry" href="libbonobo-bonobo-context.html" title="bonobo-context"><link rel="refentry" href="libbonobo-bonobo-exception.html" title="bonobo-exception"><link rel="refentry" href="libbonobo-bonobo-application.html" title="bonobo-application"><link rel="refentry" href="libbonobo-bonobo-app-client.html" title="bonobo-app-client"><link rel="chapter" href="factories.html" title="Objects, Factories, Reference Counting"><link rel="refentry" href="libbonobo-bonobo-object.html" title="BonoboObject"><link rel="refentry" href="libbonobo-bonobo-generic-factory.html" title="BonoboGenericFactory"><link rel="refentry" href="libbonobo-bonobo-shlib-factory.html" title="bonobo-shlib-factory"><link rel="refentry" href="refcounting.html" title="Reference Counting"><link rel="chapter" href="property-bags.html" title="Property Bags, Events, Listeners"><link rel="refentry" href="properties.html" title="Properties"><link rel="refentry" href="libbonobo-bonobo-event-source.html" title="bonobo-event-source"><link rel="refentry" href="libbonobo-bonobo-listener.html" title="bonobo-listener"><link rel="refentry" href="libbonobo-bonobo-property-bag.html" title="BonoboPropertyBag"><link rel="refentry" href="libbonobo-bonobo-arg.html" title="bonobo-arg"><link rel="refentry" href="libbonobo-bonobo-property-bag-client.html" title="bonobo-property-bag-client"><link rel="chapter" href="monikers.html" title="Monikers"><link rel="refentry" href="monikers-overview.html" title="Monikers in the Bonobo Component System"><link rel="refentry" href="libbonobo-bonobo-moniker.html" title="BonoboMoniker"><link rel="refentry" href="libbonobo-bonobo-moniker-simple.html" title="BonoboMonikerSimple"><link rel="refentry" href="libbonobo-bonobo-moniker-util.html" title="bonobo-moniker-util"><link rel="refentry" href="libbonobo-bonobo-moniker-extender.html" title="BonoboMonikerExtender"><link rel="refentry" href="libbonobo-bonobo-item-handler.html" title="BonoboItemHandler"><link rel="refentry" href="libbonobo-bonobo-item-container.html" title="BonoboItemContainer"><link rel="refentry" href="libbonobo-bonobo-moniker-context.html" title="bonobo-moniker-context"><link rel="chapter" href="streams.html" title="Storages and Streams"><link rel="refentry" href="libbonobo-bonobo-storage-memory.html" title="bonobo-storage-memory"><link rel="refentry" href="libbonobo-bonobo-stream-memory.html" title="BonoboStreamMem"><link rel="refentry" href="libbonobo-bonobo-storage.html" title="bonobo-storage"><link rel="refentry" href="libbonobo-bonobo-stream-client.html" title="bonobo-stream-client"><link rel="chapter" href="persist.html" title="Persistency"><link rel="refentry" href="libbonobo-bonobo-persist.html" title="BonoboPersist"><link rel="refentry" href="libbonobo-bonobo-persist-file.html" title="BonoboPersistFile"><link rel="refentry" href="libbonobo-bonobo-persist-stream.html" title="BonoboPersistStream"><link rel="refentry" href="libbonobo-bonobo-persist-client.html" title="bonobo-persist-client"><link rel="chapter" href="misc.html" title="Miscellaneous"><link rel="refentry" href="debugging.html" title="Debugging"><link rel="refentry" href="libbonobo-faq.html" title="Common Questions"><link rel="refentry" href="libbonobo-bonobo-config-database.html" title="bonobo-config-database"><link rel="section" href="debugging.html#id2877816" title="Debugging"><meta name="generator" content="GTK-Doc V1.2 (XML mode)"><link rel="stylesheet" href="style.css" type="text/css"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><table class="navigation" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2"><tr valign="middle"><td><a accesskey="p" href="misc.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td><td><a accesskey="u" href="misc.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td><td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td><th width="100%" align="center">Libbonobo Reference Manual</th><td><a accesskey="n" href="libbonobo-faq.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td></tr></table><div class="refentry" lang="en"><a name="debugging"></a><div class="titlepage"><div></div><div></div></div><div class="refsect1" lang="en"><a name="id2877816"></a><h2>Debugging</h2><p>Bonobo component debugging advice, version 0.1
	    by Michael Meeks &lt;mmeeks@gnu.org&gt;</p><p>Since it is not transparently obvious how to debug
	    Bonobo components the following suggestions may be of use.</p><div class="refsect2" lang="en"><a name="id2877647"></a><h3>Read the FAQ</h3><p>This will cover particularly common errors and their
		solutions obviating the need for further debugging.</p></div><hr><div class="refsect2" lang="en"><a name="id2877657"></a><h3>Versions</h3><p> It is vital to ensure that the correct versions of
		both the component and the container are being
		run. The safest way to make sure this is the case is
		to explicitly specify the path eg. </p><span><b class="command"> ./bonobo-my-component &amp; ./my-test-container </b></span></div><hr><div class="refsect2" lang="en"><a name="id2878548"></a><h3>Correct install</h3><p>It is rather important to make sure that bonobo has
		compiled and installed correctly. If you are using CVS
		ensure that your bonobo has installed without errors
		and that you have run ldconfig.</p></div><hr><div class="refsect2" lang="en"><a name="id2878560"></a><h3>Stale processes</h3><p>It is a good idea to check there are no stale
		component processes running in the background, check
		with</p><span><b class="command">ps ax | grep 'bonobo-my-component'</b></span><p>or just:</p><span><b class="command">bonobo-slay</b></span></div><hr><div class="refsect2" lang="en"><a name="id2878585"></a><h3>Debugging</h3><p>So: debugging. The best way to do this is to have
		two X-terms, in one run the component:</p><span><b class="command"><pre class="screen">
gdb ./bonobo-my-component
$ r
		    </pre></b></span><p>And in the second run the container:</p><span><b class="command"><pre class="screen">
gdb ./my-test-container
$ r
		</pre></b></span><p>Putting breakpoints in shared libraries such as
		bonobo is not possible until they have been linked
		in. Hence break in main, and then start populating
		your breakpoints.</p><p>Ok, so it seems some people also get horribly
		confused by libtool libraries that are in fact here to
		help; libtool creates a shell script in place of the
		binary to allow non-installed libraries to be linked
		correctly. That aside you need to do:</p><span><b class="command">$ libtool gdb ./my-program-name.</b></span><p>NB. don't go fiddling in <tt class="filename">.libs</tt>,
		you will get burned.  NNB. it seems that emacs' debug
		mode doesn't like this; you have to write a small
		<tt class="literal">'libtool gdb</tt>' wrapper script
		eg. '<tt class="literal">libtool gdb $@</tt>'</p></div><hr><div class="refsect2" lang="en"><a name="id2878662"></a><h3>CORBA method tracing</h3><p>There is beautiful built in ORBit2 method tracing
		facility that will show you all CORBA invocations,
		their objects, arguments, microsecond timestamps
		etc. To use it you need to configure ORBit2 with the
		--enable-debug switch and then either define the
		environment variable <tt class="envar">ORBIT2_DEBUG</tt> or
		use the ORBDebugFlags command line option or orbitrc
		flag. See the ORBit2 FAQ for more info.</p></div><hr><div class="refsect2" lang="en"><a name="id2878682"></a><h3>Order of execution</h3><p>It is of course important to ensure that the
		component has registered before executing the
		container.  A good guide is to wait until your hard
		disk has stopped thrashing madly before running the
		container.</p></div><hr><div class="refsect2" lang="en"><a name="id2878694"></a><h3>Nothing will activate!</h3><span><b class="command"><pre class="screen">
export BONOBO_ACTIVATION_DEBUG_OUTPUT=1
bonobo-slay
		</pre></b></span><p> And try again - it's possible that a debug message
		is being suppressed by bonobo-activation-server that
		this will show you. </p></div><hr><div class="refsect2" lang="en"><a name="id2878716"></a><h3>Nothing seems to happen, the code just locks</h3><p>Check that you are doing either a
		<tt class="function">bonobo_main()</tt> or a
		<tt class="function">bonobo_activate()</tt> followed by
		<tt class="function">gtk_main()</tt>. Failure to do this
		will cause strange lockups, caused because the POA is
		still queueing incoming requests waiting to be
		activated.  NB. this must be done in both container
		and component.</p></div><hr><div class="refsect2" lang="en"><a name="id2878748"></a><h3>Getting more information</h3><p>If you are doing serious development consider
		compiling gtk+, glib and bonobo with debugging
		symbols:</p><span><b class="command">export CFLAGS='-g' ; ./configure</b></span><p>If you suspect the name server of causing problems
		use type:</p><span><b class="command">export BONOBO_ACTIVATION_DEBUG_EXERUN=1</b></span><p>to get debug to the console, simply adding a
		breakpoint in <tt class="function">g_log</tt> will help get
		at the innards of the bonobo-activation
		process.</p></div><hr><div class="refsect2" lang="en"><a name="id2878787"></a><h3>Debugging bonobo-activation</h3><p> This is often best done by running: </p><span><b class="command"><pre class="screen">
gdb ./bonobo-activation
r --ac-activate
		</pre></b></span><p>
		And then cutting and pasting the IOR it spews out into
		/tmp/orbit-$USER/reg:...-local.</p></div><hr><div class="refsect2" lang="en"><a name="id2878811"></a><h3>The last resort</h3><p>And finally when the handfuls of hair are coming out
		thick and fast, consider reading the source, it only
		looks scary, it won't bite.</p></div><hr><div class="refsect2" lang="en"><a name="id2878822"></a><h3>Talk to the experts.</h3><p> Try reading the mailing list <a href="http://www.gnome.org/mailing-lists/archives/gnome-components-list/" target="_top">
	    archive </a>.  </p><p>
		Alternatively if you wish to buy in the programming expertise to meet
		an agressive deadline see: <a href="http://www.gnome-support.com" target="_top">http://www.gnome-support.com</a>.
	    </p></div></div></div><table class="navigation" width="100%" summary="Navigation footer" cellpadding="2" cellspacing="0"><tr valign="middle"><td align="left"><a accesskey="p" href="misc.html"><b>&lt;&lt; Miscellaneous</b></a></td><td align="right"><a accesskey="n" href="libbonobo-faq.html"><b>Common Questions &gt;&gt;</b></a></td></tr></table></body></html>
