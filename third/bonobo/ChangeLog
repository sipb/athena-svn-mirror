2001-02-09  Michael Meeks  <michael@ximian.com>

	* Version 0.36
	
2001-02-09  Michael Meeks  <michael@ximian.com>

	* configure.in: kill bonobo-idl

	* Makefile.am: kill bonobo-idl
	
2001-02-09  Michael Meeks  <michael@ximian.com>

	* s/BONOBO_GTK_TYPE_FUNC/BONOBO_X_TYPE_FUNC/
	
2001-02-09  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-control-frame.c (bonobo_control_frame_sync_realize): 
	fix warning text.

	* bonobo/bonobo-print.c (bonobo_print_new): upd.

2001-02-08  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-print.c (impl_render): fix serious
	brokenness in GtkType / Class usage.
	(bonobo_print_get_epv): move into
	(bonobo_print_class_init): here & upd.
	(init_print_corba_class): kill.
	(bonobo_print_get_type): upd.
	(bonobo_print_corba_object_create): kill.
	(bonobo_print_construct): upd.

2001-02-08  Michael Meeks  <michael@ximian.com>
	
	* bonobo/bonobo-ui-sync-toolbar.c (create_dockitem): revert Cody's
	style changes stuff.
	(toolbar_style_changed): kill.

	* bonobo/bonobo-ui-container.h: prune crud.

2001-02-08  Dietmar Maurer  <dietmar@ximian.com>
	
	* bonobo/bonobo-property-bag.h: renamed
	bonobo_property_bag_get_type to
	bonobo_property_bag_get_property_type,
	and bonobo_property_get_gtk_type to bonobo_property_bag_get_type

	* bonobo/bonobo-xobject.h (BONOBO_GTK_TYPE_FUNC): new macro.
	(BONOBO_GTK_TYPE_FUNC_FULL): new macro.

	* *.c: use the new macros everywhere.

2001-02-07  Pavel Cisler  <pavel@eazel.com>

	* bonobo/Makefile.am:
	* configure.in:
	Tweak the profiler build flags to make them work.

2001-02-07  Maciej Stachowiak  <mjs@eazel.com>

	* bonobo/bonobo-ui-sync-toolbar.c (toolbar_build_control): Remove
	unnecessary call to `bonobo_object_dup_ref' when calling
	`bonobo_ui_toolbar_control_item_new', since the latter calls
	`bonobo_object_dup_ref' itself and nothing removes the extra
	ref. This was causing leaked objects and processes as for instance
	the nautilus throbber component as per nautilus bug 6023.

2001-02-07  Michael Meeks  <michael@ximian.com>

	* Version 0.35

2001-02-06  Maciej Stachowiak  <mjs@eazel.com>

	* bonobo/bonobo-transient.c (bonobo_transient_destroy): pass FALSE
	rather than TRUE for etherealize_objects since ORBit does not
	implement the TRUE case anyway, and Elliot says passing FALSE is
	safe. This fixes bugzilla.eazel.com bug 5796 (ORBit-WARNING **:
	PortableServer_POA_destroy received after closing file manager
	window)

2001-02-07  Michael Meeks  <michael@ximian.com>

	* idl/Bonobo_Control.idl: add a dummy focus method on
	the ControlFrame for later.

	* bonobo/bonobo-plug.[ch]: Revert Federico's work for now

	* bonobo/bonobo-socket.[ch]: ditto.

2001-02-07  Michael Meeks  <michael@ximian.com>

	* storage-modules/bonobo-storage-fs.c
	(bonobo_storage_fs_get_type): upd.
	(bonobo_storage_fs_construct): kill.
	(do_bonobo_storage_fs_create): upd.

	* storage-modules/bonobo-storage-efs.c
	(bonobo_storage_efs_get_type): upd.
	(create_storage_efs_server): kill.
	(real_open_storage): upd.
	(bonobo_storage_efs_open): upd.

2001-02-07  Michael Meeks  <michael@ximian.com>

	* Makefile.am: Fix for recent xml-i18n-tools.

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_get_epv): move into
	(bonobo_property_bag_class_init): here& upd.
	(bonobo_property_bag_init_corba_class): kill.
	(bonobo_property_bag_construct): upd.
	(bonobo_property_bag_get_gtk_type): upd.
	(bonobo_property_bag_create_corba_object): kill.

	* bonobo/bonobo-storage.c (bonobo_storage_get_epv): move into
	(bonobo_storage_class_init): here & upd.
	(init_storage_corba_class): kill.
	(bonobo_storage_construct): kill.
	(bonobo_storage_corba_object_create): kill.
	(bonobo_storage_get_type): upd.
	(bonobo_storage_init): kill.

	* bonobo/bonobo-property-control.c (corba_class_init): kill.
	(bonobo_property_control_get_epv): move to
	(bonobo_property_control_class_init): here & upd.
	(bonobo_property_control_get_type): upd.
	(bonobo_property_control_corba_object_create): kill.
	(bonobo_property_control_construct): upd.
	(bonobo_property_control_new_full): upd.
	(bonobo_property_control_new): upd.

	* bonobo/bonobo-progressive.c (bonobo_progressive_get_epv): move into
	(bonobo_progressive_data_sink_class_init): here & upd.
	(init_progressive_data_sink_corba_class): kill.
	(bonobo_progressive_data_sink_construct): upd.
	(bonobo_progressive_data_sink_new): upd.
	(create_bonobo_progressive_data_sink): kill.
	(bonobo_progressive_data_sink_get_type): upd.

	* bonobo/bonobo-moniker-extender.c (bonobo_moniker_extender_get_epv): move into
	(bonobo_moniker_extender_class_init): here & upd.
	(init_moniker_extender_corba_class): kill.
	(bonobo_moniker_extender_get_type): upd.
	(bonobo_moniker_extender_construct): kill.
	(bonobo_moniker_extender_new): upd.
	(bonobo_moniker_extender_corba_object_create): kill.

	* bonobo/bonobo-item-handler.c (bonobo_item_handler_get_epv): move to
	(bonobo_item_handler_class_init): here & upd.
	(corba_item_handler_class_init): kill.
	(bonobo_item_handler_construct): upd.
	(bonobo_item_handler_new): upd.
	(create_bonobo_item_handler): kill.

	* bonobo/bonobo-item-container.c (corba_container_class_init): kill.
	(bonobo_item_container_get_epv): move into
	(bonobo_item_container_class_init): here & upd
	(corba_container_class_init): kill.
	(bonobo_item_container_construct): kill.
	(bonobo_item_container_get_type): upd.
	(bonobo_item_container_new): upd.
	(create_bonobo_item_container): kill.

2001-02-07  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-item-container.c (bonobo_item_container_class_init): 
	* bonobo/bonobo-view-frame.c (init_view_frame_corba_class): kill.
	(bonobo_view_frame_get_epv): move to
	(bonobo_view_frame_class_init): here & upd.
	(bonobo_view_frame_get_type): upd.
	(bonobo_view_frame_new): upd.
	(create_bonobo_view_frame): kill.

	* bonobo/bonobo-embeddable.c (bonobo_embeddable_get_epv): move into
	(bonobo_embeddable_class_init): here & upd.
	(bonobo_embeddable_corba_class_init): kill.
	(bonobo_embeddable_corba_object_create): kill.
	(bonobo_embeddable_get_type): upd.
	(bonobo_embeddable_new_canvas_item): upd.
	(bonobo_embeddable_new): upd.
	(bonobo_embeddable_construct): upd.
	(bonobo_embeddable_construct_full): upd.

2001-02-06  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-desktop-window.c (bonobo_desktop_window_get_epv): move to
	(bonobo_desktop_window_class_init): here & upd.
	(init_desktop_window_corba_class): kill.
	(bonobo_desktop_window_init): remove.
	(bonobo_desktop_window_get_type): upd.
	(bonobo_desktop_window_corba_object_create): kill.
	(bonobo_desktop_window_construct): upd.
	(bonobo_desktop_window_new): upd.

	* bonobo/bonobo-control-frame.c (bonobo_control_frame_get_epv): move to
	(bonobo_control_frame_class_init): here & upd.
	(init_control_frame_corba_class): kill.
	(bonobo_control_frame_get_type): upd.
	(bonobo_control_frame_construct): upd.
	(bonobo_control_frame_new): upd.

	* bonobo/bonobo-canvas-component.c (gcc_class_init): upd.
	(gcc_corba_class_init): kill.
	(bonobo_canvas_component_get_type): upd.
	(bonobo_canvas_component_object_create): kill.
	(bonobo_canvas_component_construct): upd.
	(bonobo_canvas_component_new): upd.

	* tests/test-moniker.c (check_string): upd.

2001-02-06  Michael Meeks  <michael@ximian.com>

	* monikers/bonobo-moniker-query.c (bonobo_moniker_query_new): upd.

	* bonobo/bonobo-shlib-factory.c (bonobo_shlib_factory_finalize): kill warning.

	* bonobo/bonobo-moniker-simple.c (bonobo_moniker_simple_construct): upd.
	(bonobo_moniker_simple_new): upd.

	* bonobo/bonobo-moniker.c (bonobo_moniker_get_type): upd.
	(bonobo_moniker_get_epv): move to
	(bonobo_moniker_class_init): here & upd.
	(init_moniker_corba_class): kill.
	(bonobo_moniker_corba_object_create): kill.
	(bonobo_moniker_construct): upd.

	* bonobo/bonobo-running-context.c (bonobo_running_context_get_epv): move to
	(bonobo_running_context_class_init): here & upd.
	(init_running_context_corba_class): kill.
	(bonobo_running_context_corba_object_create): kill.
	(bonobo_running_context_get_type): upd.
	(bonobo_running_context_new): upd.

	* bonobo/bonobo-activation-context.c (bonobo_activation_context_get_type): upd.
	(bonobo_activation_context_get_epv): move to
	(bonobo_activation_context_class_init): here & upd.
	(init_activation_context_corba_class): kill.
	(bonobo_activation_context_corba_object_create): kill.
	(bonobo_activation_context_new): upd.

2001-02-06  Michael Meeks  <michael@ximian.com>

	* configure.in: bump version to 0.35

	* bonobo/bonobo-item-container.c (bonobo_item_container_destroy): 
	actually free the hash.

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_state): nail
	nasty leak.

	* bonobo/bonobo-xobject.c (do_corba_hacks): cope with non corba
	types extending corba types better.

2001-02-06  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-listener.c (bonobo_listener_get_epv): move into
	(bonobo_listener_class_init): here and upd.
	(init_listener_corba_class): kill.
	(bonobo_listener_corba_object_create): kill.
	(bonobo_listener_get_type): upd.
	(bonobo_listener_construct): kill.
	(bonobo_listener_new): upd.

	* bonobo/bonobo-event-source.c (bonobo_event_source_get_epv):  move into
	(bonobo_event_source_class_init): here & upd.
	(bonobo_event_source_get_type): upd.
	(init_event_source_corba_class): kill.
	(bonobo_event_source_corba_object_create): kill.
	(bonobo_event_source_construct): kill.
	(bonobo_event_source_new): upd.

	* bonobo/bonobo-client-site.c (bonobo_client_site_get_epv): move to
	(bonobo_client_site_class_init): here & upd.
	(init_client_site_corba_class): kill.
	(bonobo_client_site_corba_object_create): kill.
	(bonobo_client_site_get_type): upd.
	(bonobo_client_site_new): upd.
	(bonobo_client_site_construct): upd.

	* bonobo/bonobo-zoomable.c (impl_Bonobo_Zoomable__get_preferredLevels):
	kill tedious warning.

	* bonobo/bonobo-persist-stream.c (bonobo_persist_stream_get_epv): 
	move to
	(bonobo_persist_stream_class_init): here.
	(init_persist_stream_corba_class): kill.
	(bonobo_persist_stream_get_type): upd.
	(bonobo_persist_stream_construct): upd.
	(create_bonobo_persist_stream): kill.
	(bonobo_persist_stream_new): upd.

	* bonobo/bonobo-persist-file.c (init_persist_file_corba_class): kill.
	(bonobo_persist_file_get_epv): move to
	(bonobo_persist_file_class_init): here & upd.
	(bonobo_persist_file_get_type): upd.
	(create_bonobo_persist_file): kill.
	(bonobo_persist_file_new): upd.

	* bonobo/bonobo-persist.c (bonobo_persist_construct): kill.
	(bonobo_persist_class_init): upd.
	(bonobo_persist_get_epv): kill.
	(bonobo_persist_get_type): upd.

2001-02-06  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-control.c (bonobo_control_destroy): chain to
	parent destroy method correctly.

	* bonobo/bonobo-ui-container.c (bonobo_ui_container_class_init): setup
	the parent type nicely.
	(bonobo_ui_container_destroy, bonobo_ui_container_finalize): 
	chain correctly to parents.

	* bonobo/bonobo-ui-component.c (bonobo_ui_component_destroy): chain
	to parent destroy !

	* bonobo/bonobo-xobject.c (corba_cleanup): release the
	servant before the object it references.
	(do_corba_hacks): update the orb's objref hash correctly.

	* bonobo/bonobo-xobject.c (bonobo_x_type_unique): guard against
	re-enterancy.
	(dont_release): rename to
	(final_release): be more intelligent
	(bonobo_x_object_finalize_real): call try_finalize
	(try_finalize): impl - delay finalization until we have no
	CORBA objrefs left.

2001-02-05  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-component.c (bonobo_ui_component_get_type),
	(bonobo_ui_component_construct): upd.
	(bonobo_ui_component_corba_object_create): kill.
	(bonobo_ui_component_get_epv): move to
	(bonobo_ui_component_class_init): here and upd.
	(bonobo_ui_component_new): upd.

	* bonobo/bonobo-ui-container.c (bonobo_ui_container_construct),
	(bonobo_ui_container_corba_object_create): kill.
	(bonobo_ui_container_new): upd.
	(bonobo_ui_container_get_type): upd.
	(bonobo_ui_container_get_epv): move
	(bonobo_ui_container_class_init): to here & upd.

	* bonobo/bonobo-xobject.c (dont_release): update to work.
	(bonobo_x_object_instance_init): calm debug.
	(setup_type): ditto.

	* bonobo/bonobo-view.c (bonobo_view_construct),
	(bonobo_view_new, bonobo_view_get_type): upd.
	(bonobo_view_corba_object_create): kill.
	(bonobo_view_get_epv): move into
	(bonobo_view_class_init): here & upd.
	(init_view_corba_class): kill.

	* bonobo/bonobo-control.c (bonobo_control_construct),
	(bonobo_control_new, bonobo_control_get_type): upd.
	(bonobo_control_corba_object_create): kill.
	(init_control_corba_class): kill.
	(bonobo_control_get_epv): move into 
	(bonobo_control_class_init): here & upd.

	* bonobo/bonobo-xobject.c (setup_type): update EPV
	build strategy - more speed & slickness.

2001-02-05  Cody Russell  <bratsche@gnome.org>

	* bonobo/bonobo-zoomable.[ch]: Use a GArray to store zoom levels
	and names and added bonobo_zoomable_add_preferred_zoom_level().

2001-02-05  Michael Meeks  <michael@ximian.com>

	* Rename mobject to xobject - the transience of decisiveness.
	
2001-02-05  Lutz Müller <urc8@rz.uni-karlsruhe.de>

	* monikers/bonobo-moniker-extender-stream.c
	(bonobo_stream_extender_resolve): fix bug in oaf query.

2001-02-05  Michael Meeks  <michael@ximian.com>

	* bonobo/Makefile.am: Add bonobo-mobject.

	* bonobo/bonobo-mobject.[ch]: Add.

	* bonobo/bonobo-object.c (bonobo_object_get_refs): impl.

2001-02-05  Cody Russell  <bratsche@gnome.org>
	
	* bonobo/bonobo-ui-sync-toolbar.c: Force GnomeDock to resize when
	the BonoboUIToolbar's style changes.

2001-02-03  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (bonobo_object_class_init):
	strip out object_gone - un-fired, and unused.

	* bonobo/bonobo-object.h: replaced 'object_gone' with an
	expansion gpointer in BonoboObjectClass.

2001-01-30  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-client-site.c (bonobo_client_site_destroy): 
	use bonobo_object_list_unref to free the view_frames.

	* bonobo/bonobo-embeddable.c (bonobo_embeddable_destroy): 
	ditto.

	* bonobo/bonobo-ui-engine-config.c (bonobo_ui_engine_config_get_engine):
	fix precondition.

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_node_get_widget):
	add precondition.

2001-01-30  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-object.c (gnome_unknown_ping): rename to
	(bonobo_unknown_ping): this.

2001-01-29  Michael Meeks  <michael@ximian.com>

	* bonobo/bonobo-ui-engine-config.c
	(bonobo_ui_engine_config_get_engine): impl.

	* bonobo/bonobo-ui-sync-toolbar.c (get_look):
	impl. to handle v/h look.
	(do_config_popup): upd.

2001-02-02  Federico Mena Quintero  <federico@ximian.com>

	* bonobo/bonobo-control.c (impl_Bonobo_Control_focus): I'm a big
	doofus that cut&pasted code.  Forgive me for I have sinned.  Fix
	corba_direction -> direction confusion.

2001-01-30  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-arg.c (bonobo_arg_new): use the DynAny interface.

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_add_full):
	store a copy of the default_value.

	* bonobo/bonobo-shlib-factory.c (bonobo_shlib_factory_finalize):
	disable shared library unloading

	* bonobo/bonobo-object.c (bonobo_track_shlib_objects): removed the
	warning.

2001-01-29  Federico Mena Quintero  <federico@ximian.com>

	* bonobo/Makefile.am: Removed effectively-duplicate target for
	Bonobo.h.

	* idl/Bonobo_Control.idl (FocusDirection): New enum for the focus
	direction types.
	(Control::focus): New method used to mimic GtkContainer:;focus().

	* bonobo/bonobo-control-frame.c (bonobo_control_frame_focus): New
	function to proxy the GtkContainer::focus() request.  This should
	only be used by the BonoboSocket code.

	* bonobo/bonobo-control.c (impl_Bonobo_Control_focus):
	Implementation of our ::focus() method.

	* bonobo/bonobo-socket.c (bonobo_socket_focus): Call
	bonobo_control_frame_focus() instead of sending a synthetic key
	press event.
	(bonobo_socket_init): Set GTK_CAN_FOCUS on the socket.  Since from
	this client's point of view it is a terminal, focusable container,
	it should be CAN_FOCUS.
	(bonobo_socket_focus_in_event): Set GTK_HAS_FOCUS.  If we had
	previously given the focus to the child, give it again; this
	handles the case where the toplevel window loses focus and gains
	it again, and we must re-set the X input focus on our child.
	(bonobo_socket_focus_out_event): Unset GTK_HAS_FOCUS.
	(focus_child_window): Renamed from bonobo_socket_claim_focus().
	Now we just give the focus to the child window.  We are
	essentially acting like a little window manager on behalf of the
	child.
	(focus_toplevel_window): New function; claims the focus for our
	toplevel window.
	(bonobo_socket_focus): Proxy the focus request to the child by
	using bonobo_control_frame_focus().  Transfer the X input focus as
	appropriate after issuing that request.
	(bonobo_socket_filter_func): Consistently handle the focus as per
	the functions above.

	* bonobo/bonobo-plug.c (BonoboPlugPrivate): Moved the BonoboPlug's
	fields to a private structure; modified all the functions to
	reflect this.
	(BonoboPlugPrivate): Added a has_focus flag.  We cannot simply use
	the GTK_HAS_FOCUS widget flag because we are not a GTK_CAN_FOCUS
	widget and it would make GtkContainer::focus() skip us immediately
	when trying to change the focus within the plug's children.
	(bonobo_plug_key_press_event): Do not ignore the return value from
	gtk_widget_activate().  Also mimic the
	GtkWindow::key_press_event() behavior as closely as possible.
	(bonobo_plug_key_press_event): Use priv->has_focus instead of
	GTK_WIDGET_HAS_FOCUS() on ourselves.
	(bonobo_plug_focus_in_event): Likewise.
	(bonobo_plug_focus_out_event): Likewise.
	(bonobo_plug_set_focus): Likewise.

2001-01-26  Michael Meeks  <michael@helixcode.com>

	* tests/test-moniker.c: check equality.

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_client_equal): 
	impl.

2001-01-27  Mike Kestner  <mkestner@ameritech.net>

	* bonobo/bonobo-canvas-component.c (restore_state): Save the affine in
	  the root item instead of the component item.
	(invoke_update): Copy of gnome_canvas_item_invoke_update.
	(impl_Bonobo_Canvas_Component_update): Use invoke update instead of 
	  directly calling the update method of item. Also call the GCI class
	  update function to clear flags.
	(rih_update): Use new ComponentProxy::requestUpdate method.

	* bonobo/bonobo-canvas-item.c - (create_proxy): Replace updateArea with 
	  requestUpdate method.
	(impl_Bonobo_Canvas_ComponentProxy_requestUpdate): Renamed from 
	  updateArea.  Calls gnome_canvas_item_request_update on the BCI. CUTA 
	  parameter removed.  

	*idl/Bonobo_Canvas.idl (Bonobo::Canvas::ComponentProxy): Rename
	  updateArea method to requestUpdate and make it parameterless.

2001-01-26  Ettore Perazzoli  <ettore@ximian.com>

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_qi_return):
	Don't spit out a stupid warning if we cannot resolve against this
	interface.

2001-01-26  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-desktop-window.h: fix guard - thanks morten.

	* bonobo/bonobo-moniker.c (impl_equal): impl.
	(bonobo_moniker_set_case_sensitive),
	(bonobo_moniker_get_case_sensitive): impl.
	(bonobo_moniker_default_equal): impl.

	* idl/Bonobo_Moniker.idl: add equal method.

2001-01-26  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-object.c (bonobo_track_shlib_objects): guard
	with #ifdef HAVE_DLADDR.

	* configure.in (orbit_version): add test for dladdr

2001-01-26  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync-toolbar.c (create_dockitem): add missing
	bracket !

2001-01-25  Michael Meeks  <michael@helixcode.com>

	* configure.in: Depend on oaf >= 0.6.2 so that people can actualy
	load .oaf files.

2001-01-25  Federico Mena Quintero  <federico@ximian.com>

	* bonobo/bonobo-ui-sync-toolbar.c (create_dockitem): Follow the
	gnome_preferences for the shadow style of the toolbar.  This is
	also known as:  if I don't want it to look like my butt, let me
	configure it that way.

2001-01-25  Ettore Perazzoli  <ettore@ximian.com>

	* bonobo/bonobo-ui-toolbar.c (item_set_want_label_cb): Call
	`set_attributes_on_child()' before queueing a resize.

	* bonobo/bonobo-ui-toolbar-item.c (impl_set_style): Don't queue
	resize if the style didn't change.
	(impl_set_orientation): Don't queue resize if the orientation
	didn't change.

2001-01-25  Michael Meeks  <michael@helixcode.com>

	* idl/Makefile.am: Rename all the IDL files to comply to the
	namespacing rules.

	* configure.in: Bump version to 0.34

2001-01-25  Dietmar Maurer  <dietmar@ximian.com>

	* bonobo/bonobo-object.c (bonobo_track_shlib_objects): removed an
	unnecessary type check.

	* monikers/bonobo-stream-cache.[ch]: a stream cache implementation
	for the cache moniker.

	* monikers/moniker-test.c (display_as_stream): free the allocated
	iobuf. 

	* monikers/bonobo-moniker-cache.c (bonobo_moniker_cache_resolve):
	a first implementation.

	* monikers/Bonobo_Moniker_std.oaf.in.in: s/_cache/_Cache/

	* bonobo/bonobo-shlib-factory.c
	(bonobo_shlib_factory_dec_live_cb): use a idle callback to
	decrement live_objects instead of bonobo_idle_unref().

	* bonobo/bonobo-object.c (bonobo_track_shlib_objects): impl.
	(bonobo_object_activate_servant_full): impl.

	* bonobo/bonobo-generic-factory.c
	(bonobo_generic_factory_corba_object_create): added a new
	parameter to identify the calling shared library.

	* bonobo/bonobo-moniker.c (bonobo_moniker_corba_object_create):
	added a new parameter to identify the calling shared library. 

	* bonobo/bonobo-moniker.c (bonobo_moniker_construct): added a new
	parameter to identify the calling shared library.

Wed Jan 24 21:50:08 2001  George Lebl <jirka@5z.com>

	* bonobo/bonobo-control.c (bonobo_control_plug_destroy_event_cb):
	  destroy_event signal handler needs to have a return value.  Not
	  sure what bugs this could cause, and quite likely it's a
	  sanity fix only.

2001-01-25  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync-toolbar.c (config_verb_fn): do a
	bonobo_ui_engine_configure on Customize
	(do_config_popup): Setup the customize item
	(impl_bonobo_ui_sync_toolbar_state): setup priority on
	toolbar items.

2001-01-25  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync-menu.c (str_uscore_equal, label_same): impl.
	(impl_bonobo_ui_sync_menu_state): use it to avoid re-creating
	the menu widget.

	* bonobo/bonobo-ui-sync.c (bonobo_ui_sync_can_handle): remove
	gtk type check, we do too many of these for a type check.

2001-01-24  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-listener.c (bonobo_listener_destroy): rename to
	finalize. (bonobo_listener_class_init): upd.

2001-01-22  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-property-bag-client.c (bonobo_property_bag_client_set_value_any): 
	only churn debug if we have no environment.

	* bonobo/bonobo-widget.c (bonobo_widget_get_objref): impl.

	* bonobo/bonobo-stream-memory.c (mem_set_info): fire an exception
	correctly. (mem_get_info): impl.

	* bonobo/bonobo-print-client.c (bonobo_print_client_render): 
	re-order to fix bug & convert to the Stream code.
	(bonobo_print_client_render): update.

	* bonobo/bonobo-stream-client.c (bonobo_stream_client_get_length),
	(bonobo_stream_client_read): impl. helper functions.

	* bonobo/bonobo-print.c (impl_render): return a stream.
	
2001-01-20  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_add_full): 
	define the meaning of 0 to be RW, sad but true.

	* tests/test-properties-client.c (create_bag_client): 
	release property bag, and gtk_main_quit.

	* tests/test-properties-server.c (main): add automatic quitting.

	* samples/controls/bonobo-clock-control.c (bonobo_clock_control_new):
	add a default boolean value.

2001-01-23  Iain Holmes  <iain@ximian.com>

	* bonobo/bonobo-ui-engine-config.c 
	(bonobo_ui_engine_config_hydrate): Free the string vector.

	* bonobo/bonobo-listener.c (bonobo_listener_destroy): Free the
	priv structure.

2001-01-23  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Added sk (Slovak) to ALL_LINGUAS.

2001-01-19  Darin Adler  <darin@eazel.com>

	* bonobo/bonobo-ui-sync-menu.c: (add_tearoff): Fix bug
	where it would always use tear-offs (ignoring the config.
	setting).

2001-01-19  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync-menu.c (node_is_popup): impl.
	(add_tearoff): Only put tearoffs in non-popups, unless
	explicitely asked for.
	(impl_bonobo_ui_sync_menu_build),
	(bonobo_ui_sync_menu_add_popup): pass popup_init.

2001-01-19  Michael Meeks  <michael@helixcode.com>

	* configure.in: Add checks for libIDL version and setup
	CFLAGS / LIBS.

	* bonobo-idl/Makefile.am: Update.

2001-01-19  Pavel Cisler <pavel@eazel.com>

	* configure.in (ENABLE_PROFILER): Add.

	* bonobo/Makefile.am: Add profile flags.

2001-01-19  Dietmar Maurer  <dietmar@ximian.com>

	* monikers/Bonobo_Moniker_std.oaf.in.in: changed the oaf IIDs to
	OAFIID:Bonobo_Moniker_std_Factory

	* bonobo/bonobo-generic-factory.h: make an
	additional parameter for the BONOBO_OAF_FACTORY macros for the
	VERSION, and also #include the required files. Cleaned up all
	factories inside bonobo to only #include the necessary files.

2001-01-19  Michael Meeks  <michael@helixcode.com>

	* Version 0.33

2001-01-19  Michael Meeks  <michael@helixcode.com>

	* configure.in: Bump version.

	* bonobo/bonobo-ui-engine.c (make_updates_for_command): build
	a full list.
	(update_cmd_state): rename to
	(execute_state_updates): this.
	(set_cmd_attr): upd call.
	(update_commands_state): build complete list of updates before
	executing them.

2001-01-18  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-engine.c (remove_fn): remove all children

2001-01-18  Michael Meeks  <michael@helixcode.com>

	* monikers/bonobo-moniker-std.c: Fix rename of factory IID, grr!

2001-01-18  Michael Meeks  <michael@helixcode.com>

	* Version 0.32
	
2001-01-18  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_add): 
	tolerate a NULL pb.

	* bonobo/bonobo-transient.c (bonobo_transient_construct): 
	Set NO_IMPLICIT_ACTIVATION policy; ORBit changed under us.
	(bonobo_transient_destroy): tolerate failed POA instantiation

2001-01-17  Michael Meeks  <michael@helixcode.com>

	* NEWS: updated.

2001-01-18  Dietmar Maurer  <dietmar@ximian.com>

	* samples/controls/sample-control-factory.c: use the new factory
	macros  

	* samples/compound-doc/sample-canvas-item.c: use the new factory
	macros  

	* samples/compound-doc/paint-component-simple.c: use the new
	factory macros 

	* samples/compound-doc/Bonobo_Sample_CanvasItem.oaf.in: changed
	the oaf IIDs to OAFIID:Bonobo_Sample_CanvasItem_Factory and
	OAFIID:Bonobo_Sample_CanvasItem_Factory

	* monikers/bonobo-moniker-untar.c:  use the new factory macros

	* monikers/bonobo-moniker-http.c: use the new factory macros

	* monikers/bonobo-moniker-gunzip.c: use the new factory macros

	* monikers/Bonobo_Moniker_http.oaf.in: changed the oaf IIDs to
	Bonobo_Moniker_http_Factory and OAFIID:Bonobo_Moniker_http

	* monikers/Bonobo_Moniker_gzip.oaf.in: changed the oaf IIDs to
	OAFIID:Bonobo_Moniker_gzip_Factory and OAFIID:Bonobo_Moniker_gzip

	* monikers/Bonobo_Moniker_cache.oaf.in:  changed the oaf IIDs to
	OAFIID:Bonobo_Moniker_cache_Factory and OAFIID:Bonobo_Moniker_cache

	* idl/bonobo-context.idl: new atExitUnref method.

	* doc/FAQ: s/oafinfo/oaf/ 

	* components/text-plain/bonobo-text-plain.c: use the new factory macros

	* components/text-plain/Bonobo_Sample_Text.oaf.in: changed the oaf
	IIDs to OAFIID:Bonobo_Sample_Text_Factory and OAFIID:Bonobo_Sample_Text

	* components/selector/bonobo-selector.c: use the new factory macros

	* components/audio-ulaw/bonobo-audio-ulaw.c: use the new factory macros

	* components/audio-ulaw/Bonobo_Sample_Audio.oaf.in: changed the oaf
	IIDs to OAFIID:Bonobo_Sample_Audio_ulaw_Factory and
	OAFIID:Bonobo_Sample_Audio_ulaw.

	* bonobo/bonobo-running-context.c
	(impl_Bonobo_RunningContext_atExitUnref): impl. 
	(bonobo_running_context_at_exit_unref): ignore the object
	(bonobo_running_context_auto_exit_unref): ignore the object

	* bonobo/bonobo-object.h (BONOBO_OBJREF): new macro to get the
	corba_objref from a BonoboObject.

	* *.c: use the new BONOBO_OBJREF macro everywhere

2001-01-18  Miguel de Icaza  <miguel@gnu.org>

	* Re-enable bonobo-idl.

2001-01-17  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-item-handler.c (impl_enum_objects): if no enum_objects
	handler return a blank sequence.
	(impl_get_object): ditto.

	* tests/test-container.c (launch_server, launch_server_moniker): update
	item-container code.

	* samples/compound-doc/paint-component-simple.c (view_create_menus):
	prune cruft, add listeners.
	(view_color_select_cb): remove. (color_listener_cb): upd.

	* bonobo/bonobo-item-container.c (bonobo_item_container_get_moniker): 
	remove: unusable.
	(get_object_names, remove_object): impl
	(bonobo_item_container_destroy): upd.
	(impl_Bonobo_ItemContainer_enumObjects): re-implement.
	(bonobo_item_container_remove): rename to
	(bonobo_item_container_remove_by_name): and re-implement.
	(bonobo_item_container_add): re-write, remove dodgy destroy
	notification nonsense.
	(bonobo_item_container_client_site_destroy_cb): kill.

	* bonobo/bonobo-item-handler.c (impl_enum_objects): fixup for
	ObjectNames.

	* bonobo/bonobo-widget.c (bonobo_widget_create_subdoc_object):
	don't add stuff redundantly to the item container.

	* bonobo/bonobo-client-site.c (bonobo_client_site_construct): 
	remove redundant bonobo_item_container_add.
	(bonobo_client_site_destroy): remove redundant remove.

	* idl/bonobo-item-container.idl: enumerate objects by name.

2001-01-16  Michael Meeks  <michael@helixcode.com>

	* monikers/Makefile.am: Sort out the mess.

	* bonobo/bonobo-ui-xml.c (merge): Extract loop invariant a_name
	to make more efficient, make a nameless placeholder the default
	insertion point, split insertion to (do_insert): here.

2001-01-15  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-engine-config.c (bonobo_ui_engine_config_configure): 
	return if we have no path.

	* bonobo/bonobo-ui-engine.c (add_node_fn): cauterize merge logic.

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_build):
	connect to key_press_event and ignore it for all we are worth.
	(sucking_gtk_keybindings_cb): do some ignoring here.

2001-01-16  Dietmar Maurer  <dietmar@ximian.com>

	* samples/controls/bonobo-clock-control.c (get/set_prop): add the
	missing CORBA_Environment.

	* samples/controls/bonobo-calculator-control.c (get/set_prop): add the
	missing CORBA_Environment.

	* monikers/moniker-test.c (display_as_control): unref the ui
	container.

	* components/selector/bonobo-selector.c (get/set_prop): added
	exceptions.

	* samples/compound-doc/paint-component-simple.c
	(init_simple_paint_factory): use the new unref code.

	* components/audio-ulaw/bonobo-audio-ulaw.c
	(init_bonobo_audio_ulaw_factory): use the new unref code.
	
	* components/text-plain/bonobo-text-plain.c
	(init_bonobo_text_plain_factory): use the new unref code.

	* bonobo/bonobo-running-context.c
	(bonobo_running_context_at_exit_unref): impl.
	(bonobo_running_context_auto_exit_unref): impl.

2001-01-15  Eskil Heyn Olsen  <eskil@eazel.com>

	* monikers/Makefile.am:
	Some makefile magic to put all the oaf.in files in dist.

2001-01-15  Darin Adler  <darin@eazel.com>

	* monikers/Makefile.am: Remove an old file name accidentally
	left behind.
	* tests/.cvsignore: Ignore the moniker test binary as well as
	the other test binaries.

2001-01-15  Michael Meeks  <michael@helixcode.com>

	* monikers/Makefile.am: Fix the build problems caused by
	xml-i18n-tools.

2001-01-15  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-exception.c (bonobo_exception_repoid_to_text):
	impl. added IOError and NotSupported exception

	* idl/bonobo-exception.idl: placed the global exception into a new
	file.

	* bonobo/bonobo-shlib-factory.h 
	(BONOBO_OAF_SHLIB_FACTORY_MULTI):
	(BONOBO_OAF_SHLIB_FACTORY): some new macros

	* monikers/bonobo-moniker-std.c: use the new macro

	* bonobo/bonobo-property.c: see below. 

	* bonobo/bonobo-exception.h (bonobo_exception_set): impl.
	(bonobo_return_if_fail): impl.
	(bonobo_return_val_if_fail): impl.

	* bonobo/bonobo-property-bag.[ch]: code cleanup, added exceptions

2001-01-13  Jason Leach  <jasonleach@usa.net>

	* bonobo/bonobo-exception.c: replaced an #include <gnome.h> with
	necessary headers to trim dependencies.

	* bonobo/bonobo-object-directory.c: Ditto.
	* bonobo/bonobo-selector.c: Ditto.
	* bonobo/bonobo-selector-widget.c: Ditto.
	* bonobo/bonobo-win.c: Ditto.
	
	* bonobo/bonobo-main.h: removed unnecessary #include
	<libgnome/gnome-defs.h>
	
	* bonobo/bonobo-main.c: removed unnecessary #include <gnome.h>

2001-01-12  Miguel de Icaza  <miguel@ximian.com>

	* bonobo/bonobo-item-handler.c (bonobo_item_option_parse): Bug fix.

2001-01-11  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-moniker-util.c
	(bonobo_moniker_util_new_from_name_full): unref again

	* monikers/bonobo-moniker-std.c (make_std_factory): duplicate the
	factory object before return.

	* bonobo/bonobo-object.c (bonobo_object_add_interface): also merge
	the reference list in debugging mode.
	added more debugging output.

001-01-10  Miguel de Icaza  <miguel@helixcode.com>

	* bonobo/bonobo-item-handler.c (bonobo_item_options_free): Implement.
	(bonobo_item_option_parse): New utility function to parse option
	strings in item monikers.

2001-01-11  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-engine.c (impl_destroy): free hash table.
	(cmd_to_node_clear_hash): free hash node.
	(cmd_to_node_add_node): impl.
	(cmd_to_node_remove_node): impl.
	(cmd_to_node_add_node): impl.
	(cmd_to_nodes): impl.
	(make_updates_for_command): re-write to avoid recursion.
	(update_cmd_state): upd.
	(dirty_by_cmd): re-write similarly.
	(move_dirt_cmd_to_widget): upd.
	-- updates to track cmds vs. nodes.
	(add_node_fn): register cmd node.
	(replace_override_fn, override_fn),
	(remove_fn, reinstate_fn): ditto.

2001-01-11  Michael Meeks  <michael@helixcode.com>

	* doc/std-ui.xml: upd.

	* bonobo/Makefile.am: add ui-config-widget.h

	* bonobo/bonobo-ui-config-widget.[ch]: add.

2001-01-10  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-engine-config.c (impl_destroy): impl.
	(class_init): upd.
	(populate_list, dialog_new, null_dialog): impl.
	(bonobo_ui_engine_config_configure): impl.

	* bonobo/bonobo-ui-engine.c (impl_emit_verb_on): add builtin
	verbs.

	* doc/ui-xml.txt: document builtins.

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_build): add
	tearoff attribute. (add_tearoff): split out.
	(bonobo_ui_sync_menu_add_popup): add tearoff.

2001-01-10  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_new_from_name_full): 
	remove Dietmar's unref that causes problems for now.

	* bonobo/bonobo-moniker.c (bonobo_moniker_set_parent): simplify.

2001-01-09  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync-status.c (remove_hint_cb): use the
	correct hint key to remove hints so they don't just lurk
	forever.

	* doc/ui-xml.txt: document 'config' attr.

	* bonobo/bonobo-ui-sync-toolbar.c (create_dockitem): check
	for a 'config' attr.
	(create_dockitem): move toolbar creation here.
	(impl_bonobo_ui_sync_toolbar_update_root): upd.

	* bonobo/bonobo-ui-engine-config.c (bonobo_ui_engine_config_connect): r
	re-order to make more sense.

2001-01-09  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync-toolbar.c (do_config_popup),
	(config_verb_fn): impl.
	(create_dockitem): upd.

	* bonobo/bonobo-ui-toolbar.c (bonobo_ui_toolbar_show_tooltips): 
	impl.

	* bonobo/bonobo-ui-sync-toolbar.c (impl_bonobo_ui_sync_toolbar_update_root): 
	re-enable "tips"

	* bonobo/bonobo-ui-engine-config.[ch]: Substantialy re-writte.

	* bonobo/bonobo-ui-xml.c (bonobo_ui_xml_remove_watch_by_data): impl.

2001-01-09  Michael Meeks  <michael@helixcode.com>

	* doc/FAQ: finish the OAFIID naming section.

2001-01-09  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-running-context.c: add more debugging output.

	* bonobo/bonobo-object.c (bonobo_dbg_print): impl.
	added nicer debugging output

	* bonobo/bonobo-moniker-util.c
	(bonobo_moniker_util_new_from_name_full): release the object reference.

	* bonobo/bonobo-property-bag.c (bonobo_property_bag_destroy): do
	not unref the event source, since it is aggregated with the bag.

2001-01-08  Robin * Slomkowski  <rslomkow@eazel.com>

	reviewed by: Jirka Lebl <jirka@5z.com>

	* monikers/Makefile.am: added missing Bonobo_Moniker_cache.oaf.in
	to EXTRA_DISTS

2001-01-05  Maciej Stachowiak  <mjs@eazel.com>

	xml-i18n-toolize
	
	* configure.in: add AM_PROG_XML_I18N_TOOLS

	* .cvsignore: Ignore xml-i18n-{extract,merge,update}
	* Makefile.am: Distribute xml-i18n-{extract,merge,update}
	
	* components/application-x-gnomine/Bonobo_Sample_Mines.oaf.in:
	Renamed from,
	components/application-x-gnomine/Bonobo_Sample_Mines.oafinfo;
	marked some strings translatable.
	* components/application-x-gnomine/Makefile.am: add oaf merge
	rule, distribute .oaf and .oaf.in file.
	* components/audio-ulaw/Bonobo_Sample_Audio.oaf.in,
	components/audio-ulaw/Bonobo_Sample_Audio.oafinfo,
	components/audio-ulaw/Makefile.am: Same deal.
	* components/selector/Bonobo_Selector.oaf.in,
	components/selector/Bonobo_Selector.oafinfo,
	components/selector/Makefile.am: Ditto.
	* components/text-plain/Bonobo_Sample_Text.oaf.in,
	components/text-plain/Bonobo_Sample_Text.oafinfo,
	components/text-plain/Makefile.am: Ditto.

	* samples/compound-doc/Bonobo_Sample_CanvasItem.oaf.in,
	samples/compound-doc/Bonobo_Sample_CanvasItem.oafinfo,
	samples/compound-doc/Bonobo_Sample_Paint.oaf.in,
	samples/compound-doc/Bonobo_Sample_Paint.oafinfo,
	samples/compound-doc/Makefile.am: Ditto.

	* monikers/Bonobo_Moniker_cache.oaf.in,
	monikers/Bonobo_Moniker_gzip.oaf.in,
	monikers/Bonobo_Moniker_gzip.oafinfo,
	monikers/Bonobo_Moniker_http.oaf.in,
	monikers/Bonobo_Moniker_http.oafinfo,
	monikers/Bonobo_Moniker_std.oafinfo.in, monikers/Makefile.am,
	monikers/Bonobo_Moniker_std.oaf.in.in: Ditto, but create .in.in
	file for Bomobo_Moniker_std, since it needs to be preprocessed
	twice.
	
	* samples/bonobo-class/Bonobo_Sample_Echo.oaf.in,
	samples/bonobo-class/Bonobo_Sample_Echo.oafinfo,
	samples/bonobo-class/Makefile.am: Ditto.

	* samples/controls/Bonobo_Sample_Controls.oaf.in,
	samples/controls/Bonobo_Sample_Controls.oafinfo,
	samples/controls/Makefile.am: Ditto.

	* po/POTFILES.in: Add .oaf.in files
	* po/Makefile.i18npatch, po/ui-extract.pl, po/update.pl: Remove
	these no longer needed files.
	* bonobo.spec.in: Include .oaf files in rpm, not .oafinfo

2001-01-08  Dietmar Maurer  <dietmar@helixcode.com>

	* idl/bonobo-property.idl: new add/removeListener methods.

	* bonobo/bonobo-property.c (impl_Bonobo_Property_addListener): impl.
	(impl_Bonobo_Property_removeListener): impl.

	* bonobo/bonobo-object.c: removed indentation for debugging output
	to make the output more clear if used with the new running
	context debugging code.

	* bonobo/bonobo-running-context.c
	(bonobo_running_context_trace_objects): new debugging code. 

	* idl/bonobo-property.idl: new getEventSource method for the
	PropertyBag interface.

	* bonobo/bonobo-property-bag.c 
	(impl_Bonobo_PropertyBag_getEventSource): impl.

	* idl/bonobo-property.idl: derive the property from Bonobo::Unknown.

	* bonobo/bonobo-property.c (impl_Bonobo_Property_queryInterface): impl.

2001-01-08  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-engine-config.c (bonobo_ui_engine_config_get_path),
	(bonobo_ui_engine_config_set_path): impl.

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_get_config_path),
	(bonobo_ui_engine_set_config_path): upd.
	(impl_destroy): free config.
	(bonobo_ui_engine_construct): Create it here.

	* bonobo/bonobo-ui-engine-private.h: add.

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_get_xml): impl.

	* bonobo/bonobo-ui-xml.c (bonobo_ui_xml_new): add user_data
	pointer (merge): pass it on.
	(is_watched_node): impl.
	(watch_add_node, watch_update): impl.
	(bonobo_ui_xml_add_watch, bonobo_ui_xml_set_watch_fn): impl.

	* monikers/moniker-test.c (display_as_control): update to use
	a BonoboWindow so we can test components more trivialy.

	* doc/ui-xml.txt: document delimit.

2001-01-07  Mike Kestner  <mkestner@ameritech.net>

	* bonobo/bonobo-canvas-item.h - Cleaned up a couple old gnome_bonobo_*
	references.

2001-01-06  Mike Kestner  <mkestner@ameritech.net>

	* bonobo/bonobo-canvas-component.c - Added EVENT signal. Moved orig_root
	into RootItemHack. Removed ui_component.
	(gcc_event): Added "event" signal emmision.
	(impl_Bonobo_Canvas_Component_getUIComponent): killed
	(bonobo_canvas_component_set_ui_component): killed
	(bonobo_canvas_component_get_ui_component): killed
	(gcc_destroy): Destroy the canvas. Yank the ui_component.
	(bonobo_canvas_component_class_init): Create the "event" signal.
	(bonobo_canvas_component_init): Yank the ui_component.
	(rih_destroy): New. Unref the proxy and destroy the orig_root item.
	(rih_class_init): Add the destroy method.
	(root_item_hack_new): Store the original canvas root.
	(bonobo_canvas_component_set_proxy): Killed.
	(bonobo_canvas_new): New helper function to create proxied canvases.
	(bonobo_canvas_component_grab): New.  Grab mouse focus via proxy.
	(bonobo_canvas_component_ungrab): New.  Ungrab mouse focus via proxy.
	(bonobo_canvas_component_get_ui_container): New.  Get uic via proxy.
	
	* bonobo/bonobo-canvas-item.c - Added ui_container to proxy. Added
	embeddable and ui_container args.
	(gbi_realize): Connect to size_allocate signal.
	(gbi_set_arg): Add embeddable arg handling to create remote component.
	Add ui_container arg handling to store local copy of uic.
	(gbi_class_init): Add new args.
	(impl_Bonobo_Canvas_ComponentProxy_grabFocus): New. 
	(impl_Bonobo_Canvas_ComponentProxy_ungrabFocus): New. 
	(impl_Bonobo_Canvas_ComponentProxy_getUIContainer): New. 
	(create_proxy): Add new methods.
	(gbi_init): Moved proxy creation here from _new.
	(bonobo_canvas_item_new): Killed.  Use gnome_canvas_item_new now.

	* bonobo/bonobo-client-site.c (bonobo_client_site_destroy): Use 
	gtk_object_unref, not bonobo_object_unref to destroy canvas items.
	(bonobo_client_site_new_item): Added ui_container parameter, like 
	_new_view.  Use gnome_canvas_item_new call to create items. 

	* bonobo/bonobo-embedable.c (impl_Bonobo_Embeddable_createCanvasItem):
	Use new bonobo_canvas_new helper function to create canvas. Remove
	set_proxy call.

	* idl/bonobo-canvas.idl - Removed getUIComponent from the Component.
	Added getUIContainer, grabFocus, and ungrabFocus to the Proxy.

	* tests/test-container.c - Added ui_container to item creation.

2001-01-05  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_build_skeleton): move

	* bonobo/bonobo-ui-engine.c (build_skeleton): insert here.
	(bonobo_ui_engine_construct): upd.

	*.h: prune duff includes left in by mistake.

2001-01-05  Michael Meeks  <michael@helixcode.com>
	
	* bonobo/bonobo-ui-engine-config.[ch]: Half impl.

	* bonobo/bonobo-ui-engine.h: add BonoboUIError

	* bonobo/bonobo.h: remove bonobo-ui-xml.h

	* bonobo/Makefile.am (noinst_HEADERS): move ui-xml.h here.

	* bonobo/bonobo-ui-xml.h: remove BonoboUIXmlError, rename to
	BonoboUIError

	* Rename all instances.

	* bonobo/bonobo-ui-engine.c (override_fn): upd to new sig.

	* bonobo/bonobo-ui-xml.c (override_node_with): pass both new and old
	nodes on 'OVERRIDE'
	(bonobo_ui_xml_class_init): upd decl.

2001-01-04  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync-menu.c (impl_bonobo_ui_sync_menu_stamp_root): 
	tolerate NULL menu.

	* bonobo/bonobo-ui-engine.c (real_exec_verb): remove warning
	on NIL corba reference to help local re-use.
	(real_emit_ui_event): ditto.

	* bonobo/bonobo-win.c (bonobo_window_set_config_path): remove.

2001-01-04  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-object.c (bonobo_object_add_interface): compute a
	new reference count if we aggregate to objects.

2001-01-04  Michael Meeks  <michael@helixcode.com>

	* idl/bonobo-context.idl: include bonobo-storage.idl not the
	(non existant bonobo-stream.idl): from Colm.

2001-01-04  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-sync.h: remove duplicate def. of
	bonobo_ui_engine_dump: wierd, move sync type getter functions
	here.

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_get_syncs): impl.

2001-01-03  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-toolbar-button-item.c (unparent_items): split from
	(layout_pixmap_and_label): here & update.

2001-01-03  Darin Adler  <darin@eazel.com>

	* bonobo/bonobo-ui-engine.h:
	* bonobo/bonobo-ui-sync-keys.h:
	* bonobo/bonobo-ui-sync-menu.h:
	* bonobo/bonobo-ui-sync-status.h:
	* bonobo/bonobo-ui-sync-toolbar.h:
	* bonobo/bonobo-ui-sync.h:
	* bonobo/bonobo-ui-toolbar-item.h:
	Added missing END_GNOME_DECLS.

2001-01-03  Dietmar Maurer  <dietmar@helixcode.com>

	* configure.in: Bump version to 0.32
 
	* bonobo/bonobo-listener.c (bonobo_listener_new): docu upd.

	* bonobo/bonobo-event-source.c
	(bonobo_event_source_remove_listener): impl.
	(bonobo_event_source_add_listener): impl.

	* samples/controls/sample-control-container.c: use the new methods.

2001-01-03  Michael Meeks  <michael@helixcode.com>

	* tests/Makefile.am: move them here.

	* bonobo/Makefile.am: removed tests.

2001-01-03  Michael Meeks  <michael@helixcode.com>
	
	Re-factoring:

	* bonobo/bonobo-win.c: Gut.

	* bonobo/bonobo-ui-engine.[ch]: transfer most of it here

	* bonobo/bonobo-ui-sync.[ch]: Semi-abstract definition of
	an XML <-> Widget synchronizer

	* bonobo/bonobo-ui-sync-menu.[ch]: Menu sync code.

	* bonobo/bonobo-ui-sync-keys.[ch]: Keybindings sync code.

	* bonobo/bonobo-ui-sync-status.[ch]: Status sync code.

	* bonobo/bonobo-ui-sync-toolbar.[ch]: Toolbar sync code.
	
	Core changes:
	
	* bonobo/bonobo-ui-container.c: Privatize public members,
	(bonobo_ui_container_get_engine),
	(bonobo_ui_container_set_engine): impl.
	(impl_Bonobo_UIContainer_setNode): use ui_node_from_string.

	* bonobo/bonobo-win.c (bonobo_window_get_ui_engine): impl.

	* bonobo/Makefile.am: Fix BONOBO_UIDIR define.

	* bonobo/bonobo-ui-engine.c (bonobo_ui_engine_prune_widget_info): 
	Only kill custom widgets in the top level, recurse with TRUE.

2001-01-02  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-xml.c (reinstate_old_node): emit REMOVE
	before the node is replace in the tree, so we get the right
	Sync object to deal with this in the signal handler, and
	before its children are moved across.

2000-12-29  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-toolbar.c (impl_finalize): chain to parent
	finalize.

2001-01-03  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-running-context.c (get_running_info): correctly
	initialize emitted_last_unref.

2001-01-02  Jacob "Ulysses" Berkman  <jacob@helixcode.com>

	* bonobo/bonobo-win.c (construct_priv): 
	* bonobo/bonobo-ui-toolbar.c (init): honour GNOME preferences for
	toolbar button text and menu shadow

2001-01-02  Michael Meeks  <michael@helixcode.com>

	* monikers/Makefile.am: Sort out cockup with distributing
	generated oafinfo file.

	* monikers/bonobo-moniker-std.c (bonobo_std_moniker_factory): 
	remove redundant factory var.

2000-12-29  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-event-source.c: Include listener to kill warning.

	* bonobo/bonobo-moniker.c (impl_bonobo_moniker_set_name): impl.
	(bonobo_moniker_get_name_full): upd.
	(bonobo_moniker_get_name): upd.
	(bonobo_moniker_get_name_escaped): upd.
	(impl_bonobo_moniker_get_name): impl.
	(bonobo_moniker_class_init): upd.
	(bonobo_moniker_get_prefix): impl.
	(bonobo_moniker_default_parse_display_name): allow NULL prefix.
	(impl_resolve): ditto.

2000-12-29  Michael Meeks  <michael@helixcode.com>

	* Version 0.31
	
2000-12-29  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-transient.c (bonobo_transient_construct): 
	re-add Federico's fixes.

	* configure.in (orbit_version): require ORBit 0.5.6

	* monikers/Bonobo_Moniker_std.oafinfo.in: glup type on same line
	as location to calm oaf-slay.
	add File extender.
	add Stream extender.

2000-12-28  Michael Meeks  <michael@helixcode.com>

	* idl/bonobo-storage.idl: add NotSupported exception to
	Stream::copyTo; this API is deadly broken.

	* bonobo/bonobo-ui-toolbar-icon.c (paint_with_pixbuf): if
	we hit a GDK_PARENT_RELATIVE pixmap we fall through to the
	pants rendering method.

2000-12-28  Vedat Hallac <mvhallac@crosswinds.net>

	* monikers/Makefile.am (Bonobo_Moniker_std.oafinfo): fix for
	different src and build dirs.

2000-12-28  Arturo Tena <arturo@directmail.org>

	* bonobo-idl/Makefile.am: Update CFLAGS / bonobo_idl_libs

2000-12-27  Richard Hult  <rhult@codefactory.se>

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_get_ui_fname): 
	Added final NULL argument to g_strconcat call to prevent
	crash.

2000-12-24  ERDI Gergo  <cactus@cactus.rulez.org>

	* bonobo/bonobo-persist-stream.c: allow missong save/load
	implementations and raise NotSupported exceptions accordingly

	* bonobo/bonobo-persist-file.c: allow missing save/load
	implementations and raise NotSupported exceptions accordingly

	* idl/bonobo-persist.idl: Added NotSupported and IOError
	exceptions to the Persist interfaces

2000-12-23  Miguel de Icaza  <miguel@helixcode.com>

	* bonobo/bonobo-ui-util.c (bonobo_ui_util_get_ui_fname): Do not
	allow for the user file ui to exist.  
	(bonobo_ui_util_get_ui_fname): Do not use
	gnome_datadir_unconditional.  This is broken too.
	(Makefile.am): Define BONOBO_UIDIR to be $(datadir)/gnome/ui

2000-12-23  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-event-source.c 
	(bonobo_event_source_notify_listeners_full): new function

	* bonobo/bonobo-listener.h: added some new methods to handle event
	names.

	* bonobo/bonobo-listener.c: impl. the new methods.

	* bonobo/bonobo-property-bag.c (notify_listeners): use the new
	functions.

2000-12-22  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-exception.c (bonobo_exception_get_text): removed
	NoListening exception.

	* bonobo/bonobo-property-bag.c: removed PropertyListener stuff.

	* idl/bonobo-property.idl: removed the PropertyListener interface,
	removed add/remove ChangeListener methods from PropertyBag,
	removed noListening exception.
	
	* bonobo/bonobo-property-listener.[ch]: removed. We aggreate the
	property bag with an event source instead.

	* bonobo/bonobo-moniker-util.c (query_from_name): return the
	prefix including the colon.

	* samples/controls/sample-control-container.c: make it work with
	the new PropertyBag code. 

	* bonobo/bonobo-property-types.[ch]: removed

2000-12-22  Maciej Stachowiak  <mjs@eazel.com>

	* bonobo.spec.in: Removed ${prefix}/bin/std-moniker, added
	${prefix}/lib/bonobo/moiniker/*

2000-12-22  Dietmar Maurer  <dietmar@helixcode.com>

	* monikers/bonobo-moniker-std.c: merged the file, item, cache and new
	moniker and the file/stream extenders into one shared library.

	* monikers/Bonobo_Moniker_std.oafinfo.in: also merged the oafinfo
	files.

	* monikers/*: cleanup.
	
2000-12-21  Lutz Muller <urc8@rz.uni-karlsruhe.de>

	* storage-modules/bonobo-storage-vfs.c (vfs_open_stream): fix bug.
	(bonobo_storage_vfs_open): invert type check on directories.

2000-12-21  Dietmar Maurer  <dietmar@helixcode.com>

	* bonobo/bonobo-moniker-util.c (query_from_name): return the
	prefix including the colon.

2000-12-21  Michael Meeks  <michael@helixcode.com>

	* monikers/Makefile.am: Add bonobo-moniker-stream-extender again.

	* monikers/bonobo-moniker-extender-stream.c (main): correct to
	the right OAFIID.

2000-12-20  Michael Meeks  <michael@helixcode.com>

	* tests/test-container.c (do_add_canvas_cmd): re-size the canvas area.

	* samples/compound-doc/sample-canvas-item.c (last_unref_cb),
	(main): count objects, setup colormap & visual.
	(item_factory): upd.
	(make_hilbert, setup_item): copy from gnome-libs.

	* bonobo/bonobo-canvas-component.c: Some renaming.
	(impl_Bonobo_Canvas_Component_getUIComponent): impl.
	(gcc_destroy): impl.
	(bonobo_canvas_component_set_ui_component),
	(bonobo_canvas_component_get_ui_component): impl.

	* idl/bonobo-canvas.idl: add setUIContainer.

	* tests/test-container.c (application_new): fixup.

	* tests/Makefile.am (noinst_PROGRAMS): remove test-container-autoload;
	very stale indeed.

2000-12-20  Richard Hult  <rhult@hem.passagen.se>

	* bonobo/bonobo-running-context.c (bonobo_running_context_get_type): 
	fix to use the correct structure size.

2000-12-20  Michael Meeks  <michael@helixcode.com>

	* monikers/bonobo-moniker-extender-file.c (extender_destroy_cb): 
	kill. (file_extender_factory): upd.
	(file_extender_resolve): only check for PersistFile leave stream
	to the stream extender.

	* bonobo/bonobo-object.c (idle_unref_fn),
	(bonobo_object_idle_unref): impl.

2000-12-19  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-generic-factory.c (bonobo_generic_factory_init): 
	remove.
	(bonobo_generic_factory_get_type): upd.
	(create_bonobo_generic_factory): rename to
	(bonobo_generic_factory_corba_object_create): this & publicize.
	(bonobo_generic_factory_new_multi),
	(bonobo_generic_factory_new): upd.
	(bonobo_generic_factory_finalize): chain to finalize not destroy !

	* bonobo/bonobo-shlib-factory.[ch]: Create.

	* bonobo/Makefile.am: update.

2000-12-19  Dietmar Maurer  <dietmar@helixcode.com>

	* monikers/bonobo-moniker-cache.c (bonobo_cache_factory): count
	the running object.

	* monikers/Makefile.am: small bug fix

	* bonobo/bonobo-moniker.c (bonobo_moniker_set_name): allow the
	moniker name to be the same as the prefix.

	* idl/bonobo-listener.idl: addListener returns an Id.

	* bonobo/bonobo-event-source.c: see above.

2000-12-19  Michael Meeks  <michael@helixcode.com>

	* configure.in: Bump version to 0.31

	* monikers/bonobo-moniker-extender-file.c (extender_destroy_cb):
	don't use global variables housed in a just removed shared library!
	this needs splitting into the core...

	* monikers/moniker-test.c (main): remove erroneous double option
	processing.

	* monikers/bonobo-moniker-gunzip.c (gunzip_resolve): use the stream
	extender, don't hard code interface to resolve to; split code into
	(gunzip_resolve_stream): here.

	* monikers/*: Prune scads of code.

2000-12-19  Daniel Egger  <egger@suse.de>

	* components/application-x-gnomine/Makefile.am:
	Fix linking order.

2000-12-18  Maciej Stachowiak  <mjs@eazel.com>

	* monikers/Makefile.am: Removed no longer existent files from
	bonobo_moniker_std_SOURCES; added bonobo-moniker-std.h. This is to
	fix `make distcheck'.

2000-12-19  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker-extender.c (bonobo_moniker_extender_init): remove.
	fully documented.
	(bonobo_moniker_extender_resolve): use the generic Moniker exceptions.

	* bonobo/bonobo-moniker-util.c (bonobo_moniker_util_unescape),
	(bonobo_moniker_util_escape): move to here.

	* tests/test-moniker.c (check_string): upd.

	* bonobo/bonobo-moniker.c (escape_moniker, unescape_moniker): move
	(bonobo_moniker_get_name_escaped, bonobo_moniker_set_name): upd.

	* bonobo/bonobo-moniker-util.c: s/usec/msec/
	fully documented.

2000-12-18  Michael Meeks  <michael@helixcode.com>

	* monikers/Makefile.am: Update seds to be more standard
	and work in odd build environments.
	
	* monikers/bonobo-moniker-oaf.c (oaf_resolve): use
	get_name_full.
	(bonobo_moniker_oaf_resolve): rename to this.

	* monikers/bonobo-moniker-*: Drasticaly prune, lots of tedious gtk+
	sub-classing code removed; killed loads of headers.

	* monikers/bonobo-moniker-std.h: prototype the resolve fns here.

	* bonobo/bonobo-moniker-simple.[ch]: Implement.

	* bonobo/Makefile.am: Add simple.

	* bonobo/bonobo-object-directory.c: sort out house of horrors
	of style, and implementation; dragon removal.

	* monikers/bonobo-moniker-file.c (file_resolve): use the file and stream
	extenders as fallbacks.

	* bonobo/bonobo-moniker.c (impl_resolve): add options.
	(bonobo_moniker_get_name_full): impl.

	* bonobo/bonobo-moniker-extender.c (impl_Bonobo_MonikerExtender_resolve): upd.
	(bonobo_moniker_use_extender): impl.

	* monikers/bonobo-moniker-extender-stream.c (stream_extender_resolve):
	create.

	* monikers/Bonobo_Moniker_Extender_stream.oafinfo: add.

	* monikers/Bonobo_Moniker_Extender_file.oafinfo: upd.

	* monikers/bonobo-moniker-extender-file.c (file_extender_resolve):
	unref the stream after resolving.

	* idl/bonobo-moniker.idl: Add ResolveOptions to 'resolve'.

2000-12-18  Dave Camp  <dave@helixcode.com>

	* monikers/Makefile.am (EXTRA_DIST): 
	Include Bonobo_Monker_Extender_file.oafinfo.in and 
	Bonobo_Moniker_cache.oafinfo.in.

2000-12-18  Dietmar Maurer  <dietmar@helixcode.com>

	* gshell/gshell.c (verb_HelpAbout_cb): changed the text of the
	about dialog (removed "for Linux")

	* monikers/bonobo-moniker-extender-file.c: make it a shlib moniker

	* monikers/Bonobo_Moniker_Extender_file.oafinfo.in: new file

	* monikers/Bonobo_Moniker_cache.oafinfo.in: new file

	* monikers/bonobo-moniker-cache.[ch]: new files

2000-12-17  Miguel de Icaza  <miguel@helixcode.com>

	* monikers/bonobo-moniker-oaf.c (bonobo_moniker_oaf_new): Remove
	the registered prefix, as the code checked in on friday is just
	broken. 

	* bonobo/bonobo-widget.c (bonobo_widget_new_control): Removed
	FIXME as it has been fixed.

	* bonobo/bonobo-moniker-util.c: Sync the name with the actual
	OAFIDD of the HTTP moniker.

	* monikers/Makefile.am (bin_PROGRAMS): Install moniker test.

2000-12-16  Dietmar Maurer  <dietmar@maurer-it.com>

	* bonobo/bonobo-moniker-util.c (get_full_interface_name): fixed a
	small bug.

Fri Dec 15 16:53:30 2000  George Lebl <jirka@5z.com>

	* bonobo/bonobo-arg.c, bonobo/bonobo-ui-component.c:  Swap order
	  of memset arguments to be correct

	* bonobo/bonobo-property-bag.[ch]:  Make constructor method public
	  to allow derivation.  Also use bonobo_object_unref instead of
	  g_free on failed object.

	* bonobo/bonobo-transient.[ch],
	  bonobo/bonobo-ui-toolbar-control-item.[ch], bonobo-widget.[ch]: 
	  Make constructor method public to allow derivation.

2000-12-16  Michael Meeks  <michael@helixcode.com>

	* monikers/bonobo-moniker-query.c (query_resolve): upd.

	* monikers/bonobo-moniker-new.c (new_parse_display_name): kill.
	(new_resolve): upd.
	(bonobo_moniker_new_class_init): upd.

	* monikers/bonobo-moniker-oaf.c (oaf_parse_display_name): kill.
	(bonobo_moniker_oaf_new): impl.

	* monikers/bonobo-moniker-http.c (bonobo_moniker_http_factory): simplify.
	(last_unref_cb): impl.
	remove running object stuff.
	(http_destroy_cb): kill.
	(bonobo_moniker_http_new): shrink.
	(bonobo_moniker_http_class_init): upd.
	(http_parse_display_name): kill.

	* monikers/bonobo-moniker-gunzip.c (bonobo_moniker_gunzip_new): upd.
	(gunzip_destroy_cb): kill.
	remove running objects stuff.
	(last_unref_cb): impl.
	(gunzip_parse_display_name): kill.
	(bonobo_moniker_gunzip_class_init): upd.

	* monikers/bonobo-moniker-item.c (item_parse_display_name): kill.
	(bonobo_moniker_item_new): impl.
	(item_resolve): upd.
	(bonobo_moniker_item_class_init): upd.

	* monikers/std-moniker.c (main, last_unref_cb): update to new
	running context scheme.
	(std_destroy_cb): kill old scheme.
	(bonobo_moniker_factory): update to new constructors.

	* monikers/bonobo-moniker-file.c (file_parse_display_name): kill.
	(file_resolve): prune.
	(bonobo_moniker_file_class_init): upd.

2000-12-15  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker.c (impl_resolve): add auto exception
	set on CORBA_OBJECT_NIL, impl. extenders.
	(bonobo_moniker_construct): impl.
	(bonobo_moniker_default_parse_display_name): impl.
	(bonobo_moniker_get_name): simplify.
	(bonobo_moniker_get_name_escaped): simplify.

	* tests/test-moniker.c (check_string): upd.

	* bonobo/bonobo-activation-context.c (impl_Bonobo_ActivationContext_getExtender): 
	impl. (bonobo_activation_context_get_epv): hook up.

	* bonobo/bonobo-moniker-extender.c (bonobo_moniker_find_extender): 
	allow 1 MonikerExtender to extend many monikers.

2000-12-15  Dietmar Maurer <dietmar@maurer-it.com>

	* monikers/bonobo-moniker-file.c (file_resolve): impl.
	Bonobo/Storage, chain to extender.

	* monikers/Makefile.am: Add bits.

	* monikers/bonobo-moniker-extender-file.[ch]: impl.

	* monikers/Bonobo_Moniker_Extender_file.oafinfo: add.

	* bonobo/Makefile.am: add bits.

	* bonobo/bonobo-moniker-extender.[ch]: impl.

	* idl/bonobo-moniker.idl: add MonikerExtender interface.

2000-12-15  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker.c (escape_moniker): fix precondition.

2000-12-14  Darin Adler  <darin@eazel.com>

	* bonobo.spec.in: Update for recent changes in names of some
	sample programs.

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* tests/Makefile.am: add test-moniker

	* tests/test-moniker.c: create.

	* bonobo/bonobo-moniker.c (escape_moniker): impl.
	(bonobo_moniker_get_name_escaped): use it.
	(unescape_moniker): impl.
	(bonobo_moniker_set_name): impl.

	* bonobo/bonobo-generic-factory.h: s/goad_id/oaf_iid/

	* bonobo/bonobo-selector.c (bonobo_selector_construct): set 'Ok' as
	default on selector.

	* bonobo/bonobo-running-context.c (get_running_info): add create param
	update all calls.

	* bonobo/bonobo-generic-factory.c (bonobo_generic_factory_new):
	ignore factories on the running context.

	* components/selector/bonobo-selector.c (last_unref_cb): impl.
	(main): connect to running context.

	* bonobo/bonobo-running-context.c (bonobo_running_context_new): 
	aggregate an event source with the interface.
	(bonobo_context_running_get): impl.
	(check_empty): notify listener.

	* bonobo/bonobo-event-source.c (bonobo_event_source_ignore_listeners): impl.
	(impl_Bonobo_EventSource_addListenerWithMask): add ignore.

	* bonobo/bonobo-moniker-util.c (get_full_interface_name): impl: maps
	Bonobo/Control         -> IDL:Bonobo/Control:1.0,
	Bonobo/Control:3.5     -> IDL:Bonobo/Control:3.5
	IDL:Bonobo/Control     -> IDL:Bonobo/Control:1.0
	IDL:Bonobo/Control:1.0 -> IDL:Bonobo/Control:1.0
	(bonobo_get_object_async): use it.
	(bonobo_moniker_client_resolve_default): use it too.
	(bonobo_moniker_util_seek_std_separator): impl. escaping support.

	* samples/controls/bonobo-calculator-control.c: update
	
	* samples/controls/bonobo-clock-control.c: update

	* samples/controls/sample-control-factory.c: re-write.

	* samples/controls/Bonobo_Sample_Controls.oafinfo: create.

	* samples/controls/Bonobo_Sample_Calculator.oafinfo: remove.

	* samples/controls/Bonobo_Sample_Clock.oafinfo: remove.

	* samples/compound-doc/Makefile.am: Rename samples.

	* samples/compound-doc/Bonobo_Sample_CanvasItem.oafinfo: upd.

	* samples/compound-doc/Bonobo_Sample_Paint.oafinfo: ditto.

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* components/selector/bonobo-selector.c (generic_factory): deal
	with running object issues in the old way for now.
	(get_prop, set_prop, generic_factory): add properties to make it
	actualy useful.

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* Version 0.30

2000-12-14  Michael Meeks  <michael@helixcode.com>

	* configure.in (orbit_version): downgrade dependency to
	ORBit-0.5.5, NB. try marshaling a CORBA_any containing an Object
	reference with this version.

2000-12-13  Federico Mena Quintero  <federico@helixcode.com>

	* bonobo/bonobo-transient.c (bonobo_transient_construct): Disable
	policy destruction code until ORBit is released, sigh.  THIS WILL
	LEAK.  THIS WILL LEAK.  THE ROOF IS ON FIRE.  WE ARE SORRY ABOUT
	OUR APPEARANCE.

2000-12-13  Dietmar Maurer <dietmar@maurer-it.com>

	* bonobo/bonobo-property-bag-xml.c 
	(bonobo_property_bag_xml_encode_any): argument is const 

	* bonobo/*.c: use BONOBO_EX ()
	
	* bonobo/bonobo-property-bag.c: removed the poa member from
	_BonoboPropertyBagPrivate (replaced by transient)

2000-12-13  Michael Meeks  <michael@helixcode.com>

	* Version 0.29
	
2000-12-13  Michael Meeks  <michael@helixcode.com>

	* configure.in (orbit_version): Depend on the as yet unreleased
	ORBit-0.5.6: badger Elliot about this.
	Totaly expunge the libuuid checks and BonoboBrowser stuff.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* components/selector/bonobo-selector.c (generic_factory): 
	create and init a selector-widget.

	* bonobo/bonobo-selector.c (bonobo_selector_destroy): upd.

	* bonobo/bonobo-selector.h (BONOBO_IS_SELECTOR): rename macro.

	* bonobo/Makefile.am: add bonobo-selector-widget.[ch]

	* bonobo/bonobo-selector-widget.[ch]: split from bonobo-selector.

	* bonobo/bonobo-running-context.c
	(bonobo_running_context_class_init): add signals.
	(bonobo_running_context_ignore_object): impl.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-running-context.c (check_empty): kill fatal bug.

	* components/selector/*: impl. a component selector control.
	
	* components/Makefile.am: add selector

	* configure.in: add selector.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* idl/Makefile.am: Sort IDL.

	* bonobo/Makefile.am (idls): sort and add missing IDL.

2000-12-12  Dietmar Maurer <dietmar@maurer-it.com>

	* bonobo/bonobo-property-bag.[ch]: use BonoboTransient.

	* bonobo/bonobo-property.[ch]: modified to work with BonoboTransient.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-bind-context.[ch]: clean out cruft.

	* bonobo-component-directory.[ch]: ditto.
	
	* bonobo/bonobo-object.c (bonobo_object_finalize_real):
	remove object from running context.
	(bonobo_object_activate_servant): add object to context.

	* bonobo/bonobo-context.c (bonobo_context_init):
	add the 'Running' context.
	(context_add): split from (bonobo_context_init): here.

	* bonobo/Makefile.am: don't install internal context stuff,
	should be used via. the CORBA interface anyway by everyone.
	add bonobo-running-context stuff.

	* bonobo/bonobo-running-context.[ch]: impl.

	* idl/bonobo-context.idl: flesh out running context.

2000-12-12  Michael Meeks  <michael@helixcode.com>

	* tests/test-any.c (main): add gtk_type_init.

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker-util.c (get_async1_cb): impl.
	(get_object_async_ctx_free): impl.
	(bonobo_get_object_async): impl.
	(get_async2_cb): impl.

2000-12-11  Darin Adler  <darin@eazel.com>

	* bonobo/bonobo-ui-toolbar.c: (impl_destroy):
	Fixed loop that destroys the unparented widgets. It was looking at
	p->next after code that might have destroyed p.

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-ui-xml.c (override_node_with): revert
	Darin's last change to this - feature not bug :-)

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* bonobo/bonobo-moniker-util.c (resolve_async_cb): 
	release unref the moniker.
	(bonobo_moniker_resolve_async): take a ref here.
	(bonobo_get_object_async): stub.

2000-12-11  Iain Holmes  <iain@helixcode.com>

	* bonobo/bonobo-property-control.[ch]: Added 
	bonobo_property_control_new_full to use an already created 
	BonoboEventSource. Added a function to retrieve this event source.
	Namespaced the property_changed event name.

2000-12-11  Michael Meeks  <michael@helixcode.com>

	* doc/NAMESPACE: add ref to FAQ.

	* doc/FAQ: add namespacing recommendations

	* OChangelog-2000-12-11: rotated ChangeLog
