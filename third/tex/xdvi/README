DESCRIPTION

xdvi is a program for previewing .dvi files, which are produced by the
mathematical typesetting system, TeX.

INSTALLATION INSTRUCTIONS

You can compile and install with either imake or just plain make.

To install with imake, do the following:

    1.	Set the OSDEFS flags in the Imakefile (see SETTING OSDEFS, below).

    2.  Set the OPTIONDEFS flags in the Imakefile (see COMPILATION OPTIONS,
	below).

    3.	Set the font path options in the Imakefile (see SETTING THE FONT PATH,
	below).

    4.	Make the Makefile:	xmkmf

    5.  Compile xdvi:		make
	If you have problems, see COMMON PROBLEMS WHEN COMPILING, below.

    6.	Try out xdvi.  
	If the settings in step 3 are incorrect, then you can use the
	corresponding environment variables to quickly try out different
	values.  Then rm font_open.o and go back to step 3.

    7.	Make xdvi.man

    8.	Install xdvi and xdvi.man.

Or, to install with plain make, do the following:

    0.	Copy Makefile.std to Makefile.

    1.	Set the OSDEFS flags in the Makefile (see SETTING OSDEFS, below).

    2.  Set the OPTIONDEFS flags in the Makefile (see COMPILATION OPTIONS,
	below).

    3.	Set the font path options in the Makefile (see FONT PATH OPTIONS,
	below).

    Then continue with steps 5-8 as above.


SETTING OSDEFS

	The OSDEFS variable should contain definitions to indicate what type
	of system you are using.  They may be some of the following:

	SYSV		Set for System V compilation.
	VMS		Set for VMS compilation.
	MSBITFIRST	Store bitmaps internally with the most significant bit
			at the left.  For performance reasons, it would be best
			to set this to coincide with what your server uses.
			Use the keystroke '^P' to find information in this
			regard.  Generally, you should use MSBITFIRST if and
			only if '^P' reports bitord = 1, and BMSHORT/BMBYTE
			(below) should be set to match whatever '^P' reports
			under "Unit =".  But, if bitord = byteord, then the
			latter setting should not matter much.
	BMSHORT		Store bitmaps in short integers instead of 32-bit
			integers.  See MSBITFIRST for other relevant comments.
			To check performance, you can use:
				time xdvi -d 8 file.dvi
	BMBYTE		Store bitmaps in bytes instead of 32-bit integers.

	The following table gives OSDEFS settings for some systems:

	Machine		O/S		OSDEFS
	-------		---		------
	DEC Alpha	OSF/1 2.0	OSDEFS=
	Intel x86	Linux		OSDEFS=-DHAS_SIGIO
	Intel x86	Interactive Unix 4.0  OSDEFS=-DSTREAMSCONN
	NeXT		NeXTStep	OSDEFS=-DMSBITFIRST -DVFORK -Dpid_t=int
	RS6000		AIX		OSDEFS=-DMSBITFIRST -DSVR3 -DSTREAMSCONN
	SGI		IRIX 5.1	OSDEFS=-DMSBITFIRST -DSVR4
					(If not using imake, also add
					-cckr -float -KPIC -G 0 -Wf,-XNh2000
					to CFLAGS.)
	Sun 3		Sunos 4.x	OSDEFS=-DMSBITFIRST -DVFORK
					  or   -DMSBITFIRST -DVFORK=include
	Sun Sparc	Sunos 4.x	OSDEFS=-DMSBITFIRST -DVFORK=include
	Sun Sparc	Solaris 2.x	OSDEFS=-DMSBITFIRST -DSVR4 -DHAS_SIGIO

	If, when running xdvi, you will usually be displaying remotely
	(e.g., on an X terminal), then you may want to set the BMSHORT/BMLONG
	flags and the byte order to correspond to the most common display
	device.


COMPILATION OPTIONS

	The OPTIONDEFS variable should be set to indicate which options
	xdvi should be compiled with.  These are listed below.

	There is really no difference between OSDEFS and OPTIONDEFS; the only
	reason for keeping them separate is to allow OSDEFS to be tabulated
	as above.

	Option Flag	Explanation
	-----------     -----------

	USE_PK		Use pk format font files.  This is preferred because
			pk font files are smaller.
	USE_GF		Use gf format font files.
	BUTTONS		Put radio buttons on the right side of the window for
			commonly used commands.
	NOTOOL		Compile using raw X calls.
	GREY		Use greyscale anti-aliasing for displaying shrunken
			bitmaps.
	PS_DPS		Use Display PostScript <TM> to display PostScript <TM>
			specials.  Your system must have DPS for this to work.
	PS_NEWS		Use the NeWS server to display PostScript specials.
			Your system must have the NeWS include files and
			libraries for this to compile; the xdvi binary can be
			run with either a standard X server or the NeWS server,
			but in the former case the code generated by PS_NEWS
			will have no effect.
			NOTE:  This option refers only to OpenWindows versions
			3.1 (possibly 3.2) and earlier (running under SunOS
			4.x).  If you are using Solaris, then you should use
			PS_DPS instead.
	PS_GS		Use Ghostscript <TM> to render PostScript specials.
			Your system must have Ghostscript installed for this
			to work.  Versions earlier than 2.6.1 have not been
			tested with xdvi.
	GS_PATH=\"/usr/local/bin/gs\" Use the given program as the Ghostscript
			interpreter when displaying PostScript specials.
			This option automatically selects PS_GS.
	MAKEPK		If a font is not found, then try to call Metafont to
			create the font.  When using this option, remember to
			set the paths in MakeTeXPK correctly for your site,
			and be sure that the destination directory for
			MakeTeXPK appears in your DEFAULT_FONT_PATH variable.
			To have PostScript<TM>-like fonts made as well, see
			the package gsftopk distributed with xdvi.
	MAKEPKCMD=\"/usr/local/tex/bin/MakeTeXPK\" Same as the above, but this
			variant explicitly declares which command to use to
			create the font.
	A4		Use European size paper by default.
	TEXXET		Enables op-codes 250 and 251 (used for right-to-left
			languages).
	BDPI		Default number of pixels per inch to use.
			Don't forget to make corresponding changes to
			DEFAULT_FONT_SIZES.
	ALTFONT		Default font to use if the font named in the dvi file
			cannot be found.  Can be set to NULL.  By default,
			it is "cmr10".
	XDVIFONTS_ONLY	Never check the TEXFONTS environment variable.
			Normally xdvi checks TEXFONTS if the XDVIFONTS variable
			is not set.  This option is recommended if the version
			of TeX in use requires that the TEXFONTS variable be
			set.  See the relevant paragraph in xdvi_man.sed for
			more details.  This option turns off that paragraph.
	SEARCH_SUBDIRECTORIES Enable recursive searching of subdirectories for
			font files (* and ** specifiers).
			This also enables the TEXFONTS_SUBDIR environment
			variable and the DEFAULT_SUBDIR_PATH makefile variable.
	NOQUERY		Set this if you have trouble compiling the definition
			of drawingWidgetClass.
	TICKTMP		Directory for temporary files created by PostScript
			specials that call for the output of a command (e.g.,
			compressed .eps files).  Default is "/tmp".
	TICKCACHESIZE	Maximum number of such files to be stored at a time
			(this is dynamically increased if more than this number
			occur on a single page).  Default is 3.


SETTING THE FONT PATH

	Read the ENVIRONMENT section of xdvi_man.sed to determine the correct
	default values for the XDVIFONTS and XDVISIZES environment variables.
	Edit the Imakefile or Makefile and change the values of the make
	variables DEFAULT_FONT_PATH and DEFAULT_FONT_SIZES to these values.
	If your site uses virtual fonts, do the same thing with the
	DEFAULT_VF_PATH variable.  Note that support of virtual fonts in xdvi
	does not include support of built-in Postscript<tm> fonts.
	Usually you will want to use the same font files as your printer;
	given a choice, however, it has been suggested that write-white
	fonts look better.

	(Note:  If you are using both imake and the "/*" or "/**" syntax for
		recursive searching of subdirectories, you should enclose
		the string in quotes, since /* marks the beginning of a C
		comment, and the Imakefile is processed by cpp.)

	If you are compiling with PostScript specials enabled, then you also
	need to set the DEFAULT_FIG_PATH and DEFAULT_HEADER_PATH variables.
	These should contain colon-separated lists of directories (but without
	`%' specifiers).  The DEFAULT_FIG_PATH variable gives the list of
	directories to search for PostScript figures; typically this is the
	same as the default input directory used by TeX.  The
	DEFAULT_HEADER_PATH variable gives the default list of directories
	to search for PostScript headers.  If you also install dvips, then
	it is recommended that DEFAULT_FIG_PATH and DEFAULT_HEADER_PATH be
	set to the same values as FIGPATH and HEADERPATH in the Makefile
	for dvips.


COMMON PROBLEMS WHEN COMPILING

	Some early versions of `make' may complain and abort if the file
	Makefile.cfg does not exist.  If this is the case, do:
				touch Makefile.cfg
				make config
	before running make.  (If `make' complains but continues by running
	./mkconfig, then this is OK.)

	If you get the error that the #include file <stdlib.h> does not exist,
	then you should include -DX_NOT_STDC_ENV in your OSDEFS variable.
	In X11R5 or later this problem should not occur.

================================================================

	This program is the combined work of many people, including but not
restricted to:
	Eric Cooper, CMU
	Bob Scheifler, MIT LCS
	Paal Kvamme, Norwegian Institute of Technology
	H\aa vard Eidnes, Norwegian Institute of Technology
	Mark Eichin, MIT SIPB
	Paul Vojta, UC Berkeley
	Jeffrey Lee, U of Toronto
	Donald Richardson, Clarkson Univ.
	Ricardo Telichevesky, MIT
	Luis Miguel Silveira, MIT

At the present time, the person to send bug reports to is Paul Vojta,
	vojta@math.berkeley.edu.
When doing so, please specify hardware and OS version, OPTIONDEFS
and OSDEFS settings in the Makefile, and anything else that may be
relevant.  Be sure you've checked the FAQ first, especially for questions
regarding searching for font files.

This software has been tested on Sparc (SunOS 4.1.3) and Intel 486 (Linux 1.0).

In addition to the various comp.sources.x archives, current versions of this
program can also be obtained via anonymous ftp from the following location:
	ftp.x.org		file contrib/applications/xdvi-20.tar.Z
	[198.112.44.100]
To ease the load on ftp.x.org, you may also check other X archives, for example:
	gatekeeper.dec.com	file pub/X11/contrib/applications/xdvi-20.tar.Z
	[16.1.0.2]
For those who like to live on the bleeding edge, the latest and greatest
beta test version is often available on:
	math.berkeley.edu	pub/Software/TeX/xdvi_beta.tar.Z
	[128.32.183.94]	

Paul Vojta, 10 May 1995

================================================================

Note for IBM RS6000 users:  some of the libraries are in non-obvious places:

	libXmu	/usr/lpp/X11/Xamples/lib/Xmu/libXmu.a
	libXaw	/usr/lpp/X11/Xamples/lib/Xaw/libXaw.a

These should be moved to /usr/lib or some more reasonable place (or use
symlinks), and ditto for the include files, which are initially placed
in /usr/lpp/X11/Xamples/include.

================================================================

Notes of historical nature follow.  Most recent changes are listed at the end
of the file.

================================================================

This directory contains a version of xdvi capable of reading GF, PXL
and PK font files. This version of xdvi is based on the source that
"came with" X v10r3. Xdvi was modified by Paal Kvamme at the Norwegian
Institute of Technology, based on the modifications I had made to
dviimp (a dvi to ImPress converter). This code was again more or less
directly translated from the web source of PKtoPX.

If you discover (and fix) any bugs in this code, please notify me, so
I can make the corresponding changes myself.

---------
H}vard Eidnes	(TeXish: H\aa vard Eidnes)
Division of Computer Science
Norwegian Institute of Technology

E-Mail: h_eidnes%vax.runit.unit.uninett@nta-vax.arpa
================================================================
Also has path search added by Mark Eichin, looks in TEXFONTS
================================================================

================================================================
Additional notes:
	X11 version now works on the IBM PC/RT as well as VAX.
			[eichin:19880313.1330EST]
================================================================
*MORE* fixes (for athena release locker) [eichin:19880722.2058EST]
Fixes:
	narrow vertical and horizontal lines no longer disappear.
	bogus underlining (which usually occured on even sample sizes
of odd sized characters) no longer occurs.
	-S number (or typing number followed by S) will adjust the
sampling fraction; 0 is special cased to mean if anything in the
sampled zone is set, set the sample, else clear it. Interesting to
experiment with, though not useful for reading (the default value of 3
is just right.)
	-display and -geometry arguments work (so do old style forms,
though they were broken before)
	fixed one of the PK debugging messages to print the correct
font name instead of printing the pointer as text.
	included Ken Raeburn <raeburn>'s changes to support multiple
screens.
================================================================
More changes:

    1.  Incorporated the bitmap under a viewport widget using the toolkit
	(X11 only);
    2.  Added an icon and icon geometry arguments (X11 only);
    3.  Supported window resizing;
    4.  Added a 'c' option to move whatever is currently under the cursor to
	the center of the window;
    5.  Added an 'R' option to reread the .dvi file, and added logic to make
	'R' happen automatically whenever any part of the window is exposed
	and the dvi file changes (so that you can iconify xdvi, run tex,
	deiconify xdvi, and voila!);
    6.  Added a 'magnifying glass':  when you push a button, a window pops
	up, showing the region of the page, unshrunk;
    7.  Added support for gf fonts;
    8.  Upgraded font searching (at our site we use /usr/custom/tex82/gf
	for gf fonts, /usr/custom/tex82/pk for pk fonts, etc.);
    9.  Made numerous internal changes (removed all the lint I could,
	made unshrunk bitmaps permanently resident, which speeds up size
	changing, made table.h necessary only for pxl.h, split up the source
	file into xdvi.c, dvi.c, gf.c, pxl.c, and pk.c, made shrinking occur
	relative to the character's hot point, etc.)
   10.  The program reads SIGIO signals and processes incoming events
	immediately, so that it can stop displaying things that would be
	erased anyway.  If these interrupts are not coming through, then
	it also checks for incoming events every several dozen characters
	displayed.
   11.  Further split up dvi.c into dvi_init.c and dvi_draw.c; added
	compilation options for various internal bitmap representations.
	Fixed it so gcc won't give warnings, and so it works with R3 toolkit.
--  Patchlevel 2:  --
   12.  Added MAXCHARS compilation option.  Eliminated the nonsense with
	generating table.h.
--  Patchlevel 3:  --
   13.  Added -altfont command line option and SYSV compilation option.
================================================================================

4/1989  Modified for System V boxes. -DSYSV compiler option.

Donald Richardson, donr@crystal.mie.clarkson.edu

================================================================================
--  Patchlevel 4:  --
   14.  Removed MAXCHARS compilation option.  It's automatic now.  Made X10
	scrolling smoother.  Implemented the moving magnifying glass.
--  Patchlevel 5:  --
   15.  Implemented compilation without the toolkit, as well as scrollbars
	and tpic support in X10.  Also this version should work with color
	VAXstations, although overstrike characters will come out incorrectly.
   16.  Fixed a bug in gf reading routines:  specials at the beginning of
	a character def. were not being processed.  Thanks to
	kevin@amath.washington.edu for a bug report and fix.
   17.  Added 'k' keystroke.
--  Patchlevel 6:  --
   18.  Added buttons on the right side of the window.
   19.  Added -pagewidth and -pageheight command line options and A4
	compilation option.
   20.  Added a yet more robust font finding algorithm.
--  Patchlevel 7:  --
   21.  Replaced -pagewidth and -pageheight options with -paper.
--  Patchlevel 8:  --
   22.  Added compatibility for X11R4 and VMS.  Fixed up alignment of rules.
--  Patchlevel 9:  --
   23.	Removed obsolete '#' and '=' options from the X11 version:  they
	interfere with emacs.
--  Patchlevel 10: --
   24.	Implemented arrow keys, expert mode, searching for the font's actual
	size first, the -[xy]offset and -sw options, and numerous bug fixes.
--  Patchlevel 11: --
   25.	Implemented recursive searching for font files in subdirectories.
   26.	Changed +sw to -hushspecials and implemented -hush.
   27.	Modified mksedscript so that the man page comes out neater.
   28.  Added a -keep option and resource to match the `k' keystroke.
--  Patchlevel 12: --
   29.  Implemented virtual fonts (this does not include built-in
	Postscript<tm> fonts!!!).
   30.	X11R5 support, and numerous bug fixes.
--  Patchlevel 13: --
   31.  Added support for TeXXeT.
--  Patchlevel 14: --
   32.  Added support for greyscale anti-aliasing.
--  Patchlevel 15: --
   33.  Added support for MakeTeXPK, as in dvips.
--  Patchlevel 16: --
   34.	In the code for greyscale anti-aliasing, try to allocate a colormap
	so that GXor operations can be used for drawing.  Also interpolate
	between foreground and background colors.
--  Patchlevel 17: --
   35.	Fixed some bugs in the greyscale code.
   36.	Implemented an environment variable for the MakeTeXPK script.
   37.	Replaced mksedscript with a script using /bin/sh.
--  Patchlevel 18: --
   38.	Implemented checking of checksums and the -hushchecksums option.
   39.  Implemented non-square magnifying glasses.
   40.	Removed support for X10.
   41.	Removed support for the pxl font format.
   42.	Added support for PostScript specials via DPS or NeWS or gs.
--  Patchlevel 19: --
   43.	Implemented `header=' and `!' PostScript specials (and the
	corresponding -noscan option).
   44.	Implemented path searching for PostScript header and figure files,
	in addition to shell escape capability (also the -allowshell option).
   45.	Allow setting of -gamma with the `S' keystroke.
   46.	Added options -nomakepk, -mfmode, -safer, -interpreter, -nogssafer, and
	-gspalette.
--  Patchlevel 20: --
   47.	Bug fixes.

Paul Vojta, vojta@math.berkeley.edu
