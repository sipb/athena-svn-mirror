<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE> IFHP-HOWTO: Font Download Support</TITLE>
 <LINK HREF="ifhp-9.html" REL=next>
 <LINK HREF="ifhp-7.html" REL=previous>
 <LINK HREF="ifhp.html#toc8" REL=contents>
</HEAD>
<BODY>
<A HREF="ifhp-9.html">Next</A>
<A HREF="ifhp-7.html">Previous</A>
<A HREF="ifhp.html#toc8">Contents</A>
<HR>
<H2><A NAME="s8">8. Font Download Support</A></H2>

<P>For historical reasons,
there is support for downloading a font or other file to the
printer.
A large amount of the necessary operations are now in the
<CODE>ifhp.conf</CODE>
file.
<P>The
<CODE>font_download</CODE>
built-in option supports downloading as described below.
<H2><A NAME="ss8.1">8.1 PCL Font Downloading</A>
</H2>

<P>The following shows the a typical
<CODE>ifhp.conf</CODE>
file which has PCL font downloading enabled.
<BLOCKQUOTE><CODE>
<PRE>
#
# Fonts and Font Downloading
#  fontid is used to set the current font
pcl_init=[ ... font ... ]

# combination command
pcl_font=[ delete_fonts font_id font_download font_primary ]

# font control
#
font_op=0
pcl_font_op=\033*c\%{font_op}F
pcl_delete_fonts=\033*c0F

font_id=1
pcl_font_id=\033*c\%{font_id}D

# set primary font
font_primary=1
pcl_font_primary=\033(\%{font_primary}X

# font directory
pcl_fontdir=/usr/local/lib/fonts

#default font file
font=c1201b.10
</PRE>
</CODE></BLOCKQUOTE>
<P>To allow users to download a font and have it set up for PCL use,
the 
<CODE>pcl_init</CODE>
option should include the
<CODE>font</CODE>
option in an appropriate position in the intitialization sequence.
As shown above,
this will get expanded into the
<CODE>pcl_delete_fonts</CODE>,
<CODE>pcl_font_id</CODE>,
<CODE>pcl_font_download</CODE> (which is has built-in support),
and the
<CODE>pcl_font_primary</CODE>
options,
which are expanded in order.
<P>The
<CODE>pcl_font_download</CODE> is supported by the builtin operation which will
find the
<CODE>pcl_fontdir</CODE>
directory value
and a value for the
<CODE>font</CODE>
variable,
using values from the
<CODE>-Z</CODE>
and
<CODE>-T</CODE>
and configuration information in that order.
If no
<CODE>font</CODE>
value is found,
no font will be downloaded.
For example:
<BLOCKQUOTE><CODE>
<PRE>
lpr -Tfont=font1,font2
</PRE>
</CODE></BLOCKQUOTE>
<P>When the
<CODE>pcl_font_download</CODE>
option is expanded,
it will generate the pathnames
<CODE>/usr/local/lib/fonts/font1</CODE>
and
<CODE>/usr/local/lib/fonts/font2</CODE>,
open these files,
and send their contents directly to the printer.
<H2><A NAME="ss8.2">8.2 PS Font Downloading</A>
</H2>

<P>PostScript font downloading is supported in a similar manner to
PCL font downloading.
<BLOCKQUOTE><CODE>
<PRE>
#
# Fonts and Font Downloading
# 
ps_init=[ ... font ... ]

# combination command
pcl_font=[ font_download ]

# font directory
ps_fontdir=/usr/local/lib/fonts

#default font file
font=font.ps.10
</PRE>
</CODE></BLOCKQUOTE>
<P>In a similar manner to the PCL font downloading,
when the
<CODE>ps_init</CODE>
list is expanded,
the
<CODE>ps_font</CODE>
entry will be expanded in turn.
If the <CODE>-Zfont=ZapDingbat.ps</CODE> is specified,
then the
<CODE>/usr/local/lib/fonts/ZapDingbat.sp</CODE>
file will be opened and downloaded to the printer.
<H2><A NAME="ss8.3">8.3 PJL File Downloading</A>
</H2>

<P>In a similar manner to the above font downloading,
you can specify a configuration or other setup file that should be
sent to the printer as part of the PJL setups.
The following configuration shows how to set this up.
<BLOCKQUOTE><CODE>
<PRE>
#
# PJL Initialization File Downloading
#  fontid is used to set the current font
pjl_init=[ ... setup  ... ]

setup=initval
font=\%s{setup}
# setup directory
pjl_fontdir=/usr/local/lib/fonts
pjl_setup=[ font_download ]
</PRE>
</CODE></BLOCKQUOTE>
<P>The above configuration will cause the value of the
<CODE>setup</CODE>
<CODE>-Z</CODE>,
<CODE>-T</CODE>
or configuration option to be used.
<HR>
<A HREF="ifhp-9.html">Next</A>
<A HREF="ifhp-7.html">Previous</A>
<A HREF="ifhp.html#toc8">Contents</A>
</BODY>
</HTML>
