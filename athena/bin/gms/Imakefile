#
# $Id: Imakefile,v 1.4 1991-07-08 09:19:40 probe Exp $
#

PROJECT= gms
SERVER= messaged

ETOBJS= gethost_err.o globalmessage_err.o hesiod_err.o
OBJS= get_a_message.o get_fallback_file.o get_message.o get_message_from_server.o get_servername.o gethost_errors.o hesiod_errors.o put_fallback_file.o read_to_memory.o view_message_by_tty.o view_message_by_zephyr.o check_viewable.o

DEFINES= -I.

LIB= lib${PROJECT}.a
LIBS= -lhesiod -lcom_err

error_table(gethost_err)
error_table(globalmessage_err)
error_table(hesiod_err)

SimpleProgram(get_message,$(LIB),$(LIBS),$(ATHBINDIR))
SimpleProgram($(SERVER),message_daemon.o $(LIB),$(LIBS),$(ATHETCDIR))

install_man(get_message.1,get_message.1)

build_library($(PROJECT),$(ETOBJS) $(OBJS))

MDFLAGS=-DGMS_SERVER_MESSAGE=\"/site/Message\"
SpecialObject(message_daemon.o,message_daemon.c,$(MDFLAGS))
