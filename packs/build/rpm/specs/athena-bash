Name: athena-bash
Summary: The GNU Bourne Again shell (bash), as configured for Athena.
License: GPL
Group: System Environment/Shells
Provides: bash = 2.05b

%description
Bash is a GNU project sh-compatible shell or command language
interpreter. Bash (Bourne Again shell) incorporates useful features
from the Korn shell (ksh) and the C shell (csh). Most sh scripts
can be run by bash without modification.

Bash offers several improvements over sh, including command line
editing, unlimited size command history, job control, shell
functions and aliases, indexed arrays of unlimited size and
integer arithmetic in any base from two to 64. Bash is ultimately
intended to conform to the IEEE POSIX P1003.2/ISO 9945.2 Shell and
Tools standard.

%post
if [ ! -f /etc/shells ] || ! grep -q '^/bin/athena/bash$' /etc/shells; then
  echo "/bin/athena/bash" >> /etc/shells
fi

for file in `find /usr/athena/info -type f ! -name dir`; do
    install-info --info-dir=/usr/athena/info $file 2>/dev/null
done
exit 0

%postun
[ $1 = 0 ] || exit 0
grep -v '^/bin/athena/bash$' < /etc/shells > /etc/shells.rpm
mv /etc/shells.rpm /etc/shells
