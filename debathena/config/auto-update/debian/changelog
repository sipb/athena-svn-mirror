debathena-auto-update (1.23) UNRELEASED; urgency=low

  * Upgrade attempts now happen up to 3 times per night (Trac #694)
  * Download and verify a recovery script (Trac #783)

 -- Jonathan Reed <jdreed@mit.edu>  Thu, 10 Mar 2011 23:48:43 -0500

debathena-auto-update (1.22.2) unstable; urgency=low

  * Use the correct version notation when removing obsolete conffiles

 -- Jonathan Reed <jdreed@mit.edu>  Mon, 07 Mar 2011 16:39:23 -0500

debathena-auto-update (1.22.1) unstable; urgency=low

  * Don't blindly copy maintainer script snippets from websites that are
    full of lies

 -- Jonathan Reed <jdreed@mit.edu>  Mon, 07 Mar 2011 16:39:01 -0500

debathena-auto-update (1.22) unstable; urgency=low

  * Install debathena-license-config and reconfigure packages as necessary
  * Add dependency on debathena-license-config
  * Remove old cron.d file while attempting to comply with Debian policy

 -- Jonathan Reed <jdreed@mit.edu>  Wed, 02 Mar 2011 14:37:09 -0500

debathena-auto-update (1.21) unstable; urgency=low

  * Generate crontabs at configure time (Trac #791)
  * Run an update at boot time if it's been too long since the last one
  * Configurable conffile conflict behavior on workstation (Trac #543)
  * Pre-seed /var/lib/athena-update-status (Trac #686)
  * Cleanup status file on uninstall
  * Set UCF_FORCE_CONFFfoo variables where appropriate (Trac #552)

 -- Jonathan Reed <jdreed@mit.edu>  Fri, 18 Feb 2011 22:54:38 -0500

debathena-auto-update (1.20) unstable; urgency=low

  * Don't depend on at, because bad things happen (Trac #782)

 -- Jonathan Reed <jdreed@mit.edu>  Tue, 25 Jan 2011 12:43:05 -0500

debathena-auto-update (1.19.1) unstable; urgency=low

  * Don't chmod non-existent files
  * Be louder in the comments
  * Use wget -N for completeness

 -- Jonathan Reed <jdreed@mit.edu>  Thu, 26 Aug 2010 14:39:12 -0400

debathena-auto-update (1.19) unstable; urgency=low

  * Add athena-auto-upgrade to try and upgrade machines to a new release
  * Depend on kexec-tools, for auto-upgrade

 -- Jonathan Reed <jdreed@mit.edu>  Thu, 12 Aug 2010 22:39:35 -0400

debathena-auto-update (1.18) unstable; urgency=low

  * Change update-status to give seconds since the epoch which is easier
    for Nagios to parse

 -- Jonathan Reed <jdreed@mit.edu>  Sun, 25 Apr 2010 23:00:35 -0400

debathena-auto-update (1.17.1) unstable; urgency=low

  * Don't cause cron to send mail when everything's fine.
  * Add dependency on cron and at

 -- Jonathan Reed <jdreed@mit.edu>  Fri, 23 Apr 2010 10:36:11 -0400

debathena-auto-update (1.17) unstable; urgency=low

  * Use at(1) instead of desync (Trac #309)

 -- Jonathan Reed <jdreed@mit.edu>  Fri, 23 Apr 2010 10:33:01 -0400

debathena-auto-update (1.16) unstable; urgency=low

  * Force new conffiles on cluster machines (Trac #483)

 -- Jonathan Reed <jdreed@mit.edu>  Tue, 06 Apr 2010 12:14:17 -0400

debathena-auto-update (1.15.1) unstable; urgency=low

  * Don't break cron's invocation of athena-auto-update

 -- Jonathan Reed <jdreed@mit.edu>  Wed, 24 Mar 2010 17:11:13 -0400

debathena-auto-update (1.15) unstable; urgency=low

  * Add a -n option to prevent it from rebooting, because if you reboot in
    recovery mode, you end up back in recovery mode, because kexec sucks
  * Document -n option in man page

 -- Jonathan Reed <jdreed@mit.edu>  Tue, 23 Mar 2010 15:20:58 -0400

debathena-auto-update (1.14) unstable; urgency=low

  * Don't prefix the log message with the fqdn, that's syslog's job
  * Change the tag to "athena-auto-update"

 -- Jonathan Reed <jdreed@mit.edu>  Tue, 16 Mar 2010 10:49:22 -0400

debathena-auto-update (1.13) unstable; urgency=low

  * Run dpkg --configure -a each time (Trac #407)
  * Create a status file (/var/lib/athena-update-status) that can be
    easily queried with athinfo.  The file contains the timestamp of the
    last successful update, the timestamp of the last attempted update,
    the status of the last attempted update, and any additional status
    messages.
  * Include a manpage so lintian will STFU

 -- Jonathan Reed <jdreed@mit.edu>  Fri, 12 Mar 2010 17:27:55 -0500

debathena-auto-update (1.12) unstable; urgency=low

  * Inhibit updates during a cluster login.
  * Write an /etc/nologin-style file in /var/run while updating.
  * Slow updates to a 6-hour (desync'd) schedule during waking hours.

 -- Geoffrey Thomas <geofft@mit.edu>  Sun, 08 Nov 2009 21:46:52 -0500

debathena-auto-update (1.11.2) unstable; urgency=low

  * Unrevert "Use the apt_release key", and fix the bugginess.

 -- Geoffrey Thomas <geofft@mit.edu>  Fri, 15 May 2009 01:32:52 -0400

debathena-auto-update (1.11.1) unstable; urgency=low

  * Revert "Use the apt_release key instead of the apt key in clusterinfo"
    because it's buggy.

 -- Geoffrey Thomas <geofft@mit.edu>  Wed, 08 Apr 2009 17:20:01 -0400

debathena-auto-update (1.11) unstable; urgency=low

  * Don't avoid logging the output of `aptitude update` (Closes: Trac #178).
  * Fix a typo that caused the logger command not to get our hostname.
  * Use the apt_release key instead of the apt key in clusterinfo
    (Closes: Trac #163).

 -- Geoffrey Thomas <geofft@mit.edu>  Tue, 07 Apr 2009 23:51:40 -0400

debathena-auto-update (1.10) unstable; urgency=low

  * Update the apt-file cache when running other updates.

 -- Evan Broder <broder@mit.edu>  Fri, 06 Mar 2009 17:19:31 -0500

debathena-auto-update (1.9) unstable; urgency=low

  * Remove DEB_AUTO_UPDATE_DEBIAN_CONTROL.
  * Change "Debian-Athena Project" to "Debathena Project".
  * Remove debian/control from version control.
  * Clean up debian/copyright.

 -- Tim Abbott <tabbott@mit.edu>  Sat, 24 Jan 2009 19:00:52 -0500

debathena-auto-update (1.8) unstable; urgency=low

  * Run the auto-update cron job over 2 hours, instead of 30 minutes, and
    desyncronize it over the full 2 hours.

 -- Evan Broder <broder@mit.edu>  Wed, 21 Jan 2009 20:40:08 -0500

debathena-auto-update (1.7) unstable; urgency=low

  * Use aptitude --download-only install to force the aptitude conflict
    resolver to make a decision before we decide whether to let it
    proceed.
  * Abort the upgrade if somehow the scheduled solution still involves
    breaking any packages.

 -- Anders Kaseorg <andersk@mit.edu>  Sat, 29 Nov 2008 03:41:31 -0500

debathena-auto-update (1.6) unstable; urgency=low

  * Protect all installed debathena or openafs metapackages from removal.

 -- Anders Kaseorg <andersk@mit.edu>  Tue, 28 Oct 2008 15:08:18 -0400

debathena-auto-update (1.5) unstable; urgency=low

  * Set DEBCONF_FRONTEND=noninteractive during updates.
  * Pass --assume-yes to more aptitude commands to avoid loops.

 -- Greg Hudson <ghudson@mit.edu>  Fri, 12 Sep 2008 10:21:34 -0400

debathena-auto-update (1.4) unstable; urgency=low

  * Fix a bug causing nothing to happen during updates.

 -- Greg Hudson <ghudson@mit.edu>  Fri, 05 Sep 2008 13:22:48 -0400

debathena-auto-update (1.3) unstable; urgency=low

  * Allow hesiod cluster info to repoint debathena apt repository.

 -- Greg Hudson <ghudson@mit.edu>  Tue, 26 Aug 2008 12:39:30 -0400

debathena-auto-update (1.2) unstable; urgency=low

  * Tie into reactivate's new login chroots (when installed).
  * athena-auto-update is now only invoked by cron.
  * auto updates can now run during logins.
  * Reboot when necessary if no one is logged in.

 -- Greg Hudson <ghudson@mit.edu>  Fri, 22 Aug 2008 15:34:47 -0400

debathena-auto-update (1.1) unstable; urgency=low

  * Improve diagnostic output for the log.
  * Remove the pid file when we are done.
  * Stop if aptitude update fails.
  * Set a path in the cron.d file so that it runs.

 -- Greg Hudson <ghudson@mit.edu>  Sat, 16 Aug 2008 19:28:38 -0400

debathena-auto-update (1.0) unstable; urgency=low

  * Initial release.

 -- Greg Hudson <ghudson@mit.edu>  Fri, 15 Aug 2008 13:37:42 -0400
